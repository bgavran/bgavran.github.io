<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-M6CGFEY0WE"></script>
        <script>
         window.dataLayer = window.dataLayer || [];
         function gtag(){dataLayer.push(arguments);}
         gtag('js', new Date());

         gtag('config', 'G-M6CGFEY0WE');
        </script>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="author" content="Bruno Gavranovic" />
        <meta name="viewport" content="width=device-width" />
        <meta http-equiv="Cache-Control" content="max-age=86400, must-revalidate" />
        <title>Bruno Gavranović</title>
        <script src="../css/jquery.js"></script>
        <script src="../css/selectfile.js"></script>
        <link rel="stylesheet" type="text/css" title="hakyll_theme" href="../css/theprofessional.css" />
        <link href="https://fonts.googleapis.com/css?family=Titillium+Web" rel="stylesheet">
    </head>
    <body>
        <div class="highbar">&nbsp;</div>
        <div class="container-gallery">
        <div id="content" class="inside">

        <div id="header">
          <div class="box">
            <div id="logo" class="name">
                <h2><pageTitle><a href="../">Bruno Gavranović</a></pageTitle></h2>
            </div>
            <div id="navigation" class="pageslinks">
              <nav class="menuNav">
                <div class="menuItems">
                <a href="../" class="posts/2022-01-05-lenses-to-the-left-of-me.md">Home</a>
                <a href="../archive.html" class="posts/2022-01-05-lenses-to-the-left-of-me.md">Posts</a>
                <a href="../papers.html" class="posts/2022-01-05-lenses-to-the-left-of-me.md">Papers</a>
                <a href="../research_philosophy.html" class="posts/2022-01-05-lenses-to-the-left-of-me.md">Research Philosophy</a>
                <a href="../about.html" class="posts/2022-01-05-lenses-to-the-left-of-me.md">About</a>
		<!-- <a href="/contact.html" class="posts/2022-01-05-lenses-to-the-left-of-me.md">Contact</a> -->
                </div>
              </nav>
            </div>
        </div>
        </div>
            <script src="https://unpkg.com/commentbox.io/dist/commentBox.min.js"></script>

<div class="info">
    Posted on January  5, 2022
    
</div>

<h1 id="lenses-to-the-left-of-me-prisms-to-the-right">Lenses to the left of me, Prisms to the right</h1>
<p>There’s an interesting way to think about lenses and prisms. Lenses model processes that perform internal computation <em>and</em> interact with the environment. Prisms model processes that perform internal computation <em>or</em> interact with the environment. Let me explain what I mean.</p>
<p>A lens <img width="125" alt="(A, A&39;) \to (B, B&39;)" height="18" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPsAAAAkCAQAAADlE4TXAAAEkklEQVR4nN1ci5WjMAykBVqgBVpwC7RAC7TgFmiBFmiBFmghLeRsk9wRkKyPxYa94e17u4GM7ZEtyQK2qn4DXNV8uwu/Cv+FXn31rB7f7sQvQoFebTXa9qUAYxjG+vq9rqbwcx/cSac31Hp11cK+uK+8vGcitkcYxvD3r1bQt6sh0ennoNSrDXOFGxua0Mis6RubzSWXte/4EAZyB+A6TWEU0DGFSd2q2uIzKvWqw2B6QXeehkaA2Hz47OgBZlMPo0NOJxeOIfT7GUbkdscQvvMMvZcnXHxGpV5esHpd6siTfb2GLQ7rKFMTPnNGrWpB6bSN5ry25xR5NaGBx6jSSyboktanldkhtibN7zPGLzt6WqcByafbNMYBOEOBw6jUa/ybA9Lw6YBnoBww24DIG4fKD0X2oHWaEANUaYyafIjDqNKrFszDJs2fLd6UO1yMbULlXQxTSSk4Oj2Qa+pXhJaDw6jSawDiAoYpmWeLNx3zO1K2OjNHvaCvFKSeg9apRb1gn87IPRWHUanXzHbx7jW7NkOV5tUYW5upNjllhIQwC4sutE5YHN5SLk1ewmFU6sV3Pstr5tQmZtex6VwlhOGw0y1vGYvDYzKeJhcqZ0R67diS+9110VBlBUot2yJIP/Oog3D8qcvRCYrDdTLdrKzrlTMiemFZ4BHNh5N6KPPScrbZbOsYp96DnSnQOrnXlupfWaVLLUzq5NeCEdHLM83+2dRcaHY9G7e/PCzs+jrdrk+O138csbw6qCv4FoxIvyfWDtwdIsRcVLApYbM1e50Mz1nxtE4zGEdjwvVQ7nosGBG9eE7zKI0vMnsJm63ZN8M/GLsDWiesDteri1sWjAVm9+ke2f5YU8O6HXQZm8/uf5uUJ2iOlbGWc8Bq5xG6BNiGEdGLNntMv9zhGCttna6ULQ4j5+CO3PSx5cWU06R08ugOu3pNKylsGBG94nDyCQKUNzq12UvZrJ38iDjSIyid4Di8IY5OXqyxYUT0omQ8pl/vT3UFm3I2W7N7dhmFahe/w9YptbJhVJody3N1Qylnm9Q5xRkumyd8Iq9TLg7PyVlL+2zFiOjVZZ2cR40BJRXUKpSxwbAs18yCQi+lExaHt/uL58lFayVlhIHo1WTWWZuR+FxZW4h4I2PDr7S69epEfiOnEx6HPWIiSis5IwZUrxU8UadbFZibcenc52NC20YIzojlbDDy4sswCicQrFMElJs0wTRrGhW0rnNa6RhhZPQagRx13u1oj3Nu2p3bpx1jmsFQIxo2GD06deTgFGn2gHTqDr3/rASMqGFxrbSMMDJ6uey8k8Fd/HQr/hyJHE5YK7fUaeO7/kngrF6r2T1sd+mzbrWhi9fATqeIa7WKIPTqAfelg7/09bte+GCEfftWOkVcq1UEqRccZ6SoTVfDGevXX5Cw0Sniaq0iSL1aRUHhDG9aNj3iDq9D2egUca1WESy9JO/FwOgufQ+0Je+R/QzKdYq4VqsItl5joQO7cvbGu+KWWXQJSnWKuHqli/Qav/rOSQ7TrXp2X53eEOp1Bzd6Rn27f89xT53eQPT6A6V7NsHejp70AAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-5px;" /> is usually thought of as a pair of maps <img width="88" alt="get : A \to B" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALEAAAAfCAQAAAACNuTQAAADhklEQVR4nO1Z7YGkIAylBVqwBVqgBVuwBVugBVugBVqwBVuwBS8E3QHk04Wb3bt5/NnVmRhD8vLCEPIbMRHxbhf+bQxkJ+rdThAJPoSWhO1n73buu5DkIOu7nSAc1gyeHOAPt9ZMNrimIBG6YeprHl7iwPUTYHy556yCqxuhvR6r95D3Mg5YMYt/Roh1Fu+B6ww9nPs8dOj8+gJXOHf+PiTSRAgHkkUXTP1ME72BmoMNA/aslFLskVylJ0d3wQKm+wkqiYE1DDg2tHtAatSDRatpwjtPbBZg61jC/MwLE+KWG6kgNeoRY2IThYzmGeEFZGIXGNxfYF2foKdgGc8S1isVaP35+n67nkqFNg/xDKGq9yfGxAuGPvH+DHv2gA9eMGizd1/BJ3SZUrizomvDKbs3NG7+TvXT9YGyFVZQdYif5F0MFLyu37IQE1MMvEptGIcvvpwXGDQ7myfv5RbnbikT1yvbwdmSvXlTFWCzTs3zU5i9ho4Rrch0I2bwkdX5X5t5PfquF4Szj6WaWG9dXda4jqsOumU9K7IUAitWOEti9SatrF6n5jilXBgwe9y93qz/+2li7nGe6vAkikEuz2QVZGKdpHtc7UxOQDVmx8zi5Y5mYJ9E+mhi/9VFl83UQd6LZ7LY/DalBqPtxqTSMkPPieUqCnVjnV6aWHy1UGW1Vb+efJiae7K2AtkZO53QiDbjISDod8vMJfgNtYdeb+8yc+lGx721FM13/rfyy6iBkqFGRDUxObcpAJPgNlUzx0zK6PXpHkwc6tC8ywi9REo/hDATGxwxSSoyTCwyTDt3YWK/0V1XWw8fho7K59L4SdoY9+0eQumYyYVQOoZbHYHEenzrEHNSc6aQYmKF1R70mt/0wu6YYcEQ069rtiZm2dmrrMhFNIyt5ztVlRRx0jSngNHN2iwGoaiRd+++T+Jatl2bYDOxzIj4sgGaJbi97XzHs/rERYyJRTrAhkVMdjE8e/LNcI9/3J+Q1FdAlmxPPm6t1QfFo5lYMXK81+6nm6Vqu0KdYIBobOhTpj455JYumeU8zvAJfcTBl+MBkX8Sx3CcnOB6XvSIDJMqS6X62SI9Fdvi55vSgWNMqul8at0eG84hoyBD+WOONH8jnhytfhuuJv6gA+bGHfsDJPxX66JdfyD6LzF55xNLlRD/oADc6txasCVOPD94Co7Hkwr18Cd/m+IPFhUDGjL6Ru0AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" /> and <img width="130" alt="put : A \times B&39; \to A&39;" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAAAiCAQAAAATg28eAAAEuUlEQVR4nO1bfZ2EIBC1AhWoYAUqbAUrWIEKVqCCFbaCFaywBwMqIKOA4q6/8/nPrV8Mwxt4M3hV9aAEWEW/bUIU7mLnTdFUn2r8thERuIudt0UnHTx824gI3MXOHTQV/7YJCEbp4PbbRjgI++r37MwAld3oL2xPyNZCh5Aurp07GUy45ELb9hD21e/ZmQUhu/G+sD0mj1a2+ZEtM+to5eT6kW5eRBeXv39rrgr76hI7G8c154PBkHwKtoC3Wq/O97DWTrGliPFLWhzz1SV2qkZYwfe/geVXE6FFVHYNtujVlsKc8UsI++oSO2nhQeJwhKOzJATqvA8sDwpt4RBIBearS+xsZreUAIX1Tq/X17ocU9nEaAcF8VMJGe6rS+zsisoQAV3SK99r9+4tqpCkGaVG56AGrjSVpkST8M49HH0b5quz7UQwFJy0mYk83bl9uo2SlmEQGS0pdTVMIej+alVen1yp61HrY4D7atNOpfRbo32J/EtlyLaqpPJ3t4rBeh5yYhKql5mI1IHTQd2dk8O+jU0kkgg1QgVNgxS6YgqhA4KUIX57KNNP9RWAw+r3BmYzSQk9pYzzBFJLJ1CYHm0qUKtISU2JZQDH6L/xutU7qw7Are6ozsXES4gK6TQIKwQC9OiLlWWIbDV3kc3xlWywNw+rB5ZHuMk1ieks8WRgE4iSOIWQUwegDnXGaEnqUyGHBsykiEsp6SV7OZpVuBxUGznZfqavWhP5wnuAGSZN11/e9S4QJXE1BC7vS+W66/Q+ITexqZBDAx0So0nGpkNYi2k5qFk6vY1MXwnT1OBN/cy8YGKXH+1rWViuhsC8uadPammiQh4NdGtrhaDeOkbkLkdAgApps0K2r/TgrgexMWe4MWl0ypI0oKPL1RB8Z/BEymkq5NGgsmqHLpoLCluavCn7hAd9tR5E7kg6/3q+QkgHnwVob4nStGo5tldw7MloIWZAIZxyjiHS9sO+Wg/i2xlq4ZUhQgphjFIIqVDSh3lHV6XVFnVc4XWFLXC0hlCZIUqB35P9Q2u3uCXoBF/5Mo84E6L+Rbz7XY7WhRRCSJuzpM5N2gCrK2wjrBA0PlmJcApCAYfjsK8whTAN/cvrcEghtEUUgi99prPxZRJbIuZQAVMIlSmfldzX50mq5rivAgpBOKuf/yHDohDq+bxw7jlrmxPTzLGd8zOFVCpsKYQewqHcvj6r0nYFjvqqWisEHfHLUuATYbm/nScde3Gpd5wdO6lztANxMi2UMKZRAVcIel+v5PZNnxROR30FGLxbey8KWocI1JKFyzxiLy5iswwSW2KuNzRHTL0MqxukUAFTCLw4DVhSXnTUVwCtEJYPzDr5KPPuWD6BVCVnbojALHr0synr7SkXn5X0XIPApgs2KTO4Nuy8A68bxFIhtL5SOfwDtF62wNxFK64zfAXQCkFtojSwDykCTHyB6xgUVynEWg/3Lq+voQzbyOt7qc7+p5O9lUH78Si8DBvX1N2G0NpbvF6bOf0e1c9AbBnpHF8BlhSFbf4jlLu5zFYRQQLnHuQib6v+EEp+TPLgNgjVBB78Q4R2DR78Q5T93PTBLTB99/4Gvf/g30INv/ofPkWI8gnRg5/EH0KJ4bItcVzZAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-4px;" />. This is the classic presentation of a lens. Instead, here we’ll use the <em>coend</em> representation of which is more symmetric. It’s defined in terms of two maps of type <img width="109" alt="f : A \to A \times B" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANoAAAAfCAQAAAArMRtXAAADaUlEQVR4nO1ai5GDIBClBVqwBVughbSQFmyBFmzBFmjBFmzBFjxY4p0hfHb5aG7Gx9wkk1N44cHuWwxjKQg2sD55VRmeTDYeIQ/fyiuKns2attB/Y8NROrYy1bD/XJzNa9Kj+dqk5x+9bbiWzJDuNfmt4W6bdO9zs97zcTYvAVFt022C93sb2KI/U3oRIWA6GPSr1K+rlrAV1Q3at+EaXnbUzw2i9KcLRoNZXyiY2WmE7UnGDCv6+0S7htcAG+QTPXAZUrfzUyhLaP7VdSWu4jVBcPRhgxCZgDghoncwgo3jovFYFFzHaw3sJ/7KdQmYddbSMxpMMCU2jj8q9rtps14CKq+YsJywV/vg3n7Cf5LfasLE0CKI18qxk1OzIlJFy43Oaw2OZxy4L0f5EcpoDPxjNO5Zo7mAaOZdeqVwfRXdXc4vE8urizYUuV06rz4gm5UMv9NCGW0EMaP92CLPJj7T0vttzsh/8jAdW+VQzPVXzF0Eebx8slEl82c0DlIqzCIUUBdgQa9oujeRV4wzIkHqPlHFqIN8Xq5sdMnEy9b/ldUP+B4T1gwNGK/yC6kFpq3sdyKqumhm988ZIbKE11E2umT7IYZ8axNEOuT3GCtnmXcIZ0GoBjUhB9lou62U1y5bjmR2tM+NYvpccd56rmzC3d7fJ1M2KeTt1FEccDkvK1uOZCx45vHEFvnmspycgIGE0/NjWxDjdZBhctqCnMA8Xi5Cp4cl96EMUR+sF8phUr1w2og6e3DvSjfru3ARI5/XEXZ3h+u2MGRkzjeMLXw2MAY7fF5INDkwGknHAzV47bksVLfF4M9oFhumpJLNbIib6vdPa5fXNtjhg1QNXkf7QZctfIr/wLFQzWxIyM/VFk0Qzx/LebmOkSZbLKMpCJzJzEpPpbgQIoMTUPtMRBGqzBq8fCafIls4o9lnDckF2JFtCO4Yq4/Y57pnIoLk+cp5heoyvGyhjCZxktkYSptAa61jdTuHQ9zQ/hXwP9TjdBRGNP86vMJ1GU42X+7stFQLjI6KYnQbkrpDHaomdz1NTlVV43EQtqSuxWuMJJM+KtojWl+OeGehGtjvc5HzoOifo11hfaM69gqj/c8MblQBBwdo4vaQdXJ24wL8/Yil7PcVN05E93pm88x6dHjjIvRQ3chbsu/HD9mmL6kmNDhWAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-4px;" /> and <img width="113" alt="b : A \times B&39; \to A&39;" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOMAAAAcCAQAAAA5Q8ALAAADpklEQVR4nO1ajY20IBClBVqwBVughW3BFmyBFmzBFmjBFrYFW9gPBvlOkcEZVNxL7pFLLlmXGd4D5scV4g8pKNE87QIBv8PLx9CJj5ifduIQv8PLBzFYgt5PO3GIr/CyE/ppF1DMlqD+aSc2SLGV9FIKY4f7yFRwq7GWatgJGGF1+zFaetroWQWXlazo3RFSbKFeKvGyh/RT5ZSM1s5UwU6AsqO3Nj/WslqNHlZsNqmCrsQBHSm2sl66RambnfI7yY268FbjsyesiC7G/Oxrx8E3ZYBptjJeNpXInWB/1ZaxRzK7FnwJUaaBE/tNSLGV9bKrEhk1jPTJuBMjuvTPat19lfuIjjRbWS+HClGhgVvex6m6dGH5p1xipsf4fBK/AsZW1ssakXEEC/6+fxGez/kjGee5Rc9/B590y4zhv2twdrY0W1kva0RGtex67xjl5M/2jkhD2p1K72JgkdFv3pAHthf3RQzqPQUYW1kvQ2RU9gvD4S6S9jl+bTUt2ZUky9giQnoR6acRi4wDyHtXlO5PVaB8tkSIjIP9k3YMdpKcA1NB5adXrjjHaDs1JSRXxHRklCCuubHUl9ZuabZRxhZcLu//1MiDL/Irv2YjO6dfFAvJF1EtRcVP4f+yJM1L7LkTzkpJFVrIVrNLOky2DNZWct4+21JmWMXNWki+iL7nMS/JexiuQddXaLpNB/daGoVsdbtL0lyat6ooMhnmaQ5Clojore0jo5tzJuXLZyBBSN6JLGZrXzNe21+NF6LZl7IXskREsenTrNFVaUP4rcd5Z1LMVlwzSnJlR4GGHv16vGF+7h4tIz33PUbysKCBSFUy3kTfi9na14yllKVnnzbvFdwY2H0cv6fxOhKHRmtGsdDLQ7yW4+EzYtqhOMHWvpuaWzoXqXxQMWUMMRGrI3NIR0aPT0HhxMWAXOlpnGBr//bqusgYh+u1Y1QL68SGLyQWGYU9HxwvyqBZ0fwUWzpaaAtn8Zq3bliWRicwzk55QubCg7lwnbh1Tl/1FFtdlM5Q3nXQLkSNzkNNLlIlBkdIPDz4NwdXtsL3MKy3lyfZajayqUwsCaA149pMmkzrTGB1Il1ILDLqCiIqVjZ+ni2oyMJkrkl11HfwKXTuKQmNYew6U/DZ+9AOXifShExFlcaK51uPd7fiBnKn6hq24JdxI3QaJ1JWdfTDI7Oql+KzMEb1VM7ekEkP2qyMr2wFN9zevXGgFv1XsQVooEb5w3UoeZlXgH+vTl4lHvXltAAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" />, meaning <em>forward</em> and <em>backward</em>, respectively. For any lens defined in terms of <img width="24" alt="get" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAcCAQAAACNZfRBAAABnUlEQVR4nLVVYbmFIAylAhWsQAUqWMEKVKACFahgBStQwQq+DZS3De/F+6mHPw7wMHa2odTTmNSshsdZCZLalH2PfgD67T16DNAGIXoRAQ7wbx6ACpj+thG8iHDdTzCwHmAcOzTIimPMCpTvj8cYtQA5JpoDCvzFifUZdoyZ1sGXVijtnAf6v+7f7oxcwckr0B7w+Rd6ExQxEDuw1a4CBugXZuOV/8umzRHPPO3WwAIbRmJbsFO1Bjh+E1WaiN2tgYnRIRzMxGoF4T9GXobvaw2kJoKRSKyzfzPsKGOGVR6OjgLlgiObW0lW2329JOFZO1u/KzBlAk1mTE66A55ZLUxPAd9RwHci7HoKtARUgT5BZArEdoNtcoQqUELQHqDrHK0Bw4qxIpEi07kmVrGexB+YqIcLVIHItKwYqw/YbwJTAGFFX+KP41wPCCIXGcWS8zuAB1HJNocuJIizzW1QdltsMx7m4md6Dq4AdQLHWQhK074I08n623CiLd9GYILpq0/fVUyiDwXxzNyGJSmJKbpezYRfjvD7Wxqe9f0PB8PA+wtuX+gAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" /> and <img width="25" alt="put" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAcCAQAAABmUk9CAAABs0lEQVR4nL1WYbmFIAxdBSpYgQpUsIIVqEAFK1DBClawghV42+TKmOL97nuXN36IbO6MnTEE6CMTLDB08i1kgwSuN8iAIKk3CKUsYdK6y4wwoT8MMWNbSqoOD4bnBmcRI5LVMuD7DKP6yp4ODZJOY2RmjvkFLKBjgBUHoHrhOnGwI/jLXUQgiw4kEJG9nfOFB+1lz3Nfg5hMWUCTGUcBT7wj0ht+1uQS2VEF/MCMz1FH5cYxbNGPSk8uVcRPZyZmTjaVFJfdro1Ir2Q/npnQMJnyyqE3mPMkymJgFuDyxZszczUhbtam/kNm2iZr5YiYm5S9ZmZ/3800eYZT5qs3o+xrZuz7btZi5uV4rBJ4z4z/DTMxl/MhQaW0MGPP9VjZaN5YNDNHtCVJGqbY+zPVMu1WhChkq2IH3FmdeV/BDILskgOZ9ljxKGJP4mqd0Y1TFvvpkJpPyDBOgC8nzLXJshzMGIxh4l4db+7yEYFmdktagwWxsG2J2qJFwLV4DyLPADXw9u9C3d7d5YyYmzUhj1fRt+TuDHSQu+7UQf7hJyFwaVIjCVVj/DrMhLXhGa5Rhn+VH0wy1yk7ooyzAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-4px;" /> maps, we can recast it to the coend form: define <img width="12" alt="f" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAfCAQAAABXe8XLAAAA0klEQVR4nL1UURXEIAyrBSzMAhawMAuzgAUszAIWagELszALu7THvfskvY8L7419JLQJ60RWKFIlL1kTWYY0SJqcDD2Bri675WGqVNAq9ob9hnyJAWLxCo05P4H+rGlfFNBHRGCdU9l80KdlqhlblwvsbWm4I311y+qLqmOWL66hN+zSekRwQtAiArvlPSIwyxtPz/65BXB4pAG0qGX9xTI9x4J0gpb3v1guEQHtIM8nNZrJPzcblcpFWjx7uyzlRn9D30Y/UIn4xxkyTlbEuaC/ACuBUCgMW1pdAAAAAElFTkSuQmCC" class="inline-math" style="margin:0; vertical-align:-4px;" /> as the composite <img width="193" alt="A \xrightarrow{\Delta_A} A \times A \xrightarrow{A \times get} A \times B" height="18" src="data:image/png;base64,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" class="display-math" style="margin:0; vertical-align:-1px;" /> , while <img width="54" alt="b = put" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAAAeCAQAAACMR1iyAAACZklEQVR4nN1YDdWFIAylAhWoQAUqWMEKVqCCFahgBStYwQp+Y6LA+Hn6jvod3+U8jwqyXbax8RjbwNkAbWYLXH8OijVsAmr6vxW5B5aa+m8lvkQL/iZKnQKILU9qcymqZmlfHGkfzNK/ONI+mOXNkVY1y/sjTZY6N5MqYN/D0xOwu1oHOdWCw50B2eEuJ1CXhnwldxIctFWYthb0ONsyBFeT9vDj0Ho2OpH3QQMZBnJGZhd0wGBQUDZsyyqBqoDrEpGz3jXt9wM2a7PZ3XepoAk/8euxAL07wV3Ya5TkZdln4fq50yTcIKx3GTLXgUgLV2dwIlJIHHusZdbQoXPWMUR15RZ1629If5+Z9WNOG6M3Q2W4OtzKTm1c30SWVDkqmzbUIumGcTqn3V1P6oJarXuz9nMs2b33CIwqlnxxIqfxxEHvQaqWjvyH9n8ZaSEUvilmisuQqjVGyttIbMl4GmnzuepRZwx/B/Le0kVPnIyPF1zWI02firQtmxxpdZcuRdpGpiGbWy7SunqkaWJmiVMUTz8wVh9s5Tk2IrFaJsqndMl9pMn9vYnG0DjET8L1feoMQOWsVvEOSKn58d3uxqFLy7TMENEUKrML3YOJ1DwDiaQu0ksEG4a3dejSJpdH+92nJUyQHXI51kjzx/4eJCsyYt5J2MJLO2oqIDzs1NJCev/QQJcGiuXi6FqskcZBbotnAJOJzAbI9UjF9nLQbsCxfumtKTS8M7UtS2Bp9Bx8jrJyyxtOfFRJdeQP630A1ePjm5HLUT+CXDX4I3jz/2cVaNzGbRGlH/oX5jFYQsqVazcdnP4AkihhFGYG3A8AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" />. This is the representation of lens as an optic, and it makes explicit the fact that the forward part of the lens saves an <em>internal state of type <img width="14" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAYCAQAAACsVz43AAAAyElEQVR4nJ2UYRWDMAyEYwELtYCFWJiFWcBCLGChFmqhFrBQC1sSKK90g6a9/CP5HvR6AcCmN5BxspKDBGEM9fCBOAIig1IDivrWAZS0BJ37QKdnXBTFPtQrsJ/21QMio3CiXTcb+YNFUy9KxbCgqxV0lxAkRs158hdHgx3NBpWoMRTZoCyyoqSbUtamqGuBYhBWtdry5P+MoAWtDSrRRihqg7KaKN22G3maHy7gIU8Tb2W6XWjU3sZTPwrH/0eqtskXPallf/wFfgxlrCF298UAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" /></em>. In the image below, the forward map <img width="12" alt="f" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAfCAQAAABXe8XLAAAA0klEQVR4nL1UURXEIAyrBSzMAhawMAuzgAUszAIWagELszALu7THvfskvY8L7419JLQJ60RWKFIlL1kTWYY0SJqcDD2Bri675WGqVNAq9ob9hnyJAWLxCo05P4H+rGlfFNBHRGCdU9l80KdlqhlblwvsbWm4I311y+qLqmOWL66hN+zSekRwQtAiArvlPSIwyxtPz/65BXB4pAG0qGX9xTI9x4J0gpb3v1guEQHtIM8nNZrJPzcblcpFWjx7uyzlRn9D30Y/UIn4xxkyTlbEuaC/ACuBUCgMW1pdAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-4px;" /> is the gray box and the internal state is drawn as the vertical wire (this is also called the “residual”). The dot is the copy map <img width="24" alt="\Delta_A" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAdCAQAAACp+0zaAAABKElEQVR4nLWV0RWDIAxFswIrdAVXcAVXcAVWYAVXcAVWYAVX6Ao2AYtFIaglL6cftZHHJQkF4KTAwovN+FsGVpgkDRS80WKV5DDgvIUYh4LFfwQ5DAbAKMcRGEhiHIGBJMSxM5BEOHYGkgBHykBqzpEykBpznBlITTnODKQ7HDN03M95BtJVDo1ZPZeQZ/i+Wud4+auztAaEuzXPcPXenTBYC8Pu0lQ5BszpMceWEmif3B5rHAoLDd7ClXdZO+nAUToGs3US5RT3WOuXwJGvVx+tKSdbUY0n2FdjLnLMcVlbatvQ99fizGGw1LvZ+vMtarxhQKGTt2kabIyFb9tnmpMq6vZ/YcOBiZ2MJ1Kn5Tq0WFoaOKzj8VlxMu7LbnOik2ehN52fddQHoNu7eHypLU8AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-3px;" />.</p>
<center>
<img src="../images/lens.png" alt="Lens as an optic" width="600" />
</center>
<p>We can imagine a particle flowing in this lens, as an input of type <img width="14" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAYCAQAAACsVz43AAAAyElEQVR4nJ2UYRWDMAyEYwELtYCFWJiFWcBCLGChFmqhFrBQC1sSKK90g6a9/CP5HvR6AcCmN5BxspKDBGEM9fCBOAIig1IDivrWAZS0BJ37QKdnXBTFPtQrsJ/21QMio3CiXTcb+YNFUy9KxbCgqxV0lxAkRs158hdHgx3NBpWoMRTZoCyyoqSbUtamqGuBYhBWtdry5P+MoAWtDSrRRihqg7KaKN22G3maHy7gIU8Tb2W6XWjU3sZTPwrH/0eqtskXPallf/wFfgxlrCF298UAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />. A lens takes in this input and does two things in parallel in the forward pass: it copies it down on the vertical wire (residual/internal state) <em>and</em> it also uses the map <img width="24" alt="get" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAcCAQAAACNZfRBAAABnUlEQVR4nLVVYbmFIAylAhWsQAUqWMEKVKACFahgBStQwQq+DZS3De/F+6mHPw7wMHa2odTTmNSshsdZCZLalH2PfgD67T16DNAGIXoRAQ7wbx6ACpj+thG8iHDdTzCwHmAcOzTIimPMCpTvj8cYtQA5JpoDCvzFifUZdoyZ1sGXVijtnAf6v+7f7oxcwckr0B7w+Rd6ExQxEDuw1a4CBugXZuOV/8umzRHPPO3WwAIbRmJbsFO1Bjh+E1WaiN2tgYnRIRzMxGoF4T9GXobvaw2kJoKRSKyzfzPsKGOGVR6OjgLlgiObW0lW2329JOFZO1u/KzBlAk1mTE66A55ZLUxPAd9RwHci7HoKtARUgT5BZArEdoNtcoQqUELQHqDrHK0Bw4qxIpEi07kmVrGexB+YqIcLVIHItKwYqw/YbwJTAGFFX+KP41wPCCIXGcWS8zuAB1HJNocuJIizzW1QdltsMx7m4md6Dq4AdQLHWQhK074I08n623CiLd9GYILpq0/fVUyiDwXxzNyGJSmJKbpezYRfjvD7Wxqe9f0PB8PA+wtuX+gAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" /> to turn it into an output <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAA5ElEQVR4nIVUfxWGIAxcBSpYgQpWsIIVqEAFK1CBCl8FKlBBx6mfz+d+3P7xgTd22wHRF4WqGIUyReH/F2aORDtHwfcdiRqvVZr8BIP8PafyaqNgk8fJXViPSJpsckHREnaUbqIr+cPVCwNRUUy0Yme1yJpiQr9/FlVXvCGpM2tJcUDK6o1pvsbx2GNhb3VYxkVGcfkVw7LJO3WgioojJ+xcgwPNQ6s6wD80V99pN4uc1Rmf5GaRZcUP2bSIfmsW7GWdaimuEGQ8Bbri5F8JTXH2qbOgamJKQ5dVc57NkKPxbEVnHZjvjdkiXaYHAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" />. Then, this output <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAA5ElEQVR4nIVUfxWGIAxcBSpYgQpWsIIVqEAFK1CBCl8FKlBBx6mfz+d+3P7xgTd22wHRF4WqGIUyReH/F2aORDtHwfcdiRqvVZr8BIP8PafyaqNgk8fJXViPSJpsckHREnaUbqIr+cPVCwNRUUy0Yme1yJpiQr9/FlVXvCGpM2tJcUDK6o1pvsbx2GNhb3VYxkVGcfkVw7LJO3WgioojJ+xcgwPNQ6s6wD80V99pN4uc1Rmf5GaRZcUP2bSIfmsW7GWdaimuEGQ8Bbri5F8JTXH2qbOgamJKQ5dVc57NkKPxbEVnHZjvjdkiXaYHAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> is turned into a “response” <img width="18" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAbCAQAAABR545VAAABH0lEQVR4nK1VARGFIAxdBStYgQqr8CtYgQpUsIIVqGAFK1CBP4Z8vyeTcfp2552Kb9vbAwGeAmF8zMGYIEJ4h2omqu0dqkBUVn69gK/GAg7MaSVye4NMhRSWFkX6GP/CUiuRKA+ZHd27VuHIVOby3LM2pY5E3ZyfFSZjOEVWZ+S6m1jEZZGbLOmwTSVNZtg1zOkUNjCCUtmSka6ZdGpTSUplodc9ncrlklIzp6hVK6Km1MAJ/J0hr8B94Ic5P2TEwIbthOM23CnSZrJ9FSX4qlJJ5kD1dSEKnppEiwiQdl9JMuup3M25GPsOurpSB9Wqp5KUApI8as6ngjulPLeu/r/IStnfRlZCUsr1EmFFjZEINp6ccttkSeuxkZcULv8CXdmjXS1t3BMAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" /> by the environment (not drawn), and on the backward pass via the <img width="25" alt="put" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAcCAQAAABmUk9CAAABs0lEQVR4nL1WYbmFIAxdBSpYgQpUsIIVqEAFK1DBClawghV42+TKmOL97nuXN36IbO6MnTEE6CMTLDB08i1kgwSuN8iAIKk3CKUsYdK6y4wwoT8MMWNbSqoOD4bnBmcRI5LVMuD7DKP6yp4ODZJOY2RmjvkFLKBjgBUHoHrhOnGwI/jLXUQgiw4kEJG9nfOFB+1lz3Nfg5hMWUCTGUcBT7wj0ht+1uQS2VEF/MCMz1FH5cYxbNGPSk8uVcRPZyZmTjaVFJfdro1Ir2Q/npnQMJnyyqE3mPMkymJgFuDyxZszczUhbtam/kNm2iZr5YiYm5S9ZmZ/3800eYZT5qs3o+xrZuz7btZi5uV4rBJ4z4z/DTMxl/MhQaW0MGPP9VjZaN5YNDNHtCVJGqbY+zPVMu1WhChkq2IH3FmdeV/BDILskgOZ9ljxKGJP4mqd0Y1TFvvpkJpPyDBOgC8nzLXJshzMGIxh4l4db+7yEYFmdktagwWxsG2J2qJFwLV4DyLPADXw9u9C3d7d5YyYmzUhj1fRt+TuDHSQu+7UQf7hJyFwaVIjCVVj/DrMhLXhGa5Rhn+VH0wy1yk7ooyzAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-4px;" /> map it’s turned back into <img width="17" alt="A&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAbCAQAAABc+f4SAAABAklEQVR4nKWVYQGEIAyFqUAFKlhhFa7CVbACFaywClSgAhWs4I3pnTA5Zfr4xXQfuj2nMU8Exj3KZ73NYubnmIkwSXuyP8RmwowaiKOUIGLAr2Q1GKSUKGKeYscnPFE+N69aiSKqPkV+mhrjaI8aiOeVMUMRHWkP/RDHNRkZU6ahrtXIyWt1Xr+opd27HwLb+6+YvS+Dzr1x64UVGJV8kZgx0x2IqwyXjS993CWsOhPuYUCYKzR83KEojO7vYDx/0eVKjFF9Q7m4INZ08PGlsHE7aDGyuCVGYUBZ3K9UGP/3VoWPh5OmdvrY0lSZxXDaBXwtXY3wsM3bpTEcsbi2tH8qH3zZezCJI3CKAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" />. In other words, in this lens we can trace out “two paths” the data flows through starting from <img width="14" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAYCAQAAACsVz43AAAAyElEQVR4nJ2UYRWDMAyEYwELtYCFWJiFWcBCLGChFmqhFrBQC1sSKK90g6a9/CP5HvR6AcCmN5BxspKDBGEM9fCBOAIig1IDivrWAZS0BJ37QKdnXBTFPtQrsJ/21QMio3CiXTcb+YNFUy9KxbCgqxV0lxAkRs158hdHgx3NBpWoMRTZoCyyoqSbUtamqGuBYhBWtdry5P+MoAWtDSrRRihqg7KaKN22G3maHy7gIU8Tb2W6XWjU3sZTPwrH/0eqtskXPallf/wFfgxlrCF298UAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" /> and ending at <img width="17" alt="A&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAbCAQAAABc+f4SAAABAklEQVR4nKWVYQGEIAyFqUAFKlhhFa7CVbACFaywClSgAhWs4I3pnTA5Zfr4xXQfuj2nMU8Exj3KZ73NYubnmIkwSXuyP8RmwowaiKOUIGLAr2Q1GKSUKGKeYscnPFE+N69aiSKqPkV+mhrjaI8aiOeVMUMRHWkP/RDHNRkZU6ahrtXIyWt1Xr+opd27HwLb+6+YvS+Dzr1x64UVGJV8kZgx0x2IqwyXjS993CWsOhPuYUCYKzR83KEojO7vYDx/0eVKjFF9Q7m4INZ08PGlsHE7aDGyuCVGYUBZ3K9UGP/3VoWPh5OmdvrY0lSZxXDaBXwtXY3wsM3bpTEcsbi2tH8qH3zZezCJI3CKAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" />: it goes through the residual (which is in this case also of type <img width="14" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAYCAQAAACsVz43AAAAyElEQVR4nJ2UYRWDMAyEYwELtYCFWJiFWcBCLGChFmqhFrBQC1sSKK90g6a9/CP5HvR6AcCmN5BxspKDBGEM9fCBOAIig1IDivrWAZS0BJ37QKdnXBTFPtQrsJ/21QMio3CiXTcb+YNFUy9KxbCgqxV0lxAkRs158hdHgx3NBpWoMRTZoCyyoqSbUtamqGuBYhBWtdry5P+MoAWtDSrRRihqg7KaKN22G3maHy7gIU8Tb2W6XWjU3sZTPwrH/0eqtskXPallf/wFfgxlrCF298UAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />) <em>and</em> it goes through both <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAA5ElEQVR4nIVUfxWGIAxcBSpYgQpWsIIVqEAFK1CBCl8FKlBBx6mfz+d+3P7xgTd22wHRF4WqGIUyReH/F2aORDtHwfcdiRqvVZr8BIP8PafyaqNgk8fJXViPSJpsckHREnaUbqIr+cPVCwNRUUy0Yme1yJpiQr9/FlVXvCGpM2tJcUDK6o1pvsbx2GNhb3VYxkVGcfkVw7LJO3WgioojJ+xcgwPNQ6s6wD80V99pN4uc1Rmf5GaRZcUP2bSIfmsW7GWdaimuEGQ8Bbri5F8JTXH2qbOgamJKQ5dVc57NkKPxbEVnHZjvjdkiXaYHAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> and <img width="18" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAbCAQAAABR545VAAABH0lEQVR4nK1VARGFIAxdBStYgQqr8CtYgQpUsIIVqGAFK1CBP4Z8vyeTcfp2552Kb9vbAwGeAmF8zMGYIEJ4h2omqu0dqkBUVn69gK/GAg7MaSVye4NMhRSWFkX6GP/CUiuRKA+ZHd27VuHIVOby3LM2pY5E3ZyfFSZjOEVWZ+S6m1jEZZGbLOmwTSVNZtg1zOkUNjCCUtmSka6ZdGpTSUplodc9ncrlklIzp6hVK6Km1MAJ/J0hr8B94Ic5P2TEwIbthOM23CnSZrJ9FSX4qlJJ5kD1dSEKnppEiwiQdl9JMuup3M25GPsOurpSB9Wqp5KUApI8as6ngjulPLeu/r/IStnfRlZCUsr1EmFFjZEINp6ccttkSeuxkZcULv8CXdmjXS1t3BMAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />.</p>
<center>
<img src="../images/lens_traces.gif" alt="Lens two traces" width="600" />
</center>
<p>We can think of this as a “conjunctive” data flow: both paths are traversed. The lens computes some internal state <em>and</em> interacts with the environment. This is useful for <a href="https://arxiv.org/abs/2103.01931">machine learning</a> (where we want to remember which point we’re differentiating <em>with respect to</em> on the backward pass) and in <a href="https://arxiv.org/abs/1603.04641">game theory</a> (where we want to remember the state for which we’re going to receive a payoff for).</p>
<p>A prism, on the other hand, is characterized by a <em>disjunctive</em> data flow. Starting from <img width="14" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAYCAQAAACsVz43AAAAyElEQVR4nJ2UYRWDMAyEYwELtYCFWJiFWcBCLGChFmqhFrBQC1sSKK90g6a9/CP5HvR6AcCmN5BxspKDBGEM9fCBOAIig1IDivrWAZS0BJ37QKdnXBTFPtQrsJ/21QMio3CiXTcb+YNFUy9KxbCgqxV0lxAkRs158hdHgx3NBpWoMRTZoCyyoqSbUtamqGuBYhBWtdry5P+MoAWtDSrRRihqg7KaKN22G3maHy7gIU8Tb2W6XWjU3sZTPwrH/0eqtskXPallf/wFfgxlrCF298UAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />, a prism <em>routes</em> the data to go one of two ways: either inside through the residual <em>or</em> outside into the environment through <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAA5ElEQVR4nIVUfxWGIAxcBSpYgQpWsIIVqEAFK1CBCl8FKlBBx6mfz+d+3P7xgTd22wHRF4WqGIUyReH/F2aORDtHwfcdiRqvVZr8BIP8PafyaqNgk8fJXViPSJpsckHREnaUbqIr+cPVCwNRUUy0Yme1yJpiQr9/FlVXvCGpM2tJcUDK6o1pvsbx2GNhb3VYxkVGcfkVw7LJO3WgioojJ+xcgwPNQ6s6wD80V99pN4uc1Rmf5GaRZcUP2bSIfmsW7GWdaimuEGQ8Bbri5F8JTXH2qbOgamJKQ5dVc57NkKPxbEVnHZjvjdkiXaYHAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> and <img width="18" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAbCAQAAABR545VAAABH0lEQVR4nK1VARGFIAxdBStYgQqr8CtYgQpUsIIVqGAFK1CBP4Z8vyeTcfp2552Kb9vbAwGeAmF8zMGYIEJ4h2omqu0dqkBUVn69gK/GAg7MaSVye4NMhRSWFkX6GP/CUiuRKA+ZHd27VuHIVOby3LM2pY5E3ZyfFSZjOEVWZ+S6m1jEZZGbLOmwTSVNZtg1zOkUNjCCUtmSka6ZdGpTSUplodc9ncrlklIzp6hVK6Km1MAJ/J0hr8B94Ic5P2TEwIbthOM23CnSZrJ9FSX4qlJJ5kD1dSEKnppEiwiQdl9JMuup3M25GPsOurpSB9Wqp5KUApI8as6ngjulPLeu/r/IStnfRlZCUsr1EmFFjZEINp6ccttkSeuxkZcULv8CXdmjXS1t3BMAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />. We see this animated below.</p>
<center>
<p float="left">
<img src="../images/prism_default_resized.gif" alt="Prism trace" width="400" /> <img src="../images/prism_env_resized.gif" alt="Prism trace" width="400" />
</p>
</center>
<p>More precisely, a prism is <img width="125" alt="(A, A&39;) \to (B, B&39;)" height="18" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPsAAAAkCAQAAADlE4TXAAAEkklEQVR4nN1ci5WjMAykBVqgBVpwC7RAC7TgFmiBFmiBFmghLeRsk9wRkKyPxYa94e17u4GM7ZEtyQK2qn4DXNV8uwu/Cv+FXn31rB7f7sQvQoFebTXa9qUAYxjG+vq9rqbwcx/cSac31Hp11cK+uK+8vGcitkcYxvD3r1bQt6sh0ennoNSrDXOFGxua0Mis6RubzSWXte/4EAZyB+A6TWEU0DGFSd2q2uIzKvWqw2B6QXeehkaA2Hz47OgBZlMPo0NOJxeOIfT7GUbkdscQvvMMvZcnXHxGpV5esHpd6siTfb2GLQ7rKFMTPnNGrWpB6bSN5ry25xR5NaGBx6jSSyboktanldkhtibN7zPGLzt6WqcByafbNMYBOEOBw6jUa/ybA9Lw6YBnoBww24DIG4fKD0X2oHWaEANUaYyafIjDqNKrFszDJs2fLd6UO1yMbULlXQxTSSk4Oj2Qa+pXhJaDw6jSawDiAoYpmWeLNx3zO1K2OjNHvaCvFKSeg9apRb1gn87IPRWHUanXzHbx7jW7NkOV5tUYW5upNjllhIQwC4sutE5YHN5SLk1ewmFU6sV3Pstr5tQmZtex6VwlhOGw0y1vGYvDYzKeJhcqZ0R67diS+9110VBlBUot2yJIP/Oog3D8qcvRCYrDdTLdrKzrlTMiemFZ4BHNh5N6KPPScrbZbOsYp96DnSnQOrnXlupfWaVLLUzq5NeCEdHLM83+2dRcaHY9G7e/PCzs+jrdrk+O138csbw6qCv4FoxIvyfWDtwdIsRcVLApYbM1e50Mz1nxtE4zGEdjwvVQ7nosGBG9eE7zKI0vMnsJm63ZN8M/GLsDWiesDteri1sWjAVm9+ke2f5YU8O6HXQZm8/uf5uUJ2iOlbGWc8Bq5xG6BNiGEdGLNntMv9zhGCttna6ULQ4j5+CO3PSx5cWU06R08ugOu3pNKylsGBG94nDyCQKUNzq12UvZrJ38iDjSIyid4Di8IY5OXqyxYUT0omQ8pl/vT3UFm3I2W7N7dhmFahe/w9YptbJhVJody3N1Qylnm9Q5xRkumyd8Iq9TLg7PyVlL+2zFiOjVZZ2cR40BJRXUKpSxwbAs18yCQi+lExaHt/uL58lFayVlhIHo1WTWWZuR+FxZW4h4I2PDr7S69epEfiOnEx6HPWIiSis5IwZUrxU8UadbFZibcenc52NC20YIzojlbDDy4sswCicQrFMElJs0wTRrGhW0rnNa6RhhZPQagRx13u1oj3Nu2p3bpx1jmsFQIxo2GD06deTgFGn2gHTqDr3/rASMqGFxrbSMMDJ6uey8k8Fd/HQr/hyJHE5YK7fUaeO7/kngrF6r2T1sd+mzbrWhi9fATqeIa7WKIPTqAfelg7/09bte+GCEfftWOkVcq1UEqRccZ6SoTVfDGevXX5Cw0Sniaq0iSL1aRUHhDG9aNj3iDq9D2egUca1WESy9JO/FwOgufQ+0Je+R/QzKdYq4VqsItl5joQO7cvbGu+KWWXQJSnWKuHqli/Qav/rOSQ7TrXp2X53eEOp1Bzd6Rn27f89xT53eQPT6A6V7NsHejp70AAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-5px;" /> is a pair of two maps <img width="148" alt="match : A \to A&39; + B" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASgAAAAeCAQAAAA1WkuWAAAFWUlEQVR4nO1bi5WsIAy1BVqwBVugBVuwBVugBVugBVqYFmzBFlyIPyBBkUFmd89cz9uzjxkhwCXcBLaqvvjb4FX9aRO++D/oqrmaPm3EF/8HgybU+GkjvjhHV4lPm0CCsmvShOo/YMufRFsp/cyFh6zWk6QKthcLyi4OGx4r0LqEucCP1CRvCrSfBbUesB4IVdJkqdt7FWwvFpRdQpeV8aZ8nwsJv29PrzfcWRPrI4FBl9AwLyw6OQzaXLDFONB2mcksN5U8sLgV6LgSftKD6T6/+Y6ANVEOL/AEv49QlF11wti8M+19YHE3xWUJoE6aKFXUVAFP6U32GrRdfcICnW6/cUAGCTzDtlcYXVKjc0GnXoNGWZRC+rDnR8gumZAweKdnoYiSrdqqMIYEAcmLZlkkDPaiFNpstc56Kb0H2i6WVHM6oZqg5+7gk3d7eRtjwkZi3PzwiDUYfF1jy8Tli53Umz0I2dUkBSvphAopqGVmibiY6VekxbNWG6/0v/qkxIVJvA3e2mZreNmuDts8mFa1bnvQrfeeaFQr8xtds8l4xKwC02KK9Hyt/WKZCdW/mSnKa1c6oUIKagCiEa5CwkSMsJ4aPZUdDINY3axbgieW6zel7rqhpQAnuBCrXhNgIzS7/O7uw0y3OK51m1SmbdriZIeVxDzKX72S8kjCmqo5q19kut/pNMhtVzqhKAXFgGaKWjB8NVwBFeyvGBXToBIXnbN2JJEgCCko47hfe90MfOBh00LCg2IyYttMySPVDgWnzDGL0DWmBRb57UolFF9TA0dKs4V+yVB9wzpRI0pSLQreLjEds//PvY62gRQcbtrQyW5NOd5FoLhGRCQRhK7xrkdwh0VlD4Jf1qK5g/x2pRJKwOIWziNhtwn0azGUESEzjnlcujAgmL0CO7Tp0DkoBtuT3drobKcKuXiVNf7awD1toLKnNhlQ6v4pQX67UgmlSAVlHMJEz8iypltEBRy4N16JQO/g7Y3OQeE3mTPoOAc1PZJy9KdaZCfUQqnpZor2CbtSCRXKhXfBZAIAHzbiwL33SrBYG5EfoRXU+dULmsr5z/XEHixsz0hQ2UUNtqc8Y/SCSLEr1car6Dl0imdwGiq8EBUUau7llLSoqWV7c3fWiVgZ7cXwXFM5B4zs5d4zEBu/D/+d62eJh2I37FS7rmx0hfX2XOk7cbKUZ7TwdzCCCv6k+3TBTWEF1ZCu+sxIA5rKuRUUFaXwmxMXg+HUG2M8ZVfa+7SC2moMpmliFFTvVS2ROsLbW08qqKuYhaJy7g3Pl71bad7U5rJ93dF+z9mVRqjwbYL2zKYYBXV4iRaakOidI0Gwvel+Zxuq87M9TGXbllwHkaHIKy+heIRKcfGcXSmEOlNQCpZ5QLhcKyjbSwxQjU9CO0Gw+R87B9XspOjJwWHrW5jKx1lge7F5xA6ZCE5O3ly5urkAnrQrhVBhcdKfSfoYBXUcfjDryNLu/nHw0ezltoI6UqQ1sffWe14cK6ijU/JURMYevTSErtuQM1fOT0MPjGftSiFUSEGJ8wgxNge10ETuLlDt32GQb5/WWuQ+jGofIvfo2L8gZl8RpnJQav3WuX+aiYXhg8GRbciNc/gs16XW4QYFnrfrPqEo5VbrWVjOVE5qwwqK2pQGTZdW/zx4ycClt3DTwAxEp7tt7h0c095A0r6Db7no4ZiEr3cNOusN6rxwglauNMT1xX1VHRkYf+VJ67OwFL2D+HRmCbvuEKr12nTzaf69EgSGmsIlBg2RtzBlx6pilX9FZbnEQoPOhFB/YF2Tpb8daZdpnsLvuov6xZ/Hl1BfZEXwdkAu/ACWGWM/HMrxnQAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-2px;" /> and <img width="109" alt="build : B&39; \to A&39;" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANsAAAAcCAQAAABCZwLHAAAEqElEQVR4nO1ai5GkIBAlBVIgBVIgBVMwBVMgBVMgBVMwBVOYFDxoUKH5iCPj7FTds65uFxXa7ub1hyXkPwwEYd8WoQK/IeVj6MlKXt8W4hS/IeWDGLVClm8LcYrfkPJBvLRChm8LEaAnMhpLSknJpC9za2oqAIN5V33FgvhQTVdXsGp8KS0FR88KIB/aZN02YFoerIeslIJ0ehOeqfcMVKtGBb8LYOVV/19Cm9WP2YT2TLOqgp+3a4A1piC0y2artoLSEs1orCjlcqreM0hQVpjxMBg7x6yf6m6t7kPAqnhvEdj7i+e3SyTvd2HlxvoqSFmr3hI6rZYejfVV5Edh9XZkNWQyLw7rbFGCwY78S5hht4V2KEpZp97rGKtoqEtQwx2o7Keu3ncOt/mlLSRcmCeKUtap9zrqqLd1jMnlh9TFPAv1p5JqBo47RLlAUcr7kS0tyjciG89ENuISJEvkdP+pDe7OpkD/NroduihK2SKypfC3Ipt1zo2MeeO+w6QZ630IxwECFUxFKTf1Cv3CiKzLYAzvBR54c/qZMvX2+zv9aWQzpUS9WXORbQRzpnZhCwy3KsDZ5Yq0os7dYdU76n9UX6OeZBOAawUwoB3fKCxotnCohvAzBjnqFfqOmZfqj5UVcXW+lLKkIhsFY04fLK2pXvfd+Cy9N43ZKvftAmbY/JDuL1L3oRSRXe/5c+6ZPPX2gZkUrF6ObKlqJgfhkvyj0O70ai8XOz4Js8o7VSALXLK6X8RQGLRlqRFgcITZoalGz59zz+Qim0CjXUVkk9q0tZ4sgQplcJmG1/BAE2v2eKoeoUNNtWaLY8vkyG0bxTS2eJma/0xITSnyo+BNvk+2rhinZGQzof3VMFtNg4Lhru04gaSdapklVu/WIZROmFDVLMjU0s9ss2BikpGLtK4Y18h9LPpsWdASxnCvS2cK2Myy1mxYvRSRJt4PfcKf47F0ZIvThbYVY64baXAh2DswkPeda6l0EAkdf/9aSNzZTYqG1Ys/XaGSL6ZDm+uFhUOK/LpIqa0rRkny58AruX7YKC5fNmOto2OTjOD3R3J+ZkJS6g0/PS6GF4L9mSWUlSK/WKnPRDaLNSLo9ki5dB6p7FbUmS3uB4ZnX7jNmzKRTNBPivxUZKSnItu20z97uiYvlfM4GdlGq+SU6EM5mIUF9/1JjijG9/Fj//WOKn3yO4RTSRexxr3TGtpQimwT+q72EFGgKCOXc1aZrSdhzYb9H5vtuD84hQsvZihHpwf5ce9tPJdv3DJV1iUt+chmO+stW8cxpkundzJrmqrUiQWqFFFsGIL7NrcSTsxNgO0Jti93jEnPKQQy29G04kX/qm1u5SKbfMBooib/28ELiVhln2QMuuIK1fn+H6WYRpZ0ZhO7oo9mldoF526MRoX8ss81wnozejOFNUqLUkhFBaals627T7e2xurUikLbOUfmAu4t590WCtvbdO7mZDjv9EQjmMm2f2f44wO/LTtByqsCQUxDqkdj/loj3On13OYsoJx9nR2jdsUKKnU20R61RfbkyYaZQSHZT2dkUDPkYe7y4Lf4PvYPnjlu4cFcNPjtd3HlaOkG/gH/NMXwUINS/gAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" />. This is the classic presentation of a prism. As we’ll now see, it too has a more symmetric coend representation. It’s defined in the analogous way - in terms of two maps <img width="113" alt="f : A \to A&39; + B" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOIAAAAiCAQAAADo8c3oAAADgklEQVR4nO1ajdGkIAylBVqwBVughW3BFmyBFmzBFmjBFmzBFjwIOrvriSSR6N6cj/m+2dkffPIgeQGVekCHUdXdFB6cQ6NmNd1N4sE5dF7E8W4SNBjVqlr4Go2ywlfgYZ/X5EVsL+fCRq0GfxvG/3WCV6n8sDjB/rnY52UgmOoLrt/7q++13uuBXlbaSxhuooa5J7cae9/7INY7H/u8rH/3mrhhIArOvvXwem2tD+azVwZlrtolbFjRuWeA5izUOx8pXmEAr/OmkcXfC8hBXkZoMvgvGhVWImH5kjHAjP89Efd5VbAuaDgz/duEE66BWzYz60uG1kLbn213IsWrXSY2BRP5F2/0yUkzQ0jNwFyQqSq4Qoz7/BstjzSvnlFcnLm3lBPWS67MIMxDSU8a0MPtxbj/Ktjv7IuDM0jx0qye+SLWyRjVwCdZLr14NWSWmRQHq6Tjc6emX5pXzdqp4YuYyojRXh3GyWhkRxAxvMpnK+2/RU/fw+LydHER21NuujQvvoipjNiBuIe6xCIzJs7Q8utxYORP+zE8c+HQrf0tcge/PC++iHsZUYO0DjNJDWl/kF7pVV+iTxinRYL1fXKqOQleXBHNUka8y/wX3FeP7a8l1UPWC06b+d9EXHERQ3QYGCFVghdXxLjJYr9aD5EReV+d6OaS2UwQJ1CTapCRthpleHFFdLsLKZirCeflh8Kmf9v79+BakY2FIONEctgyvLgipvZkGuzmyCy4Q2jhdOCzjYjrVZChOG1E7gbxeHE55mq81K5pAMpw1cn65DyCdTCb1inMns32V/kWfRwuovB55Th+m5O15fKaPdBgxtjORsBorNjzVoY8WBh0pO0KOV68HvYz4tojoqSTOzPbWof13dLlfgyO+E11SV48EdOnFC8cKydma1J+sbSIBpF1PiHJiyPiUUZ0EGizmZp+NISjaZMDUnrPxpFO/WR5cURMZ8QWZYvg4JNma3DbbvWBXS+7Z2NInlKaF0fEVEa0OAljzKURj6b5yG9p2JROrW8Dn6EeN0ChQ/O/ghddxL1cXHnpRmCD6o1ua3K/cB/10XZ+9Zv6qcTxF7bEv4YXRcTXQWU5+smJdipOwO5fC87BmBxuGc3nIfWyuFTEevkv/1jG/wX0qcNZaHCYrYoW9reePHuAxPuhoHPPpzy4EdVyRtWwjlIf/AhqqK7sI+G/hz/XC0Hs8OcbJQAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-4px;" /> and <img width="117" alt="b : A&39; + B&39; \to A&39;" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOsAAAAeCAQAAABnXCH0AAADlUlEQVR4nO1a0bWrIBCkBVqwBVughbRgC7ZAC7ZgC7RgC2nBFnJhMYkiILuAmvPecO6PN5FxFpjdNYzdDYI1V1PY4Y6cfLgtz4692Hw1CQd35OTDjXkOmtrzahIO7sjJh5vw7JjcXZs1tf4CLjHckVOydpwpPcy/1CnEGj2XO5OAY4SfMPsIT7sfo5arvYhTOlDaCfbQm/jlWQc1MOqZJueaPG12oUevZ3tpHmI1elBArVKP8zilA62deShRmZSBAElfntnPy+Ush3Z3XYFHvdf9uZxSgNau8Xy8DiZYcdu5Gtg7OOQcjn0gc2yBWU/mVBto7bqTnFXCcPdKTzgp5oyzZQxK8froQOFUFwTthlN8pAFfsM62pjIS0vMc0UMZLl88l8qpJkjaneOsI8xhHeLxuWrE7ND3ovNtA85qzyzLhcYpjPy7EbQ7x1nFsg8ste/Z0JI6JPSwhpzVLu4pg1MYSp+HOSBp93ZWob8wHK4rrj9HSVimJV/jDjUa6GENOesA4fbt4nz0mRUwSTvrrIP+43oM+iYxCpOndjqGXJEx1PJWb05Yfc7KIdiqWvOB61npC5mo3RPqtfc65Qdf9NVOR2g2C6FER4saVrEUMd9GxEOLNi/eVQ9mDloVTNSucWzYluVhClIvAezK24qmLgyrhKNWboZpKPbV24TTwSkYAlG7bneoqsJ5sXC8TBVI0agMlddZTeoxb5Z2eXAILHbHkrXb16yl+8Puw8gLw/rtI23RBcuecjCBnZHvhMjauTUr3x3KeZDw1mE9njBD6rptwE/SxlEWH+oGG2ATOQyv7XgmLx+ydvuaNfboeBjDF84YmNsricP9vgCOvefqkXfJYM3KFsEx8PGKD5tvp26ZDO323eDYo+PhyzAFMqw+0L7vd9b3HSmFGwZDwABCyNBu/7aupLO6hr+mljcHLawhZ2V6B5VoksQgkc2OLO2k86At7NVS7xlDmd81YY3Ziyr63P65cX3hLO06Jz1KeZeTKqgM3im/z0QJa9he+qSEKwcK+fY2U7tmE0YR8Z43UpuHbSQRz+8zUcIaclZZPagCkfkbFNBu+ASphSbaUTZpk/T4pzg0t0MHnoD/PbP6Oviw+lyp0cG0rdO6rcMBsYgLacfhgDCd0SkpTzv+6ZZa1Wju7hidGo76g01MWB/RGnKo3F0ySG9CFNWugZrol3C3n6TEQXuV+Q/it8L6H4mo/8blJ/EHsPpwaCsNBXwAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-2px;" /> standing for <em>forward</em> and <em>backward</em>. For any prism defined in terms of <img width="47" alt="match" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAYCAQAAADZ2oKUAAACo0lEQVR4nM1Xi3HDIAxlBVbwCl6BFVjBK3gFr8AKrMAKWcEreIVWAmw+T3VM73KtfOklKkJP4uWhKPV/zapAzxc9619DGbdJGYLN4Oe/hqLUQn2cBmMMQT8+gmbQdgJiBmM2ivEfQTNkUyTAqIX/wfiFYIThKC54lGofMEcwtsEYZvz+ETSDtv9CNZjx7slCTdzydLinWQoN9JpuPK0t9D9Hq9pdTXxsJEB6jyVMlNtR9pXW18aMZ0Qz7ezptUBkNk/bauqPi4sDLeSNuHYLHtzEUKQnENyCLfLbZlghPnuUvPS+/QJqyrjnvflaqktLGu9yw8xP52AyH0NMG6oOMOtm8LS2NHz2gij+xPiZSnpde+t4tgVTKriU42XquezcI7T68L6i0taegzz1Z9PpiBVEUdZ4hl5n49a9rk9bpppqPIJwpuQalifwFjzFdCym/h4sDQQ2WeM1rWqz7Q0lA9AkAJZcE5uFtChWc+fZIAYpIms8RuqmCajxx51ibZAWxWrtPAcc5Q79kRmPkbXJbbuZc16QNqheW16Nx8LUlyjSSt4hMN6+uT3ft60xLaTtE/TQNugGMn4WGY+RrcltExif7Anj127K88BmpMgqMj68mXWktt0U+4TxpXob+eohpojiGdmuOUu/n3WwbTUWYUh+z/i6ehf70hdci+LZ11rj5wvAKoLXOQrbVmYji1/zJ4wvF7TO1ZsOwuui3nz5a8aX624CkqZhIgFExpe2+Q6leq7xW97gVJhwrdHxnj7yLv4qO1zg27Ft7TSo/pkoaXzIqwR5RcZLB+sImqW/pSt80D5OnGnEWCgNz5clBRfEw5oHrVip8C3+zHbNRNtfhCrvy1nE74kGJUZP2tjAsc3NoKth7E2DsWxpTO53NMINMPXeb5QEcXsY5j+RAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> and <img width="37" alt="build" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAAAYCAQAAAAYXcg4AAACR0lEQVR4nM1XDZHsIAzGAhZqAQtYwAIWagELWMBCLdRCLayFu4S2kAQKnZ17My+d3VtC/sj3AT2lbtFqg+ejfuD7L2XJcX/gCQOr9JzbKqeOiftcNKRIbGyVz2XZgdck9zFxn0vIJSxMt2TdTHawcb2Jd+5jcQCEFzr/gho659a9qTfu30h8QQ0HNvv37t/IG2qEf8msnvwHzOrJHzHLQjMjo+2SNXItBh41tRpRwxcPP2NWhI+GJ4KZvtInSGlEk7G3Byty61ih9KlhQY9xtVpz1iGzjtIBbGtU5+mvrzGFAtdXj80nqydqeFZGyrkHzKJTWz4W1wtOJxLi+tYyerLqM8sKnRszi6O75ebfOtlmXF/lFrVaFZUWHp1vP3oPDDZF637eUaEbCnv7IbZ9qzsKZ1ZoGjBhFnXXDFS5Hs6sZ22PWZ+mo4/nZetus+aGKcFvemS0YKHswqoHj2Nxn0p/dA8EpvawO0ToO/xH6Fp4QmM1YFZ7I9G3H3mN9go4Y0Sha+FJTREDZgUBismJFzJLHSuHDNHXDvoLSgpPKn97DbBXgUK8OLP4CmRZdXYtvbDk1E8X4BWeWr6MRUtvoFyYsRU7amWzS95LVgSq6Zay6qoLZdFWlLUXgpgelLGwx0DaxAiOhdwF4DUTrrIsCVSvk1TAN5dOM2Zupat482K2XfgRwXQJ1hTAqN36DpxjLuO8Xvf8aryx4vE/HAfzdIcGKMELXc0Us95DbHyXaLOWrtjBayDOGTbqWcibzXR0p7bG0mwE8gvH41jYy5fExwAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" /> maps, we can recast it to the coend form by setting <img width="79" alt="f = match" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ4AAAAfCAQAAAC8YLyNAAADgUlEQVR4nO1Zi5WrIBClBVqwBVuwBVqwBVuwBVugBVqwBVtIC9mZgSgwE0WSl+zm5XI2u8sRYe58uBCljtCpQbWHT33B0KpZjUDfqKZ3L+UNMMpBu0Ibzg/WQJ1TSOEFXvD/RV9DWXets30InI/w+wJU/nX0EArNyTEd2V6BGQZ2CiNv/Ii4W4I9Z4CBY89PpSlgPwdNlT2uruJhwM7nh/1a9GCPOz0KCT+b6soH7CftsRPYM54cgwG01Exm6wL212Kp2DUrAqijthB5+NdrNgsNs1lIrhsMLN3BT7PTk6InPWqyt3prDCVgd8eeBuaeYPYh0xRY8XBFuGVa+OnZSAa7ikNH7TXxZ8EsDS5DT7cwa0+GoO8N6+FGoLMtkIAuGKm+eRKbYMNCkkOyR8OMS3g3yuKYWq/xpuCwrjQOq7O9El2oR47MdlEE4Dpa1pOiT+qZFUTJvYqHB4B5fbem2N7W5Anf6LRlqT8U65uW/FPW7sfwFBa1EDVx8lxpJXEPnnfi/7tsHzWCKJE1HlIXz+YShTGGVFdJT0EentmbuuJ2/5TijddsuZ48w3o2aCIzroM9E1myxtPrMeCGJSkJjqWpY2sRMZc99jR4RxlmNi8fbdYzsjHc8bLG4yN14gSu8QrP+JXi8EGMzGwuFoas58JSaWGOl/OIj4whu63gnFv42NPB492pfG+dkx7Dbj18iqYF4iJUPHMQIMduu4O6o8yj0ILZuYE5NSNzM694rVjx+MgUstsKShlPn/u4KamStj91ScXLVYBlbuYpOoih4A4CRHJbUTYW7irr4sbCtl9FSyre5n1D9cqyMZsouY1Mn7lRv68nuNviteyKuMrb0wdxXPFi70/kipzwWJTc4irWeO1KwCCSp8Mo7rbtbGz2tF5xgD4VJRVvOyDp4P0uo2BeU79d++OKt8nthhUJX4I8QbzibZzYHb1Ktef120WpxvOU2DUz3PqMpnPKJbzFrrS7lbz02mDI9uD4ml7SeC48tXvGOLNdPA98VimxJqDGwOcWFZholm5c/BGvBzPxfmUzEQnFywLL6vgAxI/0Nc+U3OjkQlyF9xqq3Ltw4jnwX0OzOXkPohWOeW1y0aTZtZO/mJIhHxw7YXNrxN4M7xHIfxxt+Pys6/cXwN8wYJ0Y3iJT/jS69erHfePuLBraS3BPmfdUzBcyUHvj1ytf6orxA5sc9+OSBsNWAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-4px;" /> and setting <img width="9" alt="b" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAYCAQAAACyng6EAAAAuElEQVR4nMVTWxHEIAyMBSxgAQtYqIWzUAtYiAUsYKEWaqEW2k0fc1AC3N+FKTO7s2W3CSV6ylDC2mjH3i1PE62Qhb5MSmR+JLIQ7eOzPuNkUvy/ZB7GDNRNxngMFtOCvZFsJXcjA8StZFPGJGCrJVsKJmnfXfdMne+7Z6YKQVrP/Mm4UlZPM4DZ3pbht2QimzPszrPUduRxG3fFFrTEj7Xoev9proNd1Od5/VkRxgHyWZd8rb1+LQ/v8lOcnAoq0gAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" /> to the composite <img width="222" alt="A&39; + B&39; \xrightarrow{A&39; + build} A&39; + A&39; \xrightarrow{\nabla_A} A" height="20" src="data:image/png;base64,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" class="display-math" style="margin:0; vertical-align:-2px;" />. In the image below we can see how the prism is an upside-down, mirror image of a lens.</p>
<center>
<img src="../images/prism.png" alt="Prism as an optic" width="600" />
</center>
<p>We can also imagine a particle flowing through a prism. A prism takes in an input <img width="14" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAYCAQAAACsVz43AAAAyElEQVR4nJ2UYRWDMAyEYwELtYCFWJiFWcBCLGChFmqhFrBQC1sSKK90g6a9/CP5HvR6AcCmN5BxspKDBGEM9fCBOAIig1IDivrWAZS0BJ37QKdnXBTFPtQrsJ/21QMio3CiXTcb+YNFUy9KxbCgqxV0lxAkRs158hdHgx3NBpWoMRTZoCyyoqSbUtamqGuBYhBWtdry5P+MoAWtDSrRRihqg7KaKN22G3maHy7gIU8Tb2W6XWjU3sZTPwrH/0eqtskXPallf/wFfgxlrCF298UAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />, checks for some condition, and allows the environment to execute some computation only if that condition is true. This computation is of type <img width="57" alt="B \to B&39;" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHMAAAAcCAQAAAD46EjiAAABwElEQVR4nN2Yga2DIBCGWYEVXMEVWMEVugIrsIIruAIrdAVXcAXecda0TTm801OS95M0abTHB/xwR435z3Kma41wvR4mmaU1xPUaYZhza4jrtcAwPf14MrHYJhNMfx/lSTaHlrV0KAfNw0sJfuw+mgcLJAjZclvz2QJ8D/vhcqjftYvo98oc3SAeWx727oJ44pTqsYuK428Qh63D9d7VRL6W0BwtxWHLU+H2Q1GnlH3ti5bisE2cVNIT7l9TboJPDR2Lw2GzvNiU+9eN/TwAV1KEBC4Xh63nVT+U+0fsQit3+npeI6TIVnK/xQ6iYjKx0M9uZvuRGpt7Hczv5DsAzoIJWVc5qqzYUGQLuPzhq+Uiy19QFjyhSaIqssWi+/O2XmDudGVxoPwVVWSj6pwHeZSfUR7owq6r1NioinHrpJ4EOjwijrSZAXmO7UuhcudOjIuqE7f1lORY7izbh8ruf4fSKg42jYKrgCIbfQMZ8Jk809UURCldja3m/oiW0bxUO1Fdq8hGu98rFu2bouiuo8hGuT9cMMi8OhJvqLG5gsM7CDDjKaZd6o2i67kK21DNaKN69ZPFLQpasCnK3ffX2R+jR2/jmfgwhgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" />. That is, the environment takes in a <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAA5ElEQVR4nIVUfxWGIAxcBSpYgQpWsIIVqEAFK1CBCl8FKlBBx6mfz+d+3P7xgTd22wHRF4WqGIUyReH/F2aORDtHwfcdiRqvVZr8BIP8PafyaqNgk8fJXViPSJpsckHREnaUbqIr+cPVCwNRUUy0Yme1yJpiQr9/FlVXvCGpM2tJcUDK6o1pvsbx2GNhb3VYxkVGcfkVw7LJO3WgioojJ+xcgwPNQ6s6wD80V99pN4uc1Rmf5GaRZcUP2bSIfmsW7GWdaimuEGQ8Bbri5F8JTXH2qbOgamJKQ5dVc57NkKPxbEVnHZjvjdkiXaYHAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> that the prism produced and returns a <img width="18" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAbCAQAAABR545VAAABH0lEQVR4nK1VARGFIAxdBStYgQqr8CtYgQpUsIIVqGAFK1CBP4Z8vyeTcfp2552Kb9vbAwGeAmF8zMGYIEJ4h2omqu0dqkBUVn69gK/GAg7MaSVye4NMhRSWFkX6GP/CUiuRKA+ZHd27VuHIVOby3LM2pY5E3ZyfFSZjOEVWZ+S6m1jEZZGbLOmwTSVNZtg1zOkUNjCCUtmSka6ZdGpTSUplodc9ncrlklIzp6hVK6Km1MAJ/J0hr8B94Ic5P2TEwIbthOM23CnSZrJ9FSX4qlJJ5kD1dSEKnppEiwiQdl9JMuup3M25GPsOurpSB9Wqp5KUApI8as6ngjulPLeu/r/IStnfRlZCUsr1EmFFjZEINp6ccttkSeuxkZcULv8CXdmjXS1t3BMAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" /> which the prism receives. The prism then has to translate that <img width="18" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAbCAQAAABR545VAAABH0lEQVR4nK1VARGFIAxdBStYgQqr8CtYgQpUsIIVqGAFK1CBP4Z8vyeTcfp2552Kb9vbAwGeAmF8zMGYIEJ4h2omqu0dqkBUVn69gK/GAg7MaSVye4NMhRSWFkX6GP/CUiuRKA+ZHd27VuHIVOby3LM2pY5E3ZyfFSZjOEVWZ+S6m1jEZZGbLOmwTSVNZtg1zOkUNjCCUtmSka6ZdGpTSUplodc9ncrlklIzp6hVK6Km1MAJ/J0hr8B94Ic5P2TEwIbthOM23CnSZrJ9FSX4qlJJ5kD1dSEKnppEiwiQdl9JMuup3M25GPsOurpSB9Wqp5KUApI8as6ngjulPLeu/r/IStnfRlZCUsr1EmFFjZEINp6ccttkSeuxkZcULv8CXdmjXS1t3BMAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" /> into an <img width="17" alt="A&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAbCAQAAABc+f4SAAABAklEQVR4nKWVYQGEIAyFqUAFKlhhFa7CVbACFaywClSgAhWs4I3pnTA5Zfr4xXQfuj2nMU8Exj3KZ73NYubnmIkwSXuyP8RmwowaiKOUIGLAr2Q1GKSUKGKeYscnPFE+N69aiSKqPkV+mhrjaI8aiOeVMUMRHWkP/RDHNRkZU6ahrtXIyWt1Xr+opd27HwLb+6+YvS+Dzr1x64UVGJV8kZgx0x2IqwyXjS993CWsOhPuYUCYKzR83KEojO7vYDx/0eVKjFF9Q7m4INZ08PGlsHE7aDGyuCVGYUBZ3K9UGP/3VoWPh5OmdvrY0lSZxXDaBXwtXY3wsM3bpTEcsbi2tH8qH3zZezCJI3CKAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" />, i.e. it has to know how to translate the answer from the environment into the type that it would’ve ended up with if the condition had been false.</p>
<p>This shows that that unlike a lens, a prism routes data to one of two ways: <em>either</em> through the residual into <img width="17" alt="A&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAbCAQAAABc+f4SAAABAklEQVR4nKWVYQGEIAyFqUAFKlhhFa7CVbACFaywClSgAhWs4I3pnTA5Zfr4xXQfuj2nMU8Exj3KZ73NYubnmIkwSXuyP8RmwowaiKOUIGLAr2Q1GKSUKGKeYscnPFE+N69aiSKqPkV+mhrjaI8aiOeVMUMRHWkP/RDHNRkZU6ahrtXIyWt1Xr+opd27HwLb+6+YvS+Dzr1x64UVGJV8kZgx0x2IqwyXjS993CWsOhPuYUCYKzR83KEojO7vYDx/0eVKjFF9Q7m4INZ08PGlsHE7aDGyuCVGYUBZ3K9UGP/3VoWPh5OmdvrY0lSZxXDaBXwtXY3wsM3bpTEcsbi2tH8qH3zZezCJI3CKAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" />, <em>or</em> through the environment. These two branches of computation are shown as two animations above. For each input of type <img width="14" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAYCAQAAACsVz43AAAAyElEQVR4nJ2UYRWDMAyEYwELtYCFWJiFWcBCLGChFmqhFrBQC1sSKK90g6a9/CP5HvR6AcCmN5BxspKDBGEM9fCBOAIig1IDivrWAZS0BJ37QKdnXBTFPtQrsJ/21QMio3CiXTcb+YNFUy9KxbCgqxV0lxAkRs158hdHgx3NBpWoMRTZoCyyoqSbUtamqGuBYhBWtdry5P+MoAWtDSrRRihqg7KaKN22G3maHy7gIU8Tb2W6XWjU3sZTPwrH/0eqtskXPallf/wFfgxlrCF298UAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />, only one of them will get executed. Prisms are quite often used in parsing. In game theory, we would use prisms if we want to allow agents to stop playing a game.</p>
<p>I find this operational perspective of lenses and prisms enlightening. If we think of lenses and prisms as little machines, then lenses are machines that always query the environment as they operate. Prisms, on the other hand, only sometimes query the environment, depending on the values of certain variables in their internals.</p>
<h2 id="here-i-am-stuck-in-an-affine-traversal-with-you">Here I am, stuck in an Affine Traversal with you</h2>
<p>Can we combine lenses and prisms? Can we model a process that has both disjunctive and conjunctive data flows? The answer is yes, and we get something that’s called an <em>affine traversal</em>. To understand it, let’s go back to the formal definition.</p>
<p>Both lenses and prisms are optics, and optics have a neat coend representation. Given a symmetric monoidal category <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAAzklEQVR4nL2TWxXDIAyGYwELWMACFrCABSzEwizMAhZmAQtYYClj7RYSur7szzk8NB+5NAFgJQseEBK4JUUyhBVou+EKRqjwoBP3S1lDHYGZyjgK2vCbBlfmeuFRg3naSHCRYEOfK53fylqjKDi8FntzzLHvZFbC1aSSXO//dHpvoVajrKKPYpY934tPhY77X3H8Ax6u4VqrgeeNHZf+u+nTZuOz44klMa+w67njlcWJq4fRxjPzo+JM5albdFxoIxNO68zaSrTdmQzlEgCe31FnmZGs1A4AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />, the hom-object of optics is defined as follows:</p>
<center>
<img width="455" alt="\mathbf{Optic}(\mathcal{C})((A, A&39;), (B, B&39;)) = \int^M \mathcal{C}(A, M \otimes B) \times \mathcal{C}(M \otimes B&39;, A&39;)" height="40" src="data:image/png;base64,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" class="display-math" style="margin:0; vertical-align:-15px;" />.
</center>
<p>Lenses fall out when <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAAzklEQVR4nL2TWxXDIAyGYwELWMACFrCABSzEwizMAhZmAQtYYClj7RYSur7szzk8NB+5NAFgJQseEBK4JUUyhBVou+EKRqjwoBP3S1lDHYGZyjgK2vCbBlfmeuFRg3naSHCRYEOfK53fylqjKDi8FntzzLHvZFbC1aSSXO//dHpvoVajrKKPYpY934tPhY77X3H8Ax6u4VqrgeeNHZf+u+nTZuOz44klMa+w67njlcWJq4fRxjPzo+JM5albdFxoIxNO68zaSrTdmQzlEgCe31FnmZGs1A4AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /> is a cartesian monoidal category, and prisms fall out when <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAAzklEQVR4nL2TWxXDIAyGYwELWMACFrCABSzEwizMAhZmAQtYYClj7RYSur7szzk8NB+5NAFgJQseEBK4JUUyhBVou+EKRqjwoBP3S1lDHYGZyjgK2vCbBlfmeuFRg3naSHCRYEOfK53fylqjKDi8FntzzLHvZFbC1aSSXO//dHpvoVajrKKPYpY934tPhY77X3H8Ax6u4VqrgeeNHZf+u+nTZuOz44klMa+w67njlcWJq4fRxjPzo+JM5albdFxoIxNO68zaSrTdmQzlEgCe31FnmZGs1A4AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /> is a cocartesian monoidal category. So how do we compose lenses and prisms?</p>
<center>
<img src="../images/affine_traversal_transparent.png" alt="Lens + Prism = Affine Traversal" width="450" />
</center>
<p>Since both are given by some monoidal categories, we’d expect that affine traversals are given by a monoidal category too. But it’s not clear how to compose two monoidal categories. What would we even expect the result to be? As always, understanding what it is that we want to do will lead us to the answer. It’s not the case that we want to treat these as <em>just</em> monoidal categories.</p>
<p>In the above definition, looking at the operator <img width="14" alt="\otimes" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAXCAQAAABdAYziAAAA90lEQVR4nI2UYQGEIAyFV4EKVKACFaxgBSpQwQpUsIIVrHAZboAeyN7kxi83vu2xCUSaWfK08PJk1D3CDAU6aad4rYPX+g+4MBaHSpY9J7l3MFJSBNr32pE+L+GgRz2fz6i5V9pK1KLgWdwYzuCdXg0iuMWIUdGu1LmecA/mryjl9tbgJ5gjg2ThuOARlEXg8U35p6QNPgc25Yqo28fMUaWiUQG0/wH1UTl5+qCO4wlHviCDmZ8Q2dUGGym35svD3sA4GpxkzWoH9xmBN4zTDsKwKjTlDk6cWV4sWx6cqeUnZuPqvqTy3PvEoJ+D1Vx5avZy9oCv9xdGvVgPevZrJQAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-2px;" /> (which appears twice), its left operand <img width="19" alt="M" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAXCAQAAAAi0J4TAAABIUlEQVR4nJ1UbQGFIAxcBSpQwQpWsIIVrEAFKljBClawghV8O1C+BJ5w/IId+7gNiN7QtN1rzVg9BNsfpi7TBhpppoMuXmPFnaKTGTtNzBqqgdmsjbupyBjZXZ0RYOH8NiarIkOzI7j7hJVk1Z3i/JHd9s3dbq6U6IMJs1ezj+jo1ML0I2vX3FXxt1UOUA5i57VZjJNG5ZAjLsjEJu8CG5UDcuWgUMtpUg7AKM+Rbbr3zcoB6agIF6hZOQAvI3y3ylk6lEsvjUGmHcrZkk638+ddysWTp4Jfo0u5MAsZlaZ7lAMed8+0WRw9ygF2VOboV5N9ynl3cYj5u3J7ElWZ3oro7KNykttwJSrhk1oS1mlYVdiReNYanPs8hohzvd4z4wexoZu6e+VJzgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" /> has different semantics than its right operand. The object <img width="19" alt="M" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAXCAQAAAAi0J4TAAABIUlEQVR4nJ1UbQGFIAxcBSpQwQpWsIIVrEAFKljBClawghV8O1C+BJ5w/IId+7gNiN7QtN1rzVg9BNsfpi7TBhpppoMuXmPFnaKTGTtNzBqqgdmsjbupyBjZXZ0RYOH8NiarIkOzI7j7hJVk1Z3i/JHd9s3dbq6U6IMJs1ezj+jo1ML0I2vX3FXxt1UOUA5i57VZjJNG5ZAjLsjEJu8CG5UDcuWgUMtpUg7AKM+Rbbr3zcoB6agIF6hZOQAvI3y3ylk6lEsvjUGmHcrZkk638+ddysWTp4Jfo0u5MAsZlaZ7lAMed8+0WRw9ygF2VOboV5N9ynl3cYj5u3J7ElWZ3oro7KNykttwJSrhk1oS1mlYVdiReNYanPs8hohzvd4z4wexoZu6e+VJzgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" /> is <em>private</em> data of an optic hidden from the outside world, while objects <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAA5ElEQVR4nIVUfxWGIAxcBSpYgQpWsIIVqEAFK1CBCl8FKlBBx6mfz+d+3P7xgTd22wHRF4WqGIUyReH/F2aORDtHwfcdiRqvVZr8BIP8PafyaqNgk8fJXViPSJpsckHREnaUbqIr+cPVCwNRUUy0Yme1yJpiQr9/FlVXvCGpM2tJcUDK6o1pvsbx2GNhb3VYxkVGcfkVw7LJO3WgioojJ+xcgwPNQ6s6wD80V99pN4uc1Rmf5GaRZcUP2bSIfmsW7GWdaimuEGQ8Bbri5F8JTXH2qbOgamJKQ5dVc57NkKPxbEVnHZjvjdkiXaYHAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> and <img width="18" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAbCAQAAABR545VAAABH0lEQVR4nK1VARGFIAxdBStYgQqr8CtYgQpUsIIVqGAFK1CBP4Z8vyeTcfp2552Kb9vbAwGeAmF8zMGYIEJ4h2omqu0dqkBUVn69gK/GAg7MaSVye4NMhRSWFkX6GP/CUiuRKA+ZHd27VuHIVOby3LM2pY5E3ZyfFSZjOEVWZ+S6m1jEZZGbLOmwTSVNZtg1zOkUNjCCUtmSka6ZdGpTSUplodc9ncrlklIzp6hVK6Km1MAJ/J0hr8B94Ic5P2TEwIbthOM23CnSZrJ9FSX4qlJJ5kD1dSEKnppEiwiQdl9JMuup3M25GPsOurpSB9Wqp5KUApI8as6ngjulPLeu/r/IStnfRlZCUsr1EmFFjZEINp6ccttkSeuxkZcULv8CXdmjXS1t3BMAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" /> are “ports” available to the outside world. Even more, if we think about the underlying functor of the monoidal category <img width="104" alt="\otimes : \mathcal{C} \times \mathcal{C} \to \mathcal{C}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANAAAAAbCAQAAACngsmIAAADHklEQVR4nO1a0bWrIBCkBVqwBVugBVugBVugBVuwBVuwhbSQFvIWNEaRhQXW3Ny8O5yTHxNmZNhlgQjxGWiEEkb0ov1PeDF8mh6ABEE38dia+XLe36JnhRF3McOn2eRNX837W/Q4tCBpgqB+onHChq/lZdZjs2EHTUHwXSPr7olYhOlL2H6el1GPhEXqBp6atc3QuOVbWX4Qa5B1Y+b5FF4MBXo6eGi8qGlcZuSrLCT0dj9F5nT50vhTvIx6jBiRlNYwxpEJSFCkeawiz2RyCpXzUpGXKrP12FoCJ+ijT+mwEs7zZoTWBL+/h5+vX5Awge6X8VIxZRQb2XoUdC/RONFAbZ+mXkYmy4qalHJeUp+s1p54BL0jlfWBIceQrefmBj9skV6HRSXr8xlo58jz1tUo5etZyCKKPbW8NEjQQRv0bD16e+2zRXo3JFOi02UfjMNU53zfIoo9HLw02GWCkjKz9Yy7VzxapA/DoRMzxLgqEMeNYVO4t4hmDw8vDXZbkk5z2XqObr4s0l43suoQomE6Z3paRLWHi5cC6SyKR1G2nvOwLxb59ljUJIrOCYsVy1QsFtHs4eSlYJk2Paee0OIv3XnCGTURZBgHSmUsszW8DQz2o6jhm/tsPW1g2LWboeeKLlajpcBn0DJL8X0RJ6/KbqM7j+449fjDrrcc71tUbxAunIrn2oPti67ipWEArliCK9JzrDzworutqoVMdHHsiHNqXxrQLOLhpcEQi/5MPT1aWB8tMlXzUK+5+QzpdtaUFcWv3CgWcfDSoEjncQV65Ja6zpXbyyJJSHCx2disy+c5ARjiQWOosE5bVM9LxQTrTxpFeowLuQE967I/G5PxkzrqmZwwf4h1hT0WaYvqeKmw8UM7ei3SM0dOY+3QhM07YpkZ+E663YrWYY21Dlipt034vidlUR0vFQN5E1KkBz/LtjAk8tAdBybtsc4i/4IQxxB5gVT5UsNLRXx7yqBHQhIbAkHauCtwLthL9RF6tH2+878A1/Pm/YOjUI+99B7gB0ostztLJ+86JvkDCa27/J7cmtQz3jj+IRP/AF4bFSp9tVLPAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-2px;" />, there’s nothing in the definition of the optics that requires the first argument to be the same as the second. The private information <img width="19" alt="M" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAXCAQAAAAi0J4TAAABIUlEQVR4nJ1UbQGFIAxcBSpQwQpWsIIVrEAFKljBClawghV8O1C+BJ5w/IId+7gNiN7QtN1rzVg9BNsfpi7TBhpppoMuXmPFnaKTGTtNzBqqgdmsjbupyBjZXZ0RYOH8NiarIkOzI7j7hJVk1Z3i/JHd9s3dbq6U6IMJs1ezj+jo1ML0I2vX3FXxt1UOUA5i57VZjJNG5ZAjLsjEJu8CG5UDcuWgUMtpUg7AKM+Rbbr3zcoB6agIF6hZOQAvI3y3ylk6lEsvjUGmHcrZkk638+ddysWTp4Jfo0u5MAsZlaZ7lAMed8+0WRw9ygF2VOboV5N9ynl3cYj5u3J7ElWZ3oro7KNykttwJSrhk1oS1mlYVdiReNYanPs8hohzvd4z4wexoZu6e+VJzgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" /> can be of different type than <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAA5ElEQVR4nIVUfxWGIAxcBSpYgQpWsIIVqEAFK1CBCl8FKlBBx6mfz+d+3P7xgTd22wHRF4WqGIUyReH/F2aORDtHwfcdiRqvVZr8BIP8PafyaqNgk8fJXViPSJpsckHREnaUbqIr+cPVCwNRUUy0Yme1yJpiQr9/FlVXvCGpM2tJcUDK6o1pvsbx2GNhb3VYxkVGcfkVw7LJO3WgioojJ+xcgwPNQ6s6wD80V99pN4uc1Rmf5GaRZcUP2bSIfmsW7GWdaimuEGQ8Bbri5F8JTXH2qbOgamJKQ5dVc57NkKPxbEVnHZjvjdkiXaYHAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> and <img width="18" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAbCAQAAABR545VAAABH0lEQVR4nK1VARGFIAxdBStYgQqr8CtYgQpUsIIVqGAFK1CBP4Z8vyeTcfp2552Kb9vbAwGeAmF8zMGYIEJ4h2omqu0dqkBUVn69gK/GAg7MaSVye4NMhRSWFkX6GP/CUiuRKA+ZHd27VuHIVOby3LM2pY5E3ZyfFSZjOEVWZ+S6m1jEZZGbLOmwTSVNZtg1zOkUNjCCUtmSka6ZdGpTSUplodc9ncrlklIzp6hVK6Km1MAJ/J0hr8B94Ic5P2TEwIbthOM23CnSZrJ9FSX4qlJJ5kD1dSEKnppEiwiQdl9JMuup3M25GPsOurpSB9Wqp5KUApI8as6ngjulPLeu/r/IStnfRlZCUsr1EmFFjZEINp6ccttkSeuxkZcULv8CXdmjXS1t3BMAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" /> which are available to the outside world.</p>
<p>This brings us to the world of <a href="http://nlab-pages.s3.us-east-2.amazonaws.com/nlab/show/actegory">actegories</a>. They have a slick definition. Let <img width="21" alt="\mathcal{M}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAaCAQAAACEcm1DAAABX0lEQVR4nJVVYbmEIBDcClSgghWsYAUqWIEKVrCCFahgBSrw1l30yQHH3PCdP85lWGYGJPqOiZZBRVkNYaVEASZ1dGCFJ9MmkHSiSB4rTTKQrRkmTdwvtL7SjosNS4U2wHRRisdb23IDEDyPq3hkxFUVcXMP8XbUheP32u2O0Sayud++ZpPQWVAsxiKbWmTC2iWNXGVoBq0lVfbyuL+9y/+Tn3psEpMDOHPZKYa0SWOWR6UyY1L7UG0ddbdXf2NjM1aepnBNdbdCy4DGKzyd2Ia67sN3JN10OXwWS5TKaVLfSNU/TfiiF1/Ex8mG3/bMaGojb/3d+78Md1LfAGnr61jvXSuksQqSww5DqEo07kFI66h55DDMhV0Kk6/IFulN2/zmTc9qoamS75LetE1tDzHF86/WTvvdu/fYTWu444+56Rm/fMAVLs+MdXZDfgWEuoKVpOwt0wy7vXfv1Z/xB/2CwGLDofgwAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> be a monoidal category, and <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAAzklEQVR4nL2TWxXDIAyGYwELWMACFrCABSzEwizMAhZmAQtYYClj7RYSur7szzk8NB+5NAFgJQseEBK4JUUyhBVou+EKRqjwoBP3S1lDHYGZyjgK2vCbBlfmeuFRg3naSHCRYEOfK53fylqjKDi8FntzzLHvZFbC1aSSXO//dHpvoVajrKKPYpY934tPhY77X3H8Ax6u4VqrgeeNHZf+u+nTZuOz44klMa+w67njlcWJq4fRxjPzo+JM5albdFxoIxNO68zaSrTdmQzlEgCe31FnmZGs1A4AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /> just a category. A <img width="21" alt="\mathcal{M}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAaCAQAAACEcm1DAAABX0lEQVR4nJVVYbmEIBDcClSgghWsYAUqWIEKVrCCFahgBSrw1l30yQHH3PCdP85lWGYGJPqOiZZBRVkNYaVEASZ1dGCFJ9MmkHSiSB4rTTKQrRkmTdwvtL7SjosNS4U2wHRRisdb23IDEDyPq3hkxFUVcXMP8XbUheP32u2O0Sayud++ZpPQWVAsxiKbWmTC2iWNXGVoBq0lVfbyuL+9y/+Tn3psEpMDOHPZKYa0SWOWR6UyY1L7UG0ddbdXf2NjM1aepnBNdbdCy4DGKzyd2Ia67sN3JN10OXwWS5TKaVLfSNU/TfiiF1/Ex8mG3/bMaGojb/3d+78Md1LfAGnr61jvXSuksQqSww5DqEo07kFI66h55DDMhV0Kk6/IFulN2/zmTc9qoamS75LetE1tDzHF86/WTvvdu/fYTWu444+56Rm/fMAVLs+MdXZDfgWEuoKVpOwt0wy7vXfv1Z/xB/2CwGLDofgwAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />-actegory <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAAzklEQVR4nL2TWxXDIAyGYwELWMACFrCABSzEwizMAhZmAQtYYClj7RYSur7szzk8NB+5NAFgJQseEBK4JUUyhBVou+EKRqjwoBP3S1lDHYGZyjgK2vCbBlfmeuFRg3naSHCRYEOfK53fylqjKDi8FntzzLHvZFbC1aSSXO//dHpvoVajrKKPYpY934tPhY77X3H8Ax6u4VqrgeeNHZf+u+nTZuOz44klMa+w67njlcWJq4fRxjPzo+JM5albdFxoIxNO68zaSrTdmQzlEgCe31FnmZGs1A4AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /> is a strong monoidal functor <img width="104" alt="\bullet : \mathcal{M} \to [\mathcal{C}, \mathcal{C}]" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANAAAAAiCAQAAACE95/tAAAD7UlEQVR4nO2bjZGsIAzHbYEWbMEWbMEWbMEWaMEWtgVbsAVb2BY8iB9PIJCE5enNe/t37mZuzguQH4QE9qrqK1xtte5P+8+3iqipOtHb96sFJ9lHRd+pzW91NXzUP9eG2tt8GNBgOjCz3+6r6S/2JSbrpLiUcepyzvbV/CRXysbDgLZu8dRU76zhf6oUIG36NJvv+nSxfAqlbTwMaJsxnMCgzDBWs4buVwxQY9w6mcB0qIaxjCLbtI1HATU7INrtygyEi7K0cEB2PbswauZYZDYeBdTDquDE7XFH+YQwQNa1fjDrzXuLwC7PxqOAbNTlxG371luUTpRUCEgZJ76DnG4SpQhcG48CmiAvo1ZGD1HZvvUq1rIkFIWANIKiFa4fro1HAa0m5mpib2kATJ2dwuKaBJu5D6iF9ezP/Rf0UmKTZyMKqDY1ygQD4cw1lSzjcHUQsjpw/RB5p4EUVO11dbkcbkDcE5MPSBbKcPFtRADpS9lklx2VPc0ZO4SGLqpE8LK52wKOHAofeihBTeUCagpkkxIb6KhHB88KyzFtLifHWvamF7AfyuI52t0mjHSNpmTLQ15IcgFp4V6Dt823gQDqAjwradDWwLJlX59Qxsh8Gi+do1MJuWYInrRcQIu4GA0lsYEAmlBApav44exij+5Co9NiTgilpAARvYqugEokKzIbCCAcT8kk12o+G64R633lHxnmnHJR2oJoLEE5dAXUFdgLZTaCN9sooJIOapyQOXs7TB+EAM4pV72fS8ifdBJ0BaQLAJLZCN6sbwGknfWhnRDaQzi77g4tMyi04ucF40rfSP0yQJVzM3F9qFAgkZtBNZcgd1Q+V3EBSTWyRhUCklwxhpLZQADpCCB+nUwpvHhb9hYsnrCE7J0VVkqaLB42hYBiU6VjrQuZDQTQcbTvPiXn7xw4eytEZ8ATOq1EYPHVspFfAfVVrORQkP1ygMtsoONuAkSc+M9Vi3RO7Rs8PqdLBBZfEzsrDdNsLDBqBDjuE5mNyMS83pK/GM6n65TmtDKjuHUUDxUUctQKQrZbqE7oROoR18Z9wrdBnmZzz5w2lKm6fALU2nzhx5TK/CbW2gFImVVU5rhnFOSk/lnckcyPu+s6YwtL1NfouufbKHbdgN1u+A2tiS6n1e9/6V8Q54suT//IP81uvHrrDVMn1AgrCPcK18aN90HzOWfkqiHcckItV5LLEexGdTC9sZcxmkg02ui05dq4DdDWoZK11F1Kfy6O+ttPi4PHP1n6+/UJIP1x9fgFRCofkCpwwPwFRCofkC7g3C8gUrmAuiI55xcQqVxAZRz7BUTqP///oN+v4z915B8sK9rqD4C40tJOKxlBAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-5px;" />. Uncurrying <img width="10" alt="\bullet" height="7" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAQAAABOkSfeAAAAdklEQVR4nGNgQAVKDOUMu4FwJkMaAx7QwfAfCd5lMMaubCaKMhB8h01pKIYyiKkYYDdWhf8x3Ypd2X+GVajKXHAq3I0eLEQqZAA6G7vCcvxhiIBK6AoFGc5gUdaBGTwMwMBFV4pVGcTUDrhbVwFDgiDAEcdEAQDrRIJLiZcmHgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" /> we can represent actegories in a more familiar form, as a functor of type <img width="87" alt="\mathcal{M} \times \mathcal{C} \to \mathcal{C}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAAAaCAQAAACEXq8GAAADA0lEQVR4nO1Z29mkIAylBVqgBVqgBVugBVugBVuwBVuwBVuYFmYxiOOFSyLI7sOe+f55GZXDSXIS/BlLQ7Iuc8X56rYQTDHD+ubrhkFk07Mvm9EP12x6SIsObrexWHb+Y5qtXI2NuwEHyT7NtmjsWrP9Nvum2oW1GhsXB0yac7vA1+bu+5B2I5MtQQ8BHIcGK1dlIzdx85JxuwQ2DGVY6+NMXSA5/mNsNGQjxkGGLQxvY93MteS0XXd5feXqbFYPwTjIetWH1PqegVvaH/t9xvSX2lkhmwn6fy4jNXjMetWYfaJK/MazpmICxFXVvKXYSyGbr3UQk/FSCaIKpH1cHeqH1bU/yXsV1Mc1U0ZYvRYmdGMsZNNBmXcgWx+5RsIQwmEpTNTvDcDBSZvO3Bbl3wcEe4WNgZt5ouBXSRYg08NVqaL3CMmLkVY2mUY4clYvZrNsYi1QACEiP0mceeBifpUXI61bocVMsB4I8oVdyEbsgg6RKA2HXM23vSOO8uKkdSFuc1CYweheZdPvN+ug6w4nj52Jg5iXFysttmHWAAd5U9lbzGbes1IEXFdfHk4/3Tt5cdL6torx9BpwIY818WI28uQo88VR9a0onpzuFaEpmILtiO2cSf8sEXYlbJifFM4P8yagwQKOrqQelInLjvjce+VTsh1F/oxQibE32YXinjumPBiDn2zP5Knieq+Nzb1XuO1QXtuXYEhM9sVs7i+93VtKAWLcx2yNPEJ4HNsYTl6TDF9X1Y1Ntg8UsZlvQrlDgivk+8K0MrlOCBh59eaBoadNVQ8XCpEmBWxU4Da+NYVwTCllEhq+8vKKrcXci9WQaiaPCfH6icxG7pk3BxPeRKXNlckRsbk2L+8UDK6uLK0C88uDyGaClmXsX/jVBbe/xNLdi8tt9qbPNvG5Niev3AeqYUuDznKODUtPMSCndSKb33RH74J6uzPvnUPy5WX6bnmZVz8QzrpIHR0K2Mx7JOgQME2Mr5+guN36aDNksht5539mihAuAht3KTZu/4HCH9ldBgYTrM/rAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> plus some equations. This looks similar to a monoidal category, and the extra level of generality will be needed to represent affine traversals.</p>
<p>An actegory is like a <a href="http://nlab-pages.s3.us-east-2.amazonaws.com/nlab/show/para+construction">parameterised map</a>. A <img width="21" alt="\mathcal{M}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAaCAQAAACEcm1DAAABX0lEQVR4nJVVYbmEIBDcClSgghWsYAUqWIEKVrCCFahgBSrw1l30yQHH3PCdP85lWGYGJPqOiZZBRVkNYaVEASZ1dGCFJ9MmkHSiSB4rTTKQrRkmTdwvtL7SjosNS4U2wHRRisdb23IDEDyPq3hkxFUVcXMP8XbUheP32u2O0Sayud++ZpPQWVAsxiKbWmTC2iWNXGVoBq0lVfbyuL+9y/+Tn3psEpMDOHPZKYa0SWOWR6UyY1L7UG0ddbdXf2NjM1aepnBNdbdCy4DGKzyd2Ia67sN3JN10OXwWS5TKaVLfSNU/TfiiF1/Ex8mG3/bMaGojb/3d+78Md1LfAGnr61jvXSuksQqSww5DqEo07kFI66h55DDMhV0Kk6/IFulN2/zmTc9qoamS75LetE1tDzHF86/WTvvdu/fYTWu444+56Rm/fMAVLs+MdXZDfgWEuoKVpOwt0wy7vXfv1Z/xB/2CwGLDofgwAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />-actegory <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAAzklEQVR4nL2TWxXDIAyGYwELWMACFrCABSzEwizMAhZmAQtYYClj7RYSur7szzk8NB+5NAFgJQseEBK4JUUyhBVou+EKRqjwoBP3S1lDHYGZyjgK2vCbBlfmeuFRg3naSHCRYEOfK53fylqjKDi8FntzzLHvZFbC1aSSXO//dHpvoVajrKKPYpY934tPhY77X3H8Ax6u4VqrgeeNHZf+u+nTZuOz44klMa+w67njlcWJq4fRxjPzo+JM5albdFxoIxNO68zaSrTdmQzlEgCe31FnmZGs1A4AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /> is a map <img width="47" alt="\mathcal{C} \to \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAZCAQAAAAShlExAAABbUlEQVR4nMWXaxGEIBSFqUAFKlCBClawwlagghWsQIWtYAUr7F7QdcYHeA8Ce5jxx3IXP+C+FCIlJYyw4iV00qqV2DSSzCbx2YZtQVeGxopZvOlptz+5VpzPaDQZOrqin1QwH5pgPqTRtMv91GLe1ySMCqLxxscr6cl4qkWXFEQj6eeZnnu5P4UrSGMvJkzBc8ecD6LxE+edjjTUlXmGHBD2IE1993hd4MQE0egQxXUrqSR4HhBIY5vkFF9uOE4I0kyNCtGbxr3rQDSqWf8iA3769EGaLpibx2gcefyZgrcYjc2GVwTyyRpTNCBBmnx4n5HRMYa+sCtFs5jHlyupgd6UchqYxiZDpCsYDT5Z3uVvkKZfvfAsGWpdqeJlWP0NSKPWIDpfpy3ayzvy93vBNC6YH6+0L4ruz53X5IE0ekt5w+pTHS0RT2c5GthfwjCNPmRs30Rxe0Ce0qXpIY2kxUfaoSPDGt+sBjoMBs0Xzm4N32kQTHcAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /> parameterised by <img width="21" alt="\mathcal{M}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAaCAQAAACEcm1DAAABX0lEQVR4nJVVYbmEIBDcClSgghWsYAUqWIEKVrCCFahgBSrw1l30yQHH3PCdP85lWGYGJPqOiZZBRVkNYaVEASZ1dGCFJ9MmkHSiSB4rTTKQrRkmTdwvtL7SjosNS4U2wHRRisdb23IDEDyPq3hkxFUVcXMP8XbUheP32u2O0Sayud++ZpPQWVAsxiKbWmTC2iWNXGVoBq0lVfbyuL+9y/+Tn3psEpMDOHPZKYa0SWOWR6UyY1L7UG0ddbdXf2NjM1aepnBNdbdCy4DGKzyd2Ia67sN3JN10OXwWS5TKaVLfSNU/TfiiF1/Ex8mG3/bMaGojb/3d+78Md1LfAGnr61jvXSuksQqSww5DqEo07kFI66h55DDMhV0Kk6/IFulN2/zmTc9qoamS75LetE1tDzHF86/WTvvdu/fYTWu444+56Rm/fMAVLs+MdXZDfgWEuoKVpOwt0wy7vXfv1Z/xB/2CwGLDofgwAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />. And parameterised maps have a well-defined composition rule. A <img width="15" alt="P" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAAuklEQVR4nGNgwASrGHZjhR0M5QxKWNSjABcg7GD4D4SrwGwIDAWKvQOKdRDSDjIApNkFTVSQ4QxQdCYhzRCbMUEaVkPRwG6gkt04XUTA6biUQDTjdTh2H4MAxDvl+DTj8jEDOMD+448wGviYqIjC7mMXoNZ3+H0LAh1QzTBYDhQBaZxJOHFCfHwXqAEB0xiMCWuDACICBReA+DiUPM0QHwuSpxnk4zPkaR15PoY4mmTNkOIFGRJMxQwMAJjSbyseUMP0AAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> parameterised map <img width="53" alt="A \to B" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAAAZCAQAAABznnNzAAAB70lEQVR4nNVXYZmDMAyNhVrAAhZqAQuzUAu1gAUs1AIWsIAFLqRwH+uakvayu93LPza6vDR5eQOQ4QFe+M1/gw5WCH+dBEyYQy4mLHjfctwGs36WlbAYDjPZMB97CQcLPgtY+qrDNopPQMzl9V4CPl3AyA+a6aY+g9R+U2vmeU8ZOukxniJfn9/HRM2Xw0YtKEJHsxQ72erl1oyVuQ9zzJoIE1GJnTyopbbhimhBz3bMgz4RnWoP7pGU3qYKMDa9x00UkP4J9Xk+ZNIok3KYWoVSfYObqJHIimbeX2jspNqqm4PBFFpKlJsoQ1SDrEjd03Wucm0RweOJVcsSziFwl7U70DmTXMKevxqUSe2tPVe2oKcm80+xWycnPccmvRvU168hWjW3FbIT1SPRVabM6c/5N3iKndYqdwGsZ3jIrIEnV36NhV4s1bWjuWuJRaRbnOs76d7I2C4RNolR4CnSd+4j6pZsqXt2R8FRmiJyamLfYJTGGgvKTFTEdrd6U4k4n+qu39jiNRaZd+HDfW6cIumSspX+rzRRgRqzMO+eTVzXUwSpoz7AT5S7s7J9QbY1PYW9UdJXcBPly5QM2Uzuii19VvWHuYCxsjy5ie6QykI5sfIVLnsjrciU7BW5YnGQr9yhuN9Gxf94P4ZVunEGX7r4MjK7kwYiAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> and a <img width="15" alt="Q" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAfCAQAAABaZbWMAAABP0lEQVR4nJVVCxHDIAyNhVqYBSxgAQtYwAIWsICFWpgFLGCBhZQWNsJnb7e7luTlS1KAOQ6QoPEnF3odzcAbPFhQ+OQg4v+1RzWo7L+UX2gqoqGlzxMShtqfBzyfJiBIRbAyjZKARoZeI+v1xkR6YF4JSzSGR/nJiyyK4jisopE4gSTBOORKZsyf5HeOi9xV/PI7yzfD854dHfMtqnjzOceNoA+idtUW/PEPFJ/aXsaD1Awdm0XQkY/O8C34gh7pyCX5minPi1Zh29lE5Q66503hs2sKKKmRw1ugmqFQxYwodIGSCTXDP82qFXWFGlZ375rmPFU13JNytdMxfWBp8QVafbJbg8vteaBvix6zT41m2vaxjRqjXQ6y6cYm+S5eLtuf341Et8rOFt8YgeiJ7sDmx6ZCF+qyzzwEVZ3t8we8C5ibbdmAyQAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-4px;" />-parameterised map <img width="54" alt="B \to C" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAAAZCAQAAAB+gAM0AAACDElEQVR4nNVYi5GDIBClBVqwBVqgBVuwBVqgBVqwBVqwBVugBW5Z9MYk7IJKvLnHTDITEfft9xkh/jO0GIWBT3n4TdHbZ+GLaxaWu+1RTGBNFCvaNMO33cil30loWAZui7BJH5aBAyIQHB4ynsIIdgSgcrTDiAWoKbDP8DdrJPYZH49+koU7noHESJWca+BKKNr8ti3Ctk8oJFzxytcgIS5ROOLqQtj8ghkTsYSIHvsL8LRyMJgKywhEXORWe88j0+Jcquu5pIgKS10nXZnuWPiLc+dYTDSucQ3XK0xgX1xOmMPBM2n1jtzMLLtHXq8wh4R7zTIDZ7X2V49P5nfraxW2N9p+rV7iNGpBjld7fNljzGE0j2BAwHHdF7ZSNTscWjTef1xEXx5XklnmC4N5QcVQQ0Bit+GLFabg+HDfa2+QSI2P2tBrdlLaYiKHwB0kaoGdPy0dsQGUSkyol/Cwpc35tZIuayNWrVXLKK5sAA99euVuSyd5G7FqqpYrLCN2HM87XFUIqQZiuj4MaPU+9sn1F9imgR+qz62+JXIV5qtq7Sx0o150lUyZ6u6mK8x0lL87fON7Qm74lDxQLadQFWa/QCvFqzX+BmNWGuVji8wr9Z8B6KzYDXsLKndq6Fqk9lokA5xRScKRnTCuu+JI4MdyycYV88lsfy0lmdfb2V2gL2hPtelWB8TYNP4BwY8tSMhdpcEAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /> can be plugged together to obtain a <img width="48" alt="P \otimes Q" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAfCAQAAACy5QCnAAACxklEQVR4nM1YjZG0IAylBVqwBVqgBVugBVugBVuwBVuwBVuwhf3yo6tCgIx3e98+5m52VOAlJI+AMd8Pa7wJ0Ly2w2RmsUUzmO6TTDNYmHEBPtH08Gs0G/wpGHho0bygTfSbWw/PNngWP897xwDzTTfCHZizARMFPBmQLpqFAV7ghc/Dwoq/IGzy56vASwCvQI4gGiajo3Xr4b9VfX/CEU0nvkMGa3tEtH8WnvPKtMIIY3elrOG2QMu9We69id4/UH+7o0STDagHUQ/kY+KjDp6sBZ/ewWFac9FUcG5GUwoUDq2h0jfCBPICd6p1wBm2aoiUwlv1yUJvylKGSlUmOVTfIth19W+YXTULnmaAh1626OcAoYdva0o+k//riG0hkWm2RXQlcrIJYe/pK/Grk4iptQJyBnjaRGrRH97G5SaEi+FzMZlHmrmV6ksrB44lOtpAQtjexqfL1HcTwm3dQtHHmyKALLGrqtBMW0W8tKASwDWZ6DAhJGFnC9O7NjWDIt0MM00c5shpsQkpfcSaPUHoMqAZZjyMqmBK+uW+s7Qf55C9PDT3mGOXrq6SQmVFOGFY9L6kSIs4wqCosxS1GGaAPEELaS8OHklU5fHL+/8BrkWnOo1nGcC0rutWFlVX2EusokxpVqJPMwAxFIXzbkIsjn/fKHv4PV6c6UlkG3r4NAMOmoxceU4TbCVA+0sh1+9juN0EB2+a9H+SAYhIk41iiBwmTNX1nd4BfEoCjob0FeU4B9BzAzAI5mK1hCbIxt2/4Wr0DJ2Z4iI9YSRgebq2uh7XCJSL4djcZ/krPMxzYeizo/3H70UsTCdVTR15UjtGIGNnKmPWm7Q2RPR3gIfKcb+KsuRFvGtSX0wluB5w/J/ciRAcHS5nyomfXYidpQOm8lM3/EfwFVvUHOa/E+tbWLY/vtr8JRwKqbuW+Uo4UiNxH/gHUGVf4jER72YAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" />-parameterised map <img width="53" alt="A \to C" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAAAZCAQAAABznnNzAAAB90lEQVR4nMVYi5WEIAykBVqgBVtIC7awLdgCLdiCLdCCLdgCLXAh7u2qKyR48XZ457snLGQgnxFjZHgYLxz5XwDTmwGfdvOua5nAmWiCslHX8TCTSWbBp8e/BZ/29b4BeZL5FgNb0SOJiDTc5t2Atlk8pYT/iQE4PLdvw9Lmhh2hFQP2ROxrcL+ZJvs2KYt2JDMWenNflE/mqaW2fVBHnVI+qySPKEexNBAp0LDuElZKtVQFLRE1EZU1qvq/W/dCwlwlhyfn+oylN5zck+B5pCspzUoVKq70aQW/upVH1PzcHatOakAjLD+MEOic6qNBGlF+QyNVw7QdlqqNBKC5ttuV28gEajs8EyW/GDXjedplu6BOKjv3LHDBqFcjjz4abii/lmjVT8vRukrbeVzM36IpMq1YrS+KedeTKt+2hSbndjU+VWJrW4o1RkZKEJs5RcChjSJNcfwV31aJWk4DMlIC95xOjIdbhNLIiptOQAr4hH9exvQ1xerkvLSJ7LpnHyMHlPKRNikQ6r+R+UAVXDT44hBtTRGEwsZVHb/jZ+kqaVtXUwCbS98Y6KzOynSPFlXLtyWRWRLwQH2LWIRyGJs2yBOtvWUO52AcL2yqxvFAp0NVabjeKKJecj/RU6Wc6FIM6E4ifPGjtQC4cOYdXYnlL7Gh7ro/rL0FG5Zbe5EAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />, as animated below.</p>
<center>
<img src="../images/para_comp.gif" alt="Composition of parameterized maps" width="600" />
</center>
<p>Every symmetric monoidal category <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAAzklEQVR4nL2TWxXDIAyGYwELWMACFrCABSzEwizMAhZmAQtYYClj7RYSur7szzk8NB+5NAFgJQseEBK4JUUyhBVou+EKRqjwoBP3S1lDHYGZyjgK2vCbBlfmeuFRg3naSHCRYEOfK53fylqjKDi8FntzzLHvZFbC1aSSXO//dHpvoVajrKKPYpY934tPhY77X3H8Ax6u4VqrgeeNHZf+u+nTZuOz44klMa+w67njlcWJq4fRxjPzo+JM5albdFxoIxNO68zaSrTdmQzlEgCe31FnmZGs1A4AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /> is a <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAAzklEQVR4nL2TWxXDIAyGYwELWMACFrCABSzEwizMAhZmAQtYYClj7RYSur7szzk8NB+5NAFgJQseEBK4JUUyhBVou+EKRqjwoBP3S1lDHYGZyjgK2vCbBlfmeuFRg3naSHCRYEOfK53fylqjKDi8FntzzLHvZFbC1aSSXO//dHpvoVajrKKPYpY934tPhY77X3H8Ax6u4VqrgeeNHZf+u+nTZuOz44klMa+w67njlcWJq4fRxjPzo+JM5albdFxoIxNO68zaSrTdmQzlEgCe31FnmZGs1A4AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />-actegory <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAAzklEQVR4nL2TWxXDIAyGYwELWMACFrCABSzEwizMAhZmAQtYYClj7RYSur7szzk8NB+5NAFgJQseEBK4JUUyhBVou+EKRqjwoBP3S1lDHYGZyjgK2vCbBlfmeuFRg3naSHCRYEOfK53fylqjKDi8FntzzLHvZFbC1aSSXO//dHpvoVajrKKPYpY934tPhY77X3H8Ax6u4VqrgeeNHZf+u+nTZuOz44klMa+w67njlcWJq4fRxjPzo+JM5albdFxoIxNO68zaSrTdmQzlEgCe31FnmZGs1A4AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />, which means we have a clear way of composing lenses and prisms – as actegories! Let me spell it out.</p>
<p>A cartesian monoidal category is a <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAAzklEQVR4nL2TWxXDIAyGYwELWMACFrCABSzEwizMAhZmAQtYYClj7RYSur7szzk8NB+5NAFgJQseEBK4JUUyhBVou+EKRqjwoBP3S1lDHYGZyjgK2vCbBlfmeuFRg3naSHCRYEOfK53fylqjKDi8FntzzLHvZFbC1aSSXO//dHpvoVajrKKPYpY934tPhY77X3H8Ax6u4VqrgeeNHZf+u+nTZuOz44klMa+w67njlcWJq4fRxjPzo+JM5albdFxoIxNO68zaSrTdmQzlEgCe31FnmZGs1A4AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />-parameterised map <img width="47" alt="\mathcal{C} \to \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAZCAQAAAAShlExAAABbUlEQVR4nMWXaxGEIBSFqUAFKlCBClawwlagghWsQIWtYAUr7F7QdcYHeA8Ce5jxx3IXP+C+FCIlJYyw4iV00qqV2DSSzCbx2YZtQVeGxopZvOlptz+5VpzPaDQZOrqin1QwH5pgPqTRtMv91GLe1ySMCqLxxscr6cl4qkWXFEQj6eeZnnu5P4UrSGMvJkzBc8ecD6LxE+edjjTUlXmGHBD2IE1993hd4MQE0egQxXUrqSR4HhBIY5vkFF9uOE4I0kyNCtGbxr3rQDSqWf8iA3769EGaLpibx2gcefyZgrcYjc2GVwTyyRpTNCBBmnx4n5HRMYa+sCtFs5jHlyupgd6UchqYxiZDpCsYDT5Z3uVvkKZfvfAsGWpdqeJlWP0NSKPWIDpfpy3ayzvy93vBNC6YH6+0L4ruz53X5IE0ekt5w+pTHS0RT2c5GthfwjCNPmRs30Rxe0Ce0qXpIY2kxUfaoSPDGt+sBjoMBs0Xzm4N32kQTHcAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />. A cocartesian monoidal category is a <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAAzklEQVR4nL2TWxXDIAyGYwELWMACFrCABSzEwizMAhZmAQtYYClj7RYSur7szzk8NB+5NAFgJQseEBK4JUUyhBVou+EKRqjwoBP3S1lDHYGZyjgK2vCbBlfmeuFRg3naSHCRYEOfK53fylqjKDi8FntzzLHvZFbC1aSSXO//dHpvoVajrKKPYpY934tPhY77X3H8Ax6u4VqrgeeNHZf+u+nTZuOz44klMa+w67njlcWJq4fRxjPzo+JM5albdFxoIxNO68zaSrTdmQzlEgCe31FnmZGs1A4AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />-parameterised map <img width="47" alt="\mathcal{C} \to \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAZCAQAAAAShlExAAABbUlEQVR4nMWXaxGEIBSFqUAFKlCBClawwlagghWsQIWtYAUr7F7QdcYHeA8Ce5jxx3IXP+C+FCIlJYyw4iV00qqV2DSSzCbx2YZtQVeGxopZvOlptz+5VpzPaDQZOrqin1QwH5pgPqTRtMv91GLe1ySMCqLxxscr6cl4qkWXFEQj6eeZnnu5P4UrSGMvJkzBc8ecD6LxE+edjjTUlXmGHBD2IE1993hd4MQE0egQxXUrqSR4HhBIY5vkFF9uOE4I0kyNCtGbxr3rQDSqWf8iA3769EGaLpibx2gcefyZgrcYjc2GVwTyyRpTNCBBmnx4n5HRMYa+sCtFs5jHlyupgd6UchqYxiZDpCsYDT5Z3uVvkKZfvfAsGWpdqeJlWP0NSKPWIDpfpy3ayzvy93vBNC6YH6+0L4ruz53X5IE0ekt5w+pTHS0RT2c5GthfwjCNPmRs30Rxe0Ce0qXpIY2kxUfaoSPDGt+sBjoMBs0Xzm4N32kQTHcAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />. Composing them as parameterised maps, we obtain a <img width="41" alt="\mathcal{C} \times \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAAAZCAQAAADneNqBAAABaklEQVR4nL2XcRmDIBDFqWAFKlDBClawghWuwiqsAhVWwQqr4E7QTRHxnsDO7/OP8fT9DrmDKZUKrVpFalAmqSofYt+GZaOavhf9gw71JfVWL77T9yH7F0jA17DQ8rSvoZ38UR0R8jWcz37Iy/uahKjvLA6nuWfxWIvujm/DP7/5vg9bvYBAX4oMtKK5bJMQV20F8p0Hjjk9+dIx+S7CdbWFfPFoKkDfnI97LIAtZHo2IV/j6ur+bhMDlUCCvpRdzyGoBBL2HQu08C2oDBL01YX27RVUCgn6dk6eaivS8KAySNiXimH6BiMtCtC3HKb/3Od9NMvXy7vbcGusa/Ksj2b6UnIpd8J8t4UjAwV9eyeP9a/G7RKSlRZWtwQU9NXLkX44yEl41oy1oGtQ2Nc6eWjUZ0DKQEHf+YXTcqz3K6LjV4zCxnLeJ69AYd/fA9OSIR2OV2fxSKRjLuYT9m14jTw5F8vC2v99QN8Pj3EG9100zL8AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />-parameterised map <img width="47" alt="\mathcal{C} \to \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAZCAQAAAAShlExAAABbUlEQVR4nMWXaxGEIBSFqUAFKlCBClawwlagghWsQIWtYAUr7F7QdcYHeA8Ce5jxx3IXP+C+FCIlJYyw4iV00qqV2DSSzCbx2YZtQVeGxopZvOlptz+5VpzPaDQZOrqin1QwH5pgPqTRtMv91GLe1ySMCqLxxscr6cl4qkWXFEQj6eeZnnu5P4UrSGMvJkzBc8ecD6LxE+edjjTUlXmGHBD2IE1993hd4MQE0egQxXUrqSR4HhBIY5vkFF9uOE4I0kyNCtGbxr3rQDSqWf8iA3769EGaLpibx2gcefyZgrcYjc2GVwTyyRpTNCBBmnx4n5HRMYa+sCtFs5jHlyupgd6UchqYxiZDpCsYDT5Z3uVvkKZfvfAsGWpdqeJlWP0NSKPWIDpfpy3ayzvy93vBNC6YH6+0L4ruz53X5IE0ekt5w+pTHS0RT2c5GthfwjCNPmRs30Rxe0Ce0qXpIY2kxUfaoSPDGt+sBjoMBs0Xzm4N32kQTHcAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />. This is a <img width="41" alt="\mathcal{C} \times \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAAAZCAQAAADneNqBAAABaklEQVR4nL2XcRmDIBDFqWAFKlDBClawghWuwiqsAhVWwQqr4E7QTRHxnsDO7/OP8fT9DrmDKZUKrVpFalAmqSofYt+GZaOavhf9gw71JfVWL77T9yH7F0jA17DQ8rSvoZ38UR0R8jWcz37Iy/uahKjvLA6nuWfxWIvujm/DP7/5vg9bvYBAX4oMtKK5bJMQV20F8p0Hjjk9+dIx+S7CdbWFfPFoKkDfnI97LIAtZHo2IV/j6ur+bhMDlUCCvpRdzyGoBBL2HQu08C2oDBL01YX27RVUCgn6dk6eaivS8KAySNiXimH6BiMtCtC3HKb/3Od9NMvXy7vbcGusa/Ksj2b6UnIpd8J8t4UjAwV9eyeP9a/G7RKSlRZWtwQU9NXLkX44yEl41oy1oGtQ2Nc6eWjUZ0DKQEHf+YXTcqz3K6LjV4zCxnLeJ69AYd/fA9OSIR2OV2fxSKRjLuYT9m14jTw5F8vC2v99QN8Pj3EG9100zL8AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />-actegory <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAAzklEQVR4nL2TWxXDIAyGYwELWMACFrCABSzEwizMAhZmAQtYYClj7RYSur7szzk8NB+5NAFgJQseEBK4JUUyhBVou+EKRqjwoBP3S1lDHYGZyjgK2vCbBlfmeuFRg3naSHCRYEOfK53fylqjKDi8FntzzLHvZFbC1aSSXO//dHpvoVajrKKPYpY934tPhY77X3H8Ax6u4VqrgeeNHZf+u+nTZuOz44klMa+w67njlcWJq4fRxjPzo+JM5albdFxoIxNO68zaSrTdmQzlEgCe31FnmZGs1A4AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />, i.e. a strong monoidal functor <img width="141" alt="AF : \mathcal{C} \times \mathcal{C} \to [\mathcal{C}, \mathcal{C}]" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARoAAAAiCAQAAAAq5N5FAAAEjElEQVR4nO2c7XWrMAyGWYEVWIEVWIEVskJW8ApZgRVYgRVYISvk2gYa8If8ylbacC4v5/RHAUmGx7Ys01bVpfOoq17r0Z3B661Sn4koW41ugqruVfuf+DXq7IszRx29RiK+o4169cmEpqme1Rg9q/Q5+pDtF7X2OP/Q//o1nP/K71vmxcUlER9lgwnNoG+YomcNhQ/rYqr6lUpz9BYn6cerNMCT/ql+mhfHWVJ/5XcvChqJ+GgbLGi2OY1Sb6/oA2fu+vc33BmpVjdp1OPepsZ6fQhZ/z6/rmLQSMSXtsGCZrIjDQ2NsleEZ9qn0PTUakvHB7E0TArJb/PrKwyNRHyIDQY0y2BlDFCp1URMYHt+89UG8qqb9joL2P5GvyGFoJGID7MBQ9NYFO6JBVdNZi4Sc3+tG/D0RrLx4+noX/kNy4dGIj7UBgzNYC/sohnLonhGs7gvlwo8hg7oT1Qza2BZmusXFW8S8aGRiA+1AULTaWg2ExS7fkbT76ak8j5p/Pt9YdBHauJzZ+q3aj2GPj/mF9XISlddaCTiw22A0EzrjfT0E8poBsT8apsqVS3Knw78BG/zapBJjTSfn4bugRcWlwuNRHy4DQgatTNGLeF8pBrGlESl0IvaZBpO3+1jgyFT5hdTrePAX/sRGon4ODYAaJrDq3wSxSI3o2lsgQhVugakCnMIFxsMmXK/mExBDZ1MjtBIxMexAUAzHC4ZCWjUWg1etgzmxErLv3tOIDYXF9L22KDISPjFNOkDm6KO0EjEx7GRfKudk5WMxHiwTDDv7YMhMXLw1CTyKUwbNjgyMn4R1RYbZLTZQyMRH89GEhq3ESoKjZ/RdKK7Mj1z5IppwQZFRs4vogXle/K6PTQS8fFsJK5UtkK4P5ZJJ9Qb/BpNJ7xBKfXyOlbimO+3sRlgzjEnottDI/FceDbIK5vDZNPtdrFDN/k1GiXaP6WgWXpzvG4j6dd9euljsDljvHy62f1aaIbAyS5qPr1kLpPyRrIcbblMrG7zKb+YTJdMT04haMri49kgoHFT4O234ZQpVfYrlyI99FA/2ae/KDYSfjEpOM/yoSmLj2eDgCaWx4fN07tOErqts72v2q7p0o/bXTFh2JT7xWRAQPef9tBIxMezEYVGRbkL14Sp72hQ0X2iWZNEf/hW0OMOLbIRbEr9ohoZWy7+khuNL/yMeTYi0LRVvMISrgmXZzRpC0uNyH3xt2xkjBBsSvyiMhjwNhffwuOLP2NOGwPQ1HbzLDasdfbc7IwpS6ZTBs0rOVa1P0vYxxp2b4sAyAAcr8uksSnxi+rBqmm5e09ofK9oEsFpowfNWL2rBe5wOezObYPZ3fld/tZZ6GuOeNNea89Q4JT4IKJqk2NNvl9USEnvLXeXG43vYbt2+Cnjbfzdv7YSkBkHB1tmVL/6be6n/aY/Czle7X+5h8YXL7miNk4HzSUj+u+eUveWQn9Bc0qVQKOKvza8oDml8qGpGQv7mC5oTql8aCT2Ay9oTqlcaHqRj8kuaE6pXGhkXvYFzSl1sv9Pc+kbtP2nGF51R9zrP3eVZivq4YEFAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-5px;" />.<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> Fixing some parameters <img width="101" alt="(C, D) : \mathcal{C} \times \mathcal{C}" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMoAAAAiCAQAAAC0e47MAAAEFUlEQVR4nOVai5WcOgylBbdAC27BLdACLdCCW6AFWqAFWqCFaYHI9pCZBUmWf2/nTS4nm5zA+sqWpSt/ug6H7mbizW9AdQv8+ccxdFt0EAx8NcHP9+90M4u0wKJS9NAbC31q14sCXt3t8CGNEebtAd8s0NQCf9vncLn/l2PpVvRxrWLmTeCWVlDAuUOfzsc2Y8rkVfDZSDYzwNsH/PK70yY/izU0OiUYZPz8cKYs/t/nE8xckbhYGw2WhR5t8NP+HaK1CU8BryVfKR8hKxJFE7x5wLvUwDfeFIO0d0B719Z69NsyuLT43qPeW9ReT5N46Y4raIY2d/PDmIoQKdSbe7qaK6cwDTb/7FEYHDpT/ArvDIGEgXdJmNspihKwMiG7I0bqqgPmhubKPnq1bItEXkXoQnAJl2lNoqIEcOI2o7GyVcv3yqvjVbnW5jKfzOvmO1Z3WZ+cuIqsr6goL857arOEhemwyDAYUZxwuqaio5DMu6KvjKBMVFUVxWFEXZYXkXcYP82u83WBJ+7yqx684DIKPw4ZvLgurGhDV7K6inK67D4rJdqlLotanDs3Td1l+mTdkJqxkNegv2CaFYl8/FFO2QQJZkP16AXt285fuWNukbgkg3dCB2H2DQ0pDYnAK0qYUwe6hKRT3omDTYzB4WU11tUtEpdk8Vp0kB6RDuaCV5TAi+Vn3MrrNzubJPYKsf/uFplLsngXJLT6ZtsOvKL0zw2YOyRO4dFX2t863SJ1SRYvlhgklVce+HYnMmmWO2WIJE45gltkLsnkzXdK+sohpig7mX1t8aqeKiFyYBKkO4s33ynp6Y1XFMPsBNnisqOeU0LiotctFXhXpNrRAqeYDNHkFYV7W56+bKV68tQSat1ShZeuvninYJv5MXCunthNnVpOodgHYevv8i5zSxYv3l18Y/CFMaMM4BRF+4RAZ+mlePcrbOBgiqV8jEoU4lpxSdySxTug+0o9mwk1WrbG1xGUosRcIls88hb0z8Xlva/SIgIrguNuyeLtieCafKxge0kDemwb2+SgNSMcbfEz9X4WcUfMgrBbcB3WscAlDnG3ZPHuRIexwerBADxxHRFBwyq6cDb/EBTfklVTsIDektTPfQq3vg4xNfgdcllpS69LYm7J4p3Jrgx+5bD4S0XGn8mvZIoIKoQN3dgdxOPuxoyCS0SjKOdjZxY/8Rqe4zl7rYA9YGYsiN2Xy+A17AzX/krRCrRTVGpNo/O7pdphrXpOLXdHpvWZfCHvnnEugsE06agSJa+vw8jmYjlspUPbnxijh21fClwN0qAqxdsV/Ib8F0NHrkhIYKtfmnNoeXH140HfkZRhaHJ4rMUl65eCWoHI0CJK3IKt/pH0/wzzf1omxrF8mD2/hE9KFapJLfex+AMWzXIAuT02lAAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-5px;" />, what does the resulting functor <img width="131" alt="AF(C, D) : \mathcal{C} \to \mathcal{C}" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQcAAAAiCAQAAAD4tNQdAAAFQElEQVR4nO1bgbWrIAx1BVZwBVZgBVdwBVdgBVdgBVdwBVdwhfcQbKuYBJDQvn9+r+e/f061cIWQ3ATaNJ+DbMYP9n6FaIz990UC+kYzt9g1c8LgK/vcYP8en5TMTI4tp3AqQWvfRds3qvcOObjJpm3WZiLua3uXvlTwDdkstlUKvV2rP/YpY1s39n+9T9T2eToMwmdrFRqEwRpEHQjb42Lf6HFxL683stkmhhomZa/RNTvb1ayeV+cM5dqdsFR6or3O3l/td44GM7iVK21bQwZz5ex/Y2AOvNQ+GBPgC6YqE6Xt+8z2r35OA7W8aqOIjdotiEbnnumAO4P9/Dz5muheOOObAN8x2DurvZfraD3/0D95XuultRZ8tgRbCDq+T+v4fEo3FbOZ3QTFzMGvQTjyrqcBpgZc2N5wcrObwFxolL0Gvd7IGjCkZXx+Hz8BlHesh2I23qX8RFflTASU81ofrYOCQRuDX885yuHRO+4MF2AoJONkSUB19U4TfQLFbFo3xQPibl8QpCCZgifh6O+NgYpiKlM5eFDMRtCIZ6bILpwGCj3m9CEhycDGOCNQqC54AFcOvssXNtOCcwrtQgGVb7SMyuHV5zWQaJRjHjQw1IrVN+T4sWI2anfNKpqMXJVDdxjQ4zcnpPt4H5t9cyqHDT1oLPe8UAjlzDtcjcZeHKbmMSWLQAY28/4oHQr8k6HTxWI8Fv0nkO4Zilk5PIzl6jviGkUExTG459pBYYiOGRsbffg6nYxczaVFpkAhpFS15Is2ZMwc5qgLpaTzBpkgv8shXH0mjmI27ellV3KNhcqhdUUOCAMSx8eoOrkHWjk0e5EMKkbFEutYLUa/KX/QEb3FxMacBjHF5c57AXghpkAjd9aEysYd0MrB9wvpEYzn8YmFXJfL20pNc8JOSyGbMEpP5LB6x/kqARv0WQO6LF8KqVG2pc3Y9wuphLg50GgThDEXhDOIWEZWxCZsnlplV+Wg0CmAnXBKVnEPdLsDGqJKzaGLVmo4sRnESuRChWy0q14dLx8AYAu81hwUUZC6bw756VlMOSxoRNVZGT38/bsT0O6hM/9aELFYwsYJQRVcY0QPnOWYRrsuMYf8YEIrB98rPOm6UNgWTcBl9OOX3/bDGBexMcAXqXUWS7mOmEAdLxPMQd2QQrRyoO6WBgtdKVOCsS1WqmxWwAYu9eDrN16iColhmQXdBrTlHQPFzG9vY23ymAPWd8eqKjSwTc/GBtOoWIP0bgVEDKs7UB7mzuE8yqNte3vUIBpUKaWh32P5FcJ5Jb7ylEpQObfZaHTYsaohdc7hig5xay0Z3STisWjgyiFmDCllKLr/dhd313ctFakhpoTC/U02khgErC6Zoxw8MbxeCZdTOvAQW7xfTBv4Qy/0+qTPhqb07ys1odH1zMagEr1YNhvhtkMwx6HcveUyLd4h55weWkj5Fk5Taz0SbD4/kSAFqR1/RjJe5ceNNuwf94rymS6Oux/pXMLOu4sxJuZbmWymQ/YaOh9zym0fLmcIPk3dIhmJQexcJcC4o/TKnY28nsE+tgPvjPQAs0debuzdeGDrE94FOj1whgzqB+vzNDgfqOLT+9ncgIoIT+kO0m/7+EPUDeLlrjIYps0nsZv0djq7ztnI2Cb7e9ncwnLj1AIMVeW1REKo+IINfUYmQkMznit6oU8+UvIFC7DTEHkQbF7mDHrj+gt2yKQjGzHgOyMlqPezvC9QUL/DSkNX5XCJZE8Fv0gCVk9IRQ3PINxvTL/4CMa/lO44mD/H6L/C33LLokqe8k/hF/sLSAVi42RuAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-5px;" /> do? It takes some object <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAA5ElEQVR4nIVUfxWGIAxcBSpYgQpWsIIVqEAFK1CBCl8FKlBBx6mfz+d+3P7xgTd22wHRF4WqGIUyReH/F2aORDtHwfcdiRqvVZr8BIP8PafyaqNgk8fJXViPSJpsckHREnaUbqIr+cPVCwNRUUy0Yme1yJpiQr9/FlVXvCGpM2tJcUDK6o1pvsbx2GNhb3VYxkVGcfkVw7LJO3WgioojJ+xcgwPNQ6s6wD80V99pN4uc1Rmf5GaRZcUP2bSIfmsW7GWdaimuEGQ8Bbri5F8JTXH2qbOgamJKQ5dVc57NkKPxbEVnHZjvjdkiXaYHAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> to <img width="82" alt="C + D \times B" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKQAAAAbCAQAAABYIOxqAAAC9UlEQVR4nO1Z4bmrIAxlBVdwBVdgBVdwBVZwBVfoCl2hK3QFVuBG0Ffb5gQS7+2P9/Xw1R9aMBySk4DO1eDd6AJdu8O9odrriwMmd3HJ3ek60+9O1+7f/b/GxV3ZttryyWU8bcdIxEX6c3+4F9yNqByI3PBHZj/gqc30pkQm+0Obya5EE+nqQ/yaHYGxI2x29FLnLnsi96dATyI9+4xP+DwBz1iRyIrP+WWx4/191xyvcEk78rvkFvD0lifRjjOeUzwSPbmdGFmHAOY8ZPtAdMo0lkE1ChkZj2rFNccFjzWwJvPIOlzgnBOysNCIjF/hlQrJhWZ730S+x2P5oE9GMOdu004Gc3ZiSUB7pULaiUQKWYDD/tEfo1PMYQAKuVYviY8LL/rAboJGIc8QKVM1iTSviFCg1rhrnwVSyCIvbFRccxc5PXhlDWknUlLInWZp7AFQWWhs90ikkAuqHYo/4jRjg51IOTrqRPJUamnkFXIvEFmnW7Jpo+IVLbASKStk8ddULa5eqdTT6LcS51GKj7SIMZfnALEq3xZYiawlk9hYzx6p1NO4p9/5qa3bxoAWscc10SlYiZQVsseFxxt2Ki00Fjve37OOGfnobcnYFliJlK0JKhkqVFpodHDvMqGiqI1IucIs4tDSanuSmkLe8y63HWi3fKYfSM1tRMqh75n2LNR7qyUJWSF902I8UIIa15WyHUiJE7+YQwOR3mCKLbRlhZSfvmLXRlRX1uxASpxQOR6rRFZO38DrLERKixqq29gjjilGTyU+3RmxjbVjgMmUiixESgpZ8mWr2r1mah2VkkJe8XL2osAPxs8LFiKxQp6jcR+hlUqskEFW6ZB9kksEo/lw30Ik0sBynHuGxhXtVCKFnOvJjjO1p9fa60s9kVz9UL7VRJUduG5so5Kzoyf6SulVndWY/3jZipaQt0P2o1kdkROsO9cvmZMyJhbBdweRyFGogO/Us/k8Ytj2kwsRqc/TzzhzQv7FAV8ifwnwlOR/ww+CoOI9LKXgmgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-2px;" />. If we unpack the definition of optics for this actegory, we recover the affine traversal defined <a href="https://arxiv.org/abs/2001.07488">Profunctor Optics: A Categorical Update</a>(Sec. 3.2.1).</p>
<p>This seems pretty neat, but what does an affine traversal <em>actually do</em>? Lenses compute an internal state <em>and</em> interact with the environment. Prisms compute an internal state <em>or</em> interact with the environment. Can we interpret an affine traversal in a similar way? The answer is yes. The first thing we have to note is that unlike lenses and prisms, the affine traversal is parameterised by a <em>pair</em> of private objects <img width="101" alt="(C, D) : \mathcal{C} \times \mathcal{C}" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMoAAAAiCAQAAAC0e47MAAAEFUlEQVR4nOVai5WcOgylBbdAC27BLdACLdCCW6AFWqAFWqCFaYHI9pCZBUmWf2/nTS4nm5zA+sqWpSt/ug6H7mbizW9AdQv8+ccxdFt0EAx8NcHP9+90M4u0wKJS9NAbC31q14sCXt3t8CGNEebtAd8s0NQCf9vncLn/l2PpVvRxrWLmTeCWVlDAuUOfzsc2Y8rkVfDZSDYzwNsH/PK70yY/izU0OiUYZPz8cKYs/t/nE8xckbhYGw2WhR5t8NP+HaK1CU8BryVfKR8hKxJFE7x5wLvUwDfeFIO0d0B719Z69NsyuLT43qPeW9ReT5N46Y4raIY2d/PDmIoQKdSbe7qaK6cwDTb/7FEYHDpT/ArvDIGEgXdJmNspihKwMiG7I0bqqgPmhubKPnq1bItEXkXoQnAJl2lNoqIEcOI2o7GyVcv3yqvjVbnW5jKfzOvmO1Z3WZ+cuIqsr6goL857arOEhemwyDAYUZxwuqaio5DMu6KvjKBMVFUVxWFEXZYXkXcYP82u83WBJ+7yqx684DIKPw4ZvLgurGhDV7K6inK67D4rJdqlLotanDs3Td1l+mTdkJqxkNegv2CaFYl8/FFO2QQJZkP16AXt285fuWNukbgkg3dCB2H2DQ0pDYnAK0qYUwe6hKRT3omDTYzB4WU11tUtEpdk8Vp0kB6RDuaCV5TAi+Vn3MrrNzubJPYKsf/uFplLsngXJLT6ZtsOvKL0zw2YOyRO4dFX2t863SJ1SRYvlhgklVce+HYnMmmWO2WIJE45gltkLsnkzXdK+sohpig7mX1t8aqeKiFyYBKkO4s33ynp6Y1XFMPsBNnisqOeU0LiotctFXhXpNrRAqeYDNHkFYV7W56+bKV68tQSat1ShZeuvninYJv5MXCunthNnVpOodgHYevv8i5zSxYv3l18Y/CFMaMM4BRF+4RAZ+mlePcrbOBgiqV8jEoU4lpxSdySxTug+0o9mwk1WrbG1xGUosRcIls88hb0z8Xlva/SIgIrguNuyeLtieCafKxge0kDemwb2+SgNSMcbfEz9X4WcUfMgrBbcB3WscAlDnG3ZPHuRIexwerBADxxHRFBwyq6cDb/EBTfklVTsIDektTPfQq3vg4xNfgdcllpS69LYm7J4p3Jrgx+5bD4S0XGn8mvZIoIKoQN3dgdxOPuxoyCS0SjKOdjZxY/8Rqe4zl7rYA9YGYsiN2Xy+A17AzX/krRCrRTVGpNo/O7pdphrXpOLXdHpvWZfCHvnnEugsE06agSJa+vw8jmYjlspUPbnxijh21fClwN0qAqxdsV/Ib8F0NHrkhIYKtfmnNoeXH140HfkZRhaHJ4rMUl65eCWoHI0CJK3IKt/pH0/wzzf1omxrF8mD2/hE9KFapJLfex+AMWzXIAuT02lAAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-5px;" />. This means that we’ll have a prism-like internal state <img width="15" alt="C" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAZCAQAAACMPFaRAAAA9UlEQVR4nKWUYRHDIAyFYwELWMACFrBQC1iohVqoBSzUQi1ggSVh67qNBI69u/ID+iU8AgHoyUOAiKO5zbkuBQvsUODEccXvxNFc86oC/pzxd3ubi3Ag7jBglEHDGdMH+MJ3DFnkbRuMX2ATVmktz6GUu0iOK5pElM5edLzypn69vmUlxxS1YABNRnKcOK9pL14Jmo5rXvmoVG0Mhzk4Mzwly6hWJEUjJ/0nLNyAMViw5QZgLxcyd+HWI32K6nwo6KKFrsXywqrrtZ7IuVt3O+CW9TsP9UkeX0/OoqHB+lPjo15BzdZzz0qilaYct9qEGaPaGOAB1GpgwlAY9PAAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /> and a lens-like internal state <img width="16" alt="D" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAXCAQAAADADIVqAAAAzklEQVR4nI1UURUEIQikwlXYClvBClfBClvBClfBCla4Clawwh7C7ZcwOPz4QEacN0q0olIzo1Kh09i/IHEUujmqrJ8o1DnX6LVHMgnSkr84O3bm0Am8yjcmaDKsjXmRHBHM84tT+8QzeAoo/OttbsmQXoAUeOghAVJggwAroPPdyE6RSEPMBIAVOP4mB8AKXFJ/++2RAtOHHZ2PFVB6aGSsAK4KkAL6mA/UjhQ4uTn8C3wFttr9O+o3ErYnQwH9CwdwhkCfqBWdXZd95/8AKx6HaHTuPBAAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />. Looking at the coend below</p>
<center>
<img width="318" alt="\int^{C, D} \mathcal{C}(A, C + D \times B) \times \mathcal{C}(C + D \times B&39;, A&39;)" height="40" src="data:image/png;base64,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" class="display-math" style="margin:0; vertical-align:-15px;" />
</center>
<p>we can see that an affine traversal can do either one, but not both of these things:</p>
<ol style="list-style-type: decimal">
<li>Compute an internal state <img width="15" alt="C" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAZCAQAAACMPFaRAAAA9UlEQVR4nKWUYRHDIAyFYwELWMACFrBQC1iohVqoBSzUQi1ggSVh67qNBI69u/ID+iU8AgHoyUOAiKO5zbkuBQvsUODEccXvxNFc86oC/pzxd3ubi3Ag7jBglEHDGdMH+MJ3DFnkbRuMX2ATVmktz6GUu0iOK5pElM5edLzypn69vmUlxxS1YABNRnKcOK9pL14Jmo5rXvmoVG0Mhzk4Mzwly6hWJEUjJ/0nLNyAMViw5QZgLxcyd+HWI32K6nwo6KKFrsXywqrrtZ7IuVt3O+CW9TsP9UkeX0/OoqHB+lPjo15BzdZzz0qilaYct9qEGaPaGOAB1GpgwlAY9PAAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /></li>
<li>Compute an internal state <img width="16" alt="D" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAXCAQAAADADIVqAAAAzklEQVR4nI1UURUEIQikwlXYClvBClfBClvBClfBCla4Clawwh7C7ZcwOPz4QEacN0q0olIzo1Kh09i/IHEUujmqrJ8o1DnX6LVHMgnSkr84O3bm0Am8yjcmaDKsjXmRHBHM84tT+8QzeAoo/OttbsmQXoAUeOghAVJggwAroPPdyE6RSEPMBIAVOP4mB8AKXFJ/++2RAtOHHZ2PFVB6aGSsAK4KkAL6mA/UjhQ4uTn8C3wFttr9O+o3ErYnQwH9CwdwhkCfqBWdXZd95/8AKx6HaHTuPBAAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" /> <em>and</em> interact with the environment</li>
</ol>
<p>While technical derivations are available in the aforementioned paper, the high-level intuitions I presented here don’t seem to be. I find them useful, since they give an operational view of the affine traversal. We can also easily see how to recover prisms (by setting <img width="46" alt="D = I" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFwAAAAXCAQAAAAseeB8AAABMElEQVR4nL2X4RGDIAyFs4IruIIrsIIrsAIrsEJXcAVXYAVXcIU2gF6vB4H07snLnypoH+HzQohKbbRXYyNPS2X+k5oqPkQZDk9vji39vsPTwfd2ftlIfd0EsumqMz1OLSc5vnsOz3t2s2qm5jVKIwFqS+tGtdN7gqKuCIwF2uor6JMVV+iFsdfgnE9NNz+SCM+SMXpGK4LwKNtcFl4gwu8XjTMOIny0cRjheT+UWwcQjHDiAhSLkKQlPa0Lp3YDIHy+DgOyjDo0dmCEO/3WAQQkPNbNA2asJxjheVnjCj6M8PYoXiDC86F2bj4/C21ILXoIgAhf2LTmLO74r3TRTgGIcK1tpP44zkkM5/ZhdOcTtF+UqTCVe81TRxpU5uo0m7JiWT64StrBDbIvXBRp+wAKlAaR3pD8JgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" />) and lenses (by setting <img width="45" alt="C = I" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAAAZCAQAAAAbbfFLAAABf0lEQVR4nM2YDdHDIAyGYwELWMACFrBQC1jAwizMAhZmYRZqoV8I++u1TbL7WLaHG3crrA3pywsMQCJCgoy1e7kWxF99jQnOsMAV64KfK9bucd0CB3VTWBIGOWOY/uVahgveKOBA8keDfRKxFHzegk+e6NshjjJcVwF3MrbM2GYpj0hBJ76Tw1EtcDpobW3z8MA4eqYd14UPueV6MVL0nQuJg6GHzMk9Giq64SjPhetS6OVvtfzEGys6SYqO8qhw5D+m6Ep5ZiWPA/spRfc8H0/BbyAq+qTxQ2NERc/U4X8EuoeuaDxIULSnZmFtVxDVhZ87HZWieeewRlS0LmjOwcczxKNhgHzeQfTooAg6GhuiuOvo7sEHvbdZXeN3tu1HRTJXxa6j+zQ3rkk1TTP20hUpAaKiG930js4GwXj5vitaJFOu94Sf8HVqfHUk0ib5QaGw11tPj8Kx9+94OxmqaAfadjbJtGq1M2HljpMfoGwWfFXKAv1lUDHD2Xg5UfIH7Unf3HLGBdEAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />).</p>
<h2 id="conclusions">Conclusions</h2>
<p>It’s been known for a while that affine traversals arise as compositions of lenses and prisms. What I couldn’t find in the literature was the definition of this composition operator, as well as a more detailed operational view. Thinking about lenses and prisms as models of processes that either <em>make us</em> query the environment, or <em>allow us to query the environment</em> was enlightening to me, and my key to understanding affine traversals.</p>
<p>This unlocks more questions. All optics in <a href="https://arxiv.org/abs/2001.07488">Profunctor Optics: A Categorical Update</a> are defined using actegories, and actegories can be composed. Can we use this method to come up with new types of optics? In this blog post we talked about the affine traversal, but can we recover <em>the traversal</em> as a limit of some infinite sequence of composition? Are there some even more exotic types of optics, other than kaleidoscopes, glasses and grates?</p>
<p>And lastly, it’s well known that lenses can be used to help us model all sorts of interaction protocols (<a href="https://arxiv.org/abs/2103.01931">1</a>, <a href="https://arxiv.org/abs/1903.03671">2</a>, <a href="https://arxiv.org/abs/1910.03656">3</a>). But prisms, affine traversals, and the rest of the optical gadgets are not as well studied in categorical machine learning nor categorical game theory. There’s a large class of important systems that can’t be described with just lenses: systems with power to choose whether to execute some code or not.</p>
<p><br> <br></p>
<p>Thanks to <a href="https://ievacepaite.com/">Ieva Čepaitė</a> and <a href="https://twitter.com/dailectic">David Orion Girardo</a> for a read-through of this post.</p>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>While we can easily obtain the functor <img width="141" alt="AF : \mathcal{C} \times \mathcal{C} \to [\mathcal{C}, \mathcal{C}]" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARoAAAAiCAQAAAAq5N5FAAAEjElEQVR4nO2c7XWrMAyGWYEVWIEVWIEVskJW8ApZgRVYgRVYISvk2gYa8If8ylbacC4v5/RHAUmGx7Ys01bVpfOoq17r0Z3B661Sn4koW41ugqruVfuf+DXq7IszRx29RiK+o4169cmEpqme1Rg9q/Q5+pDtF7X2OP/Q//o1nP/K71vmxcUlER9lgwnNoG+YomcNhQ/rYqr6lUpz9BYn6cerNMCT/ql+mhfHWVJ/5XcvChqJ+GgbLGi2OY1Sb6/oA2fu+vc33BmpVjdp1OPepsZ6fQhZ/z6/rmLQSMSXtsGCZrIjDQ2NsleEZ9qn0PTUakvHB7E0TArJb/PrKwyNRHyIDQY0y2BlDFCp1URMYHt+89UG8qqb9joL2P5GvyGFoJGID7MBQ9NYFO6JBVdNZi4Sc3+tG/D0RrLx4+noX/kNy4dGIj7UBgzNYC/sohnLonhGs7gvlwo8hg7oT1Qza2BZmusXFW8S8aGRiA+1AULTaWg2ExS7fkbT76ak8j5p/Pt9YdBHauJzZ+q3aj2GPj/mF9XISlddaCTiw22A0EzrjfT0E8poBsT8apsqVS3Knw78BG/zapBJjTSfn4bugRcWlwuNRHy4DQgatTNGLeF8pBrGlESl0IvaZBpO3+1jgyFT5hdTrePAX/sRGon4ODYAaJrDq3wSxSI3o2lsgQhVugakCnMIFxsMmXK/mExBDZ1MjtBIxMexAUAzHC4ZCWjUWg1etgzmxErLv3tOIDYXF9L22KDISPjFNOkDm6KO0EjEx7GRfKudk5WMxHiwTDDv7YMhMXLw1CTyKUwbNjgyMn4R1RYbZLTZQyMRH89GEhq3ESoKjZ/RdKK7Mj1z5IppwQZFRs4vogXle/K6PTQS8fFsJK5UtkK4P5ZJJ9Qb/BpNJ7xBKfXyOlbimO+3sRlgzjEnottDI/FceDbIK5vDZNPtdrFDN/k1GiXaP6WgWXpzvG4j6dd9euljsDljvHy62f1aaIbAyS5qPr1kLpPyRrIcbblMrG7zKb+YTJdMT04haMri49kgoHFT4O234ZQpVfYrlyI99FA/2ae/KDYSfjEpOM/yoSmLj2eDgCaWx4fN07tOErqts72v2q7p0o/bXTFh2JT7xWRAQPef9tBIxMezEYVGRbkL14Sp72hQ0X2iWZNEf/hW0OMOLbIRbEr9ohoZWy7+khuNL/yMeTYi0LRVvMISrgmXZzRpC0uNyH3xt2xkjBBsSvyiMhjwNhffwuOLP2NOGwPQ1HbzLDasdfbc7IwpS6ZTBs0rOVa1P0vYxxp2b4sAyAAcr8uksSnxi+rBqmm5e09ofK9oEsFpowfNWL2rBe5wOezObYPZ3fld/tZZ6GuOeNNea89Q4JT4IKJqk2NNvl9USEnvLXeXG43vYbt2+Cnjbfzdv7YSkBkHB1tmVL/6be6n/aY/Czle7X+5h8YXL7miNk4HzSUj+u+eUveWQn9Bc0qVQKOKvza8oDml8qGpGQv7mC5oTql8aCT2Ay9oTqlcaHqRj8kuaE6pXGhkXvYFzSl1sv9Pc+kbtP2nGF51R9zrP3eVZivq4YEFAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-5px;" />, showing it is strong monoidal will require a distributive law between the two underlying actegories.<a href="#fnref1">↩</a></p></li>
</ol>
</div>


<form style="border:1px solid #ccc;padding:3px;text-align:center;" action="https://tinyletter.com/bgavran" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/bgavran', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
    <p><label for="tlemail">Want to subscribe to my newsletter? Sign up with your email below.</label> Or subscribe via <a href="../rss.xml">RSS</a>. </p>
    <p><input type="text" style="width:140px" name="email" id="tlemail" /> <input type="hidden" value="1" name="embed" /><input type="submit" value="Sign up" /></p>

    <small> <a href="https://tinyletter.com" target="_blank">powered by TinyLetter</a> </small>
</form>

<div class="commentbox"></div>


<script>
commentBox('5769281040023552-proj');
</script>

        <div id="footer">
          <div class="inside">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>.
            This theme was designed by <a href="http://twitter.com/katychuang">Dr. Kat</a> and showcased in the <a href="http://katychuang.com/hakyll-cssgarden/gallery/">Hakyll-CSSGarden</a>


          </div>
        </div>

          </div>
        </div>
    </body>
</html>
