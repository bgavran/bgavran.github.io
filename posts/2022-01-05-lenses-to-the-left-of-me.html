<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114795894-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-114795894-3');
</script>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="author" content="Bruno Gavranovic" />
        <meta name="viewport" content="width=device-width" />
        <meta http-equiv="Cache-Control" content="max-age=86400, must-revalidate" />
        <title>Bruno Gavranović</title>
        <script src="../css/jquery.js"></script>
        <script src="../css/selectfile.js"></script>
        <link rel="stylesheet" type="text/css" title="hakyll_theme" href="../css/theprofessional.css" />
        <link href="https://fonts.googleapis.com/css?family=Titillium+Web" rel="stylesheet">
    </head>
    <body>
        <div class="highbar">&nbsp;</div>
        <div class="container-gallery">
        <div id="content" class="inside">

        <div id="header">
          <div class="box">
            <div id="logo" class="name">
                <h2><pageTitle><a href="../">Bruno Gavranović</a></pageTitle></h2>
            </div>
            <div id="navigation" class="pageslinks">
              <nav class="menuNav">
                <div class="menuItems">
                <a href="../" class="posts/2022-01-05-lenses-to-the-left-of-me.md">Home</a>
                <a href="../archive.html" class="posts/2022-01-05-lenses-to-the-left-of-me.md">Posts</a>
                <a href="../papers.html" class="posts/2022-01-05-lenses-to-the-left-of-me.md">Papers</a>
                <a href="../research_philosophy.html" class="posts/2022-01-05-lenses-to-the-left-of-me.md">Research Philosophy</a>
                <a href="../about.html" class="posts/2022-01-05-lenses-to-the-left-of-me.md">About</a>
		<!-- <a href="/contact.html" class="posts/2022-01-05-lenses-to-the-left-of-me.md">Contact</a> -->
                </div>
              </nav>
            </div>
        </div>
        </div>
            <script src="https://unpkg.com/commentbox.io/dist/commentBox.min.js"></script>

<div class="info">
    Posted on January  5, 2022
    
</div>

<h1 id="lenses-to-the-left-of-me-prisms-to-the-right">Lenses to the left of me, Prisms to the right</h1>
<p>There’s an interesting way to think about lenses and prisms. Lenses model processes that perform internal computation <em>and</em> interact with the environment. Prisms model processes that perform internal computation <em>or</em> interact with the environment. Let me explain what I mean.</p>
<p>A lens <img width="126" alt="(A, A&39;) \to (B, B&39;)" height="18" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPwAAAAkCAQAAAAHz5+uAAAEhklEQVR4nN2cbZnrLBCGYwELsRALWIiFWogFLGChFmKhFmKhFnqAnO5p0xnmg+Ft9n3yZ682+4TcwAxfu8PwO+SH8dtF+FX6n/C6DI/h/u1C/CI18ZqGYFmWJl3Ti2x/f3apXO6rpXnXmTg91cBrGlb27ZdhlpZM6HZPL3J5ueN2mqqXcPrvpOY1pfbCzRFjeshVXjaBmy+B67Xoi+ETW4RzCqlBfF7X9PmizL58RzUvl1rIwi7Qmh6zsu/WuIX02TGcricIsDVOPsWtmMqdm7H/ueZU6twboyJK8B3VvIKgIudSlBv7fo3blj479pIcGSajp2pFcfLlbY6ldOV9dMR4jkpe+RbPLEhu87dSGAvBblgqiYZxRiOaU0DG1pfyjhfgG0ocRzWvKGiNOb8Es4qH3RYEsBc00B6iOa1IFYzlHTWpiuOo5OXS19z8PpZXD2D4kQtzu/5MTI7avjjE43B6IPdM6ornOCp5LUB+wLSWFrSUh7b3PdjNVYJibiRWU6m7sOnSnOB8/Pzdh2IKzHFU87qh7eWoPMb8V5zWmTzm5isrULMyU0LahD2Q5oTlY/3gjuOo5OXKxIAj97Mo4NWBq9WNX1pagd3guU/G8nEsq2qaSNXqWCm1Z0MPL7mmveK1bpvZRHIURS0OJygfu7KYelUmqHZHlFdgZuvxzeDR2PP0bqvRfCIrCvohzemYj8f0SV5quapHQxaOKC9uxb8/LGeYljm13i0aLuM4wSyB5hRK+A1v1y35L+rhqIUjymtljZP9oUe2Ldq2uHEbKk9T6T8cjDSnFYxbeei1KZuqhSPKixc6j3s9a9MSToubbcXvmy4bw5HmhK3N7SNzzTaNhWNTxee88r5DtDVUfJtbveLHsn2huai9SYrTno8hD+2qnY1jQ8XngZg/XBEtFKVWN6rHH73pa080VJ+nOO35GNZDlRhtHBsqHhpD6tfuWt2sQ31MMYKzYE1xgvNxllNWvI0jyosaJXtw3OuVFd/uZlvxkb1wS3HCd98u4Gyclo0jyosCCR/h0a7dtbvxZiE8zYJGVOeE5+N9snoXl9nKEeVVX/0OaLuCqoqCKHODtRqevZWs1lOcsHy8j18+VwhpVlJHWCivsYJ8quS1z9W2fKCitpwqc8PvtDqMcRHFjhonPB9HJGBTrOSOmCq8NvArl3rnHc1reyB6D9yPSqaWu8Gq45fpKlx0hjllQalqTJWz76BB71xjpXOEVeUVgZ64vsxwj8Ox28t3r0EnlkJBj9G4wVqIIZZE0o1liNN8KP3rdUu/gVUtzkrrCKvKaxYjwOU7n4TFz5rI5YUDLktO+/P7nxomeG1me9yzKZqjJIfEesiOU1ZfVlkkL9kwp6bQ9Q/3FsW0yFJ2nLL6sspi8ILzjVSu61FIx1xj6ykbTll9We1PYPDyyv2jd4Wuh5+D2dkbvWw4ZfVltT+BxUvytzSw5q6DlUl8KraP2jll9WWVJeAVGwNpzxbsyp7eOdTKKav3uwh5RbOjy9ZaT1Wy83J6SszrDMH0U+50/+TjnJyeQnj9ARpALmNLiFvOAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-5px;" /> is usually thought of as a pair of maps <img width="89" alt="get : A \to B" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAAAfCAQAAADpAV/TAAADfElEQVR4nO1ajXHzIAz1CqzgFViBFVjBK2QFVmAFr8AKXoEVskIqgesA5tcfXJrv/LjrJW4CQqCnJ7XT9J1YJv5pE/53zNNrWj9txCQmFRkrPH+AhV8PBU5WnzZiYhBNEizBA2fH4ODkJzyTExm5OIdFRy7Azca2gSvUgxlbaPCUTHq0hc/Isv1AwPjNbO0vQIAdz8jzxVi4jFqWJpbtBWQ88WecrBLZYTYWilHLPoYmpdkEoYgG6SeAdjwiz+lYJ6+JZftAAQvag3yZV73wvHRkcUZGWAuHyUw98I5hNkew7lvQl25dipErEx8KEZHZxmyYURzUTg4BY+8Yjpyr8fOtCgRTnv0O6x6MAtzSjhQjo7DT+f1R2MwKP4lxJD/dmRkm3+AZgVdiX2Tepbg209vXOSdsFySOcGiot5PnS5ERY2RiCLMgYhkEgDzeSSPIXCmyeL9HDubeuzpGfjXrg9k7lJeR+z0hS3fvhJCRZ3iChchayhYUPuRuxk70LhKXU60lvCOo1cii+Sb6puvuNR/yaJsqEiZqhTeQAx6lw9qCrM3MRL+YjRPduhxNe78fp5FZcG9HFNbU3ML626yi0YRMoHMXbfFcihDeRDLYGjKxe4/HaeQt2LwaUo5Q2L2uloapms5qjmSLSJ+CWDkTkT3dMMM9wnScfINGaWRkOr/XpSucbOPuytAVXbSQSN11M2mZRtSnOxHff58WaGO6FpjyWDBkcosuwm+Vh6WhmrssTlH/xitNZrap4Yalz8gp6f2LUYwcy9b9az4EaqnaSIwzMoLknCxO2tVnZFFINmMYmUXnZAOcLJuK63SXbYnq5x1nJypvopKTfUbu5e4w5Vn0r/l406GlGdlmtmdKpfCTdvAnYlEnk+Ouu10LVnRA3YZEMnx7O7mte5FmZBnJbB7cQoQYzexPpE8TU3D7r2PdfK8KerOurKYZBdG35luCbFRCipFlhkZ2vEOGQrivp4lYMMHDE+/b4RJZ7AOUy2rsnKTVig3XOJVcwdp0YDGymsEztvdW5HUGH7LNHRIwsgU3YcXAATIoRGzFhEW2qmi1yEKwK0e1huy+Baq2R8uzdhaeUdcb7Ko5Faeo3SrK2B2yDc9vRHvjtdOyabF9oxN8jXyjC6RXsZNTv+3GP2MJUshaEiI32sGcLI4Ko77hd6MB7PgHutwfUG9cwA+xxf4htjrhAQAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-4px;" /> and <img width="130" alt="put : A \times B&39; \to A&39;" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQUAAAAiCAQAAAD8QQQgAAAEyElEQVR4nO1ba7mEIBClghWoYAUqWMEKVqCCFaxgBStYYSvsZWZ8AIICirv7XY9/7vpiPBzmpZexB3kgGP+0CUH4FTt/FjV7s9enjQjAr9j5w+gUxeOnjQjAr9h5iJpVnzbBg5eiuP60EQbcXH2fnUng6jG6G8eTrHdsndrfWPFWoNstbrTtCG6uvs/ORPTqQfobxxNqXbVqTCBVLFulpABrq9Uoleq3vNGyY7i5usnOShGWU28VTsqQcQQXBI5aWnsLFW91W+DXN+XlPq5usvPloOw6FOrBBnzAeyE9GXeNtlDUvTtwHcHH1U12lpmLFIjP8gNS6D30cbSFnG2j/hL3mrULH1c32dlkVRxHZyedzjovYMTGsb/UpNB9VXnm5+omOzsPZdegRzU3+HjHut4TSxEVK92ZAltsqfCO15Znr5Ni93F1tZ1ejBnXK+TxALHQv4/3dP4WEEVjahBfpqCnjeLiwDieyvH9XB3YWathZ6UU+Esaq4bjHnsdlss5xVJgkQZh8wsCzo6vMWD66CqhOeU91B4xwJ3i1pwvU2ixZ5enXpIn3Hg8V8ugDeq7x0t71FCtuZFS7eN4U11dXKtY+dR2GZEa+ts//JBUDEot8IQ+nksM8UJwZwoFBsN8hTMP8nxupHDF4JH66XK4ZCWuVYTx6XjBKMboTrVx0ByWKbwTKgBuiOe94/xN2GJIEYKdKcCygPZSlzkPbxM9TipXaupo9XfWVNfTtM7HK+t450g/wnoKKb0uk/Yxot+oiyFFCGTviCFy3QZlUZO5dQueOqUaS+ZqdnF2wiemW8wKa60V/9p0rPL1FISl67jW8yyGNCHQaNt1BenXmLmkLdH3xAnuBFe0PvlmGuV0CzpeoKNZp75k25ec+XoKg0VHHxliSAxpQmBaP9EE1RV5G7ilYnmMCkRnuUKyzGlsDTXZx9MzhXhAXDbfCo7R2UaT3JYS1iJYoXcaw8DRl6ZsY6DkLuDKdv+U56+TbWcG6ZlCLCAJEtbWeqfHDQgNY3j6ZEA6/N+Md1SgAthPcryRgw/zC1dwtckUuOEWKTzojue+TMGVp4f2Gwn0Wqbw9hn24c4U6L7xUogF1HHhnvY8V45Mgb59mycfqge9QHFNe55MQTjvKSIebxYCIEUMvkxhfiuZr81OQgj3s+e5Yq5MoTeioF3+rZlCtVBhZgpXicJOggjhPTRdCIBYMfgzBfKkOb8FqmKmkJ3nCtFaJ1N94P86Z512uahWDzHiYOjQB5TeNRf2eLYQAHFi8GcKFINzfmMZ9xbiLFfLoCY9veWYGuNmJWYKYjpTH3C9fm+thDaey53MN6SH5hICIEYMvkyh3Qkc16C2srN9nOVqAmUK3eIGtxFKf99QqOPtJAV99Q+LMe3BWglpPBdKfv6KhJye2yGucAsBUAeuE5dz5epqeh+Zt73UBcv1Cq4mUKYAr5RqtfXKhG1srNVgLU49dL9gvbV47joA+AqJ+46cph2Otui1itrOOgar4vaP5nqOGdWBBdWmsl+3AZnIjdDgcw1XE9aegtj99ynz1bPY0FE49j1IRcqL/NPI+bnJgx/Ctqfw4J9i21N48E9xnMQ9+AeQ08fRg/Zt44N/iUaVFwJLRPm1/5v8IDP+AI6i3LcvDeByAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-4px;" />. This is the classic presentation of a lens. Instead, here we’ll use the <em>coend</em> representation of which is more symmetric. It’s defined in terms of two maps of type <img width="109" alt="f : A \to A \times B" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANsAAAAfCAQAAADE83BpAAADbElEQVR4nO1abbGrMBCNBSxgAQuxgAUsYCEWsIAFLGABC1jg7ibtvTRNYHeTlL43HH60w8ByyMl+tkqdo1Fa1YTrUtCptvATZPhWXieo1KQGoD4oU/AptdrUWNC+FJ/mZWC1348Rzvccx6nUbGk3aoUXKIcJrE8F7UvxaV7aOshmN4v+PVqQDdd/AD1I6OHiDj5H+FyLkW0t0bmYfSmu4aXtUxvvbKUWOpf5YUCD0r6hXECPni3V78JVvEzERTrLpTs3UH+ENMZt84WyXcVriuRTpwahwmg/ENlr6/gmGBiuxHW88Il94HxDlc3QLkvCBAHY5dDNfsuFNXGxubyOnlYxqsBwZlO/XAjtyESLpQnAugmhqZTIWJI2HJ/X9rjjHZgj6TErltlIJYkrPFfrrvjtfOdWcBWxPN3dMz/u0dQAQIaB15RCwquLCIe2OJ4fy2zYFixnK4xNnquiXMN3TnwWlMpmF8Nzy1YneK+MV0g4rmjhzFbZBmykuYVmCbGxa676xfp2EGZkGM53ZxByXr5wfNH8zFbDGWy1R3reN6yF5Jcvr1SW7FUrZgPJYCqF1144vmhuFTEr7w+cU/X0DTgWrSO1tyVKjJEau095HpfK6ymcRDT3tHdXwSpjodqaM5fkvvXX5ZyKNLYNvO7Ceot0Xk44iWgqOgdx9SWpjUATktxAAcbr1yn3Qlie2ta2kmMhdk4yXj56YZPuMluIKXlCou3LlgEmfe0dQ5TyKyvu4YIczd/kvPbA8LiICixzsOYbLVj3BQdboboo/5wEMYD3hAZFYeTg5QbQVbSPO0I4szmrRNnKDbZ0sL7TBWQbWPklB6+naAi+cPEJfxfs5wKYMg+b/uAnfYf8c5KWuQ3See1FQ/CEi2c214aslEqDG9EVcYlMdM/klo03lUzn5YuG4AgXz2wuvxKcqFHcX7Npw63moCrLOyfpWHVwOq+QaE8etLeKZbbhIHgGHsabMJwPtyrYz2u0MHYhIhyoJBjJWyAPr7BoiI7kraFgXMO9bu5PzND8gmQ4uWPadVH+hpi9LitHTqVaycVrOEgp7eHKtAf95gx2Gfl5ErWL3wT+z0j/AUr+T+tGZlQPD2uK9Ww3sqOysRwrlp5d/N+4DH/zgPn2tX8HOF9HX+syluE3PoAGyk3838gt2tfjB2cYLCRr7H/AAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-4px;" /> and <img width="114" alt="b : A \times B&39; \to A&39;" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOQAAAAcCAQAAADbn9tyAAADq0lEQVR4nO1a4ZG0IAy1BVugBVugBVuwBVuwBVuwBVuwBVrYFvYjsO4nGCBBwbuZe8z9OHeE8IJ5SbRp/oBDNuJpEwj4HVY+iKF5N6+njUjid1j5KBZNkXraiCR+iJVD0z9tQhAvTdHwtBEOMLYCVrbaw6seb/1XHkKvs1RYZ8dk9uaPRV8fTzojTchqK1qXAsZW0MpW/zQaL08VTKt1YHZIfaJnvSYQIr+j13uFHc8OIVMlDujA2EpYqfTPsqhRgN5QuhVfx4U0q3be1dbs+WgL/P+TskGcraiVwtxSGq02aquykospkOUNxpZdbWoH/RRwthJWDlUCHujS9IAj18Dm7fHdw9RYJSbRgbOVsHKuoA7CBIkJDXNlASuOyPXOceTyE1L6L0JsJaysoZCrWWE0plHWijm7ZWgZrpDN15b+M+O9hcfr4mHF2UpYWUMhIXcEyAN5cbw/d5wB6kEXgpBCusmOvLlXoi5FuBBbCSt3hez04lPyXEK5wq21gPr2YBplk0PAlTAX57yHFHI2/ZFSVeN0IVDnsGVgFRKG0GP9ToNjyyggpoNG0U3DXMl1I66QrWlzLQWLf0GMOxjy2GqsQqovOSJx65sdiIXj+HckaPrwXcl3o6+QQl+BZsBSPCeYM5/3bLbESbW2qKP4/Q+XNMUqdY6u5LvRWqs+8WYfm7ZoLN6KAw3OqUuz2TrXkOutOaz0ThS3Sbe7MseNdrXziYakQRUvgjrz5PMOzAW2zjUktUCgwVfclR2arStz3Ng4vZsjbC5buiHX6eOiWFxeYMuvIcWtjgQ9ct88qIxiZ8xsI1iFxNzldnVoEKbRnjMU8chcYOtcQ/bBzfMBwi29MbPnh6CqGCnSf1iFxPFmhniAv5f0sKGR9lhcYuuskLHNc4HlhvTejoVtHrfBujIGXCHtrDmO5GLWTxjWHMRxia1zDqrYIScEiWZtkuXI3Y0AvitDCrm/+aCTnIOZpeoX2Zq8rd75lhxvLHC6FUc3AniuDCukPa5lvwbomZnGRbb81yIz4ZzSzJuC81Ad6bsRwHFlWCTmU+18P3jd1stsuX0cSaCJ1qLrIrkWrVuBuRFAd2VIIedIyL0LYCX9eb/OVtOYT6/26V6EW9ItuvbzDRCuDzZYxPu5ANyNgIF0RrGgJPS99p1H6WbAQo4b97BlJoKvynrTuqKc0tRL6PVQP/nyvXn1VSy4zZGku49a0Ecquk3PW+M7AGrgvoutDzpTs/zhPvBf9WXhH8/8WsKcuMSEAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />, meaning <em>forward</em> and <em>backward</em>, respectively. For any lens defined in terms of <img width="24" alt="get" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAcCAQAAABip59/AAABlElEQVR4nLVVfd3EIAimghWsYAUrWMEKq2CFVbCCFaxghauwF7ydL8x9eL/d8J8xNh7gAQT4vTiIoB7wy+QFC5gnAQwCvJ4EAJgQIj4LERFiehaijDLhIOBxh3aNkdIXftUV2HocAizr8wmQgYzpGvxtqjDLBkpDwi8c2jXaY3tHh3Io63M4ArDYD3PT5tqCntm9sFPtndAumTDoIAtASlwzgAXj4xJEAAMzkWslJURpmq4uNLMrtP7rAzPhhcN3jIsom8yBGOA5DMwEkSVJSowJVYsWardQNyV0Z8XXl0yY6kJ2D2fCrfbjlrxkwlcXfEdKJsJFpQeYIBe5ezMLLW1/YjLARO+CM3ENIZnYBXNdv8iZsLsQquXJt5M9mm0+dqrOiGzhstGp/qm5pYA+ko7uPdcGz2CiUTDxyUPOAb9Cc4OYTxYoOsnrClMbJj5BlDoZE7pJGystH1on6QxAimSCh0FnrxDvlT4stmPi5xI6Jm7LLHam6nbqbfGb/RR3qL4plg0/dVX5hrZxkNDu3OGmG5E/ezm/pwDRscIAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" /> and <img width="26" alt="put" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAcCAQAAACEjlQ7AAABtUlEQVR4nL1VDZnDIAzFAhawUAtYqIVaqIVYwEIt1EItzMIs9JLwl0C33e7GXr/bURLyII+kxozCbDZjh0UXuJvTTONpJqS5j6cxZkWi7RtEGxKt3yC6PVdoMYB/EZbfwDhhdzzjm1VT8bFoo2dGmjONL+gAD2txLzuOPf7OTH0W6gnnHFpOtlTyk1fE8c4PneeWxtDS2OQO6AQmlPmAt8clu+X/NTCBZA9G46lCa9r51gRa0qJsnxv7Js6c8bSGch23MvoU+Cgn1LuloFLHlzUUc+k6J0hE0W5Z5hp4YjU0flVDS+cUVKpa+9sKybDa6VChWkXeViijVchxqmpt0ZvsyW8rVMNqp4Vncmi6cYewXgX9o0I7V1UGqDep0FwSrhV6QBmaQPFO1VS1RDUolITL5Pu+L1QneYd2TIxUbFVEEyvkk2cGqVjXX35jo0JbETc0NLqvWbSHRCR3fhSioHqiQFSIGuOCz46O7sLnjvMUmDqJxbCBfevO6ZzAcw9oZA1Re+9JMnTz991nw17MKbz4WH0KfQ0NQl9Dg9DW0BAAlyK1F+ha5Eex4lX0fGnh8aX8H34AmPHU+MUVlS4AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" /> maps, we can recast it to the coend form: define <img width="12" alt="f" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAfCAQAAABXe8XLAAAA0UlEQVR4nL1TQREDIQyMBSxgAQtYwAIWsHAWzgIWsICFWjgL7SY9pr+y6aPL3HCP3ZDNZEX2SJIlEjxDkCGnFHwHR5/S7Y1LnoyggVZxd9wXI5ggJtwZLaU9PYJONbJQQB8ewQEBNZuFcVsmkO3oKJv9bQ0PnGmWhx2qsQz65Bp6Qy2fHkH3zkg9ZI9ALQeerpYfnvrtL2tRPAK1TOdYI0kmbKFC0D2CnywTGf6AdBDuqolrKNi6aSQbN9Jss9f9nJzhiL61foWA3NKEhGl+v9Jfx/BPj0mWDs0AAAAASUVORK5CYII=" class="inline-math" style="margin:0; vertical-align:-4px;" /> as the composite <img width="193" alt="A \xrightarrow{\Delta_A} A \times A \xrightarrow{A \times get} A \times B" height="18" src="data:image/png;base64,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" class="display-math" style="margin:0; vertical-align:-1px;" /> , while <img width="55" alt="b = put" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAAAeCAQAAABncOOxAAACaklEQVR4nN1YgbGDIAxlBVZgBVZgBVdwBVdgBVZwBVfoCq7wV+hPAggEsdar9uzjfn81nLxAXhIrRIIUo5hgPOHv5yCFEYP4A+fst6mchRmcM98mcRAdxJ5smxW49ryOzYeBUafb5v7GitPA/W9rgrux4gbgPm5NuLPiRuA+tM33Vty8T3EaQtPC1RXos5UkXVnY5ARFd3g06WUOFjAcHR2M/77qolecf7wCNx9bifUjsBBIEvYct9TAZyf8Fkd3NdxTYHmSJUJlaU9R4zHRuc3h+2rW8BN09ohzk4sMFC2t5Jb7DrKeCnZJ/8scjqnDiRK7FJfv0KOpQE01Zd/oGs9Akv1CLCffB6LR3jH7mJ1txNs1btrInWb3aId27Cd4KjCBySNcO3Yq6Eiuy0M17nlyYfCrqYqYDc55uyQeyRlN4inxdo1Tpzvn0VfEXBFD3H5YcTk6tmNngQed13qizxX2EcXZleM/A1xxfptT7cOrXLcHFGcrxc0bpSBWlz2jnS2jKyWxnu5EdzB+Hpl1zZGXirPssE2xBIeEB9qdY7sRqBU3FZvKNz0prluCuVTcipsDSx61Es4Bz9E+F6YN4c4lR+wSzHlgm7VoK/sRs5KRzsHMVpogXnIFDgUv3zyYMDMiT4XTeqSMy3R8xDWuecWNS4JwzLWyj5Rgd8G5/IRSJ+VaCsdObgSjhcnXvBFExWF66mFMQK4uPT1tNTqDHY0Edo7mphPCw7B0bzN5aWqYrkNSNq7brqnli0zNUV7MexdevGDeGXWN+yHUNe6HcOff2jZhqTxja3XVrzUXYoC0bSjB2xfd52H8A+5XXhdNW2B9AAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-4px;" />. This is the representation of lens as an optic, and it makes explicit the fact that the forward part of the lens saves an <em>internal state of type <img width="15" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAYCAQAAABHYIU0AAAAyElEQVR4nJ3UYRGGIAwG4FWgAhWssApU+CpYgQpUoAIVqGAFK+hAvRucn2yMU3/oc+h4EUBaP3DiZ7uycECcxYlwmqOO6AF5hhpiufKJ8rDSMYVtfd0LL1qcAOm8Vow66iDUK1asWunSKsOw1+DSqqeU2DYrW3CQ49g0aNNkDLt5VAF9WsWxMCYednqcj02KS6uwG6FiO8bxJUvCjOHrtkcZ7lvF8SAmPFVtDfHy0dHPjBmac/+7a/H+Fb190h2Ca/QNy+we25onP45k4E2YSk8AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" /></em>. In the image below, the forward map <img width="12" alt="f" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAfCAQAAABXe8XLAAAA0UlEQVR4nL1TQREDIQyMBSxgAQtYwAIWsHAWzgIWsICFWjgL7SY9pr+y6aPL3HCP3ZDNZEX2SJIlEjxDkCGnFHwHR5/S7Y1LnoyggVZxd9wXI5ggJtwZLaU9PYJONbJQQB8ewQEBNZuFcVsmkO3oKJv9bQ0PnGmWhx2qsQz65Bp6Qy2fHkH3zkg9ZI9ALQeerpYfnvrtL2tRPAK1TOdYI0kmbKFC0D2CnywTGf6AdBDuqolrKNi6aSQbN9Jss9f9nJzhiL61foWA3NKEhGl+v9Jfx/BPj0mWDs0AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" /> is the gray box and the internal state is drawn as the vertical wire (this is also called the “residual”). The dot is the copy map <img width="25" alt="\Delta_A" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAdCAQAAABCzPfZAAABJ0lEQVR4nLWWARGDMAxFY6EWsICFWsBCLcxCLGChFmoBC1iYhS1tBgNK08KR32O3lcD/b23GAGQZGOlQFsKHDlUZeJPJW5cFYSYTVRZDFp02CyYC1GSJHAaU1wXX9GosCwe/V2LBXXIVli0Hf1ZgwSz14yxHDp57mCXn4Nl2Fk9NLOqMg+dbWWIcWysppW1j4R+il1RS4uBzLSyenkCVKGUOPltjGYjBUY0vl8Ss0pLVWAwEerVUE6Sko2ARNYosCH2yikGKkjmiumRyfgu7mseaghxB2uoI6Rbu5Hq/fo0TVfTnJvyobRtzdjVueiOUOsVdsMhZurTYy6h2yj353Y5T+SPlDrkHuVPuyGRdUemUOxZTttc6uVOuKvz65m8TuXifTsu6fAGAarqKl5O8bQAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-3px;" />.</p>
<center>
<img src="../images/lens.png" alt="Lens as an optic" width="600" />
</center>
<p>We can imagine a particle flowing in this lens, as an input of type <img width="15" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAYCAQAAABHYIU0AAAAyElEQVR4nJ3UYRGGIAwG4FWgAhWssApU+CpYgQpUoAIVqGAFK+hAvRucn2yMU3/oc+h4EUBaP3DiZ7uycECcxYlwmqOO6AF5hhpiufKJ8rDSMYVtfd0LL1qcAOm8Vow66iDUK1asWunSKsOw1+DSqqeU2DYrW3CQ49g0aNNkDLt5VAF9WsWxMCYednqcj02KS6uwG6FiO8bxJUvCjOHrtkcZ7lvF8SAmPFVtDfHy0dHPjBmac/+7a/H+Fb190h2Ca/QNy+we25onP45k4E2YSk8AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />. A lens takes in this input and does two things in parallel in the forward pass: it copies it down on the vertical wire (residual/internal state) <em>and</em> it also uses the map <img width="24" alt="get" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAcCAQAAABip59/AAABlElEQVR4nLVVfd3EIAimghWsYAUrWMEKq2CFVbCCFaxghauwF7ydL8x9eL/d8J8xNh7gAQT4vTiIoB7wy+QFC5gnAQwCvJ4EAJgQIj4LERFiehaijDLhIOBxh3aNkdIXftUV2HocAizr8wmQgYzpGvxtqjDLBkpDwi8c2jXaY3tHh3Io63M4ArDYD3PT5tqCntm9sFPtndAumTDoIAtASlwzgAXj4xJEAAMzkWslJURpmq4uNLMrtP7rAzPhhcN3jIsom8yBGOA5DMwEkSVJSowJVYsWardQNyV0Z8XXl0yY6kJ2D2fCrfbjlrxkwlcXfEdKJsJFpQeYIBe5ezMLLW1/YjLARO+CM3ENIZnYBXNdv8iZsLsQquXJt5M9mm0+dqrOiGzhstGp/qm5pYA+ko7uPdcGz2CiUTDxyUPOAb9Cc4OYTxYoOsnrClMbJj5BlDoZE7pJGystH1on6QxAimSCh0FnrxDvlT4stmPi5xI6Jm7LLHam6nbqbfGb/RR3qL4plg0/dVX5hrZxkNDu3OGmG5E/ezm/pwDRscIAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" /> to turn it into an output <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAXCAQAAABZ9FzfAAAA50lEQVR4nI1UQRGEMAyMhVqoBSxgoRawUAu1UAtYwAIWsFALXJLO3Qzcps3mw4RuyJJNiRAKHSB2zmeKkPHASokq3Rw7P38jMb1xrlLwlBD68soGujh7zumFjzWQ37TsNqMf2vo/otLLjC6HMsgvHjpWLsj6Jo3plnLnr7OUyziv+eCQ8sAFpeiU/FYeOSOWERM5ULTF8oiTydnjt668gp4aF0XTeMHyVZ/HZGm6cnTI5biu3O7rGNOxckHw0O2N2sxN+MFWTmrYNh6erbx6lsVSXj3XxApGE5nU92xgmaREHCd/G7r9A+tji5e2CIjWAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" />. Then, this output <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAXCAQAAABZ9FzfAAAA50lEQVR4nI1UQRGEMAyMhVqoBSxgoRawUAu1UAtYwAIWsFALXJLO3Qzcps3mw4RuyJJNiRAKHSB2zmeKkPHASokq3Rw7P38jMb1xrlLwlBD68soGujh7zumFjzWQ37TsNqMf2vo/otLLjC6HMsgvHjpWLsj6Jo3plnLnr7OUyziv+eCQ8sAFpeiU/FYeOSOWERM5ULTF8oiTydnjt668gp4aF0XTeMHyVZ/HZGm6cnTI5biu3O7rGNOxckHw0O2N2sxN+MFWTmrYNh6erbx6lsVSXj3XxApGE5nU92xgmaREHCd/G7r9A+tji5e2CIjWAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> is turned into a “response” <img width="19" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAbCAQAAAC60DVWAAABJklEQVR4nK2UYRWFIAyFV4EKVLACFaxgBStQgQpUoIIVXgUr8MY4etC34TjPyx/hwOe4GwP4Xw7sCxTSAhn2t2ARYZ+3YDvClt4GD4kZEdfXmz+OLml6MAczBNyWEeDOMSOsxBGawx7n/jl8R7DptmrQnwzbOS8zRS69kKWFflJdshS7QknYaAlWr7bil9PAypGVWZ8aWNQVBe/YEU3GZBT/HorikORYmwCnrXzJsUD13q2rX3GOGXo6cRR1d8ziSinYqMvdVZ4u4y9jQ9Q6GlVRokfzG++Ov+Ay3FUWkl5zPNQKq2Pckbb6lfKddldgaQTGO1ZkxmGSY0fH4F6sINmx2r0e+upVsmPhfOJqSY6FzvUFOSb5FhG1V6gLdiYMPzaMS/EqvzBVoSwnz/e/AAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> by the environment (not drawn), and on the backward pass via the <img width="26" alt="put" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAcCAQAAACEjlQ7AAABtUlEQVR4nL1VDZnDIAzFAhawUAtYqIVaqIVYwEIt1EItzMIs9JLwl0C33e7GXr/bURLyII+kxozCbDZjh0UXuJvTTONpJqS5j6cxZkWi7RtEGxKt3yC6PVdoMYB/EZbfwDhhdzzjm1VT8bFoo2dGmjONL+gAD2txLzuOPf7OTH0W6gnnHFpOtlTyk1fE8c4PneeWxtDS2OQO6AQmlPmAt8clu+X/NTCBZA9G46lCa9r51gRa0qJsnxv7Js6c8bSGch23MvoU+Cgn1LuloFLHlzUUc+k6J0hE0W5Z5hp4YjU0flVDS+cUVKpa+9sKybDa6VChWkXeViijVchxqmpt0ZvsyW8rVMNqp4Vncmi6cYewXgX9o0I7V1UGqDep0FwSrhV6QBmaQPFO1VS1RDUolITL5Pu+L1QneYd2TIxUbFVEEyvkk2cGqVjXX35jo0JbETc0NLqvWbSHRCR3fhSioHqiQFSIGuOCz46O7sLnjvMUmDqJxbCBfevO6ZzAcw9oZA1Re+9JMnTz991nw17MKbz4WH0KfQ0NQl9Dg9DW0BAAlyK1F+ha5Eex4lX0fGnh8aX8H34AmPHU+MUVlS4AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" /> map it’s turned back into <img width="18" alt="A&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAbCAQAAAC+JeVrAAABBUlEQVR4nK2UcRWEIAzGV4EKVrDCKljBClagghWoQAUqUMEK3ph3B0zeyfQ+/vA5Hz/c9jGAZ0IYHhJYM+yw/QPkCBT1p0+n2EagWYcZaIsTMeTEjA7kaZMXMUsxq8NMtGWHIKKRYqqeGUIERpVqJXshCwunUYMWekcNZuCUDtBYxJ228Z7PXRiU/8BoGz/Byk9kUHYS6hydymwKkLLZWanMHz0ADZVzEmi9B3JVe2PD211CcX7rknQpiOvoT5bskqX2+mrFO6BUZhRrZZBysLrGLZLe7hA2bzXqQbLMJUhhydLNtVSg8Udnur1t6F82MXWy8D1uL4f9YbhjyWKH4ls9Tr56AYWZenW6kbprAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" />. In other words, in this lens we can trace out “two paths” the data flows through starting from <img width="15" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAYCAQAAABHYIU0AAAAyElEQVR4nJ3UYRGGIAwG4FWgAhWssApU+CpYgQpUoAIVqGAFK+hAvRucn2yMU3/oc+h4EUBaP3DiZ7uycECcxYlwmqOO6AF5hhpiufKJ8rDSMYVtfd0LL1qcAOm8Vow66iDUK1asWunSKsOw1+DSqqeU2DYrW3CQ49g0aNNkDLt5VAF9WsWxMCYednqcj02KS6uwG6FiO8bxJUvCjOHrtkcZ7lvF8SAmPFVtDfHy0dHPjBmac/+7a/H+Fb190h2Ca/QNy+we25onP45k4E2YSk8AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" /> and ending at <img width="18" alt="A&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAbCAQAAAC+JeVrAAABBUlEQVR4nK2UcRWEIAzGV4EKVrDCKljBClagghWoQAUqUMEK3ph3B0zeyfQ+/vA5Hz/c9jGAZ0IYHhJYM+yw/QPkCBT1p0+n2EagWYcZaIsTMeTEjA7kaZMXMUsxq8NMtGWHIKKRYqqeGUIERpVqJXshCwunUYMWekcNZuCUDtBYxJ228Z7PXRiU/8BoGz/Byk9kUHYS6hydymwKkLLZWanMHz0ADZVzEmi9B3JVe2PD211CcX7rknQpiOvoT5bskqX2+mrFO6BUZhRrZZBysLrGLZLe7hA2bzXqQbLMJUhhydLNtVSg8Udnur1t6F82MXWy8D1uL4f9YbhjyWKH4ls9Tr56AYWZenW6kbprAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" />: it goes through the residual (which is in this case also of type <img width="15" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAYCAQAAABHYIU0AAAAyElEQVR4nJ3UYRGGIAwG4FWgAhWssApU+CpYgQpUoAIVqGAFK+hAvRucn2yMU3/oc+h4EUBaP3DiZ7uycECcxYlwmqOO6AF5hhpiufKJ8rDSMYVtfd0LL1qcAOm8Vow66iDUK1asWunSKsOw1+DSqqeU2DYrW3CQ49g0aNNkDLt5VAF9WsWxMCYednqcj02KS6uwG6FiO8bxJUvCjOHrtkcZ7lvF8SAmPFVtDfHy0dHPjBmac/+7a/H+Fb190h2Ca/QNy+we25onP45k4E2YSk8AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />) <em>and</em> it goes through both <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAXCAQAAABZ9FzfAAAA50lEQVR4nI1UQRGEMAyMhVqoBSxgoRawUAu1UAtYwAIWsFALXJLO3Qzcps3mw4RuyJJNiRAKHSB2zmeKkPHASokq3Rw7P38jMb1xrlLwlBD68soGujh7zumFjzWQ37TsNqMf2vo/otLLjC6HMsgvHjpWLsj6Jo3plnLnr7OUyziv+eCQ8sAFpeiU/FYeOSOWERM5ULTF8oiTydnjt668gp4aF0XTeMHyVZ/HZGm6cnTI5biu3O7rGNOxckHw0O2N2sxN+MFWTmrYNh6erbx6lsVSXj3XxApGE5nU92xgmaREHCd/G7r9A+tji5e2CIjWAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> and <img width="19" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAbCAQAAAC60DVWAAABJklEQVR4nK2UYRWFIAyFV4EKVLACFaxgBStQgQpUoIIVXgUr8MY4etC34TjPyx/hwOe4GwP4Xw7sCxTSAhn2t2ARYZ+3YDvClt4GD4kZEdfXmz+OLml6MAczBNyWEeDOMSOsxBGawx7n/jl8R7DptmrQnwzbOS8zRS69kKWFflJdshS7QknYaAlWr7bil9PAypGVWZ8aWNQVBe/YEU3GZBT/HorikORYmwCnrXzJsUD13q2rX3GOGXo6cRR1d8ziSinYqMvdVZ4u4y9jQ9Q6GlVRokfzG++Ov+Ay3FUWkl5zPNQKq2Pckbb6lfKddldgaQTGO1ZkxmGSY0fH4F6sINmx2r0e+upVsmPhfOJqSY6FzvUFOSb5FhG1V6gLdiYMPzaMS/EqvzBVoSwnz/e/AAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" />.</p>
<center>
<img src="../images/lens_traces.gif" alt="Lens two traces" width="600" />
</center>
<p>We can think of this as a “conjunctive” data flow: both paths are traversed. The lens computes some internal state <em>and</em> interacts with the environment. This is useful for <a href="https://arxiv.org/abs/2103.01931">machine learning</a> (where we want to remember which point we’re differentiating <em>with respect to</em> on the backward pass) and in <a href="https://arxiv.org/abs/1603.04641">game theory</a> (where we want to remember the state for which we’re going to receive a payoff for).</p>
<p>A prism, on the other hand, is characterized by a <em>disjunctive</em> data flow. Starting from <img width="15" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAYCAQAAABHYIU0AAAAyElEQVR4nJ3UYRGGIAwG4FWgAhWssApU+CpYgQpUoAIVqGAFK+hAvRucn2yMU3/oc+h4EUBaP3DiZ7uycECcxYlwmqOO6AF5hhpiufKJ8rDSMYVtfd0LL1qcAOm8Vow66iDUK1asWunSKsOw1+DSqqeU2DYrW3CQ49g0aNNkDLt5VAF9WsWxMCYednqcj02KS6uwG6FiO8bxJUvCjOHrtkcZ7lvF8SAmPFVtDfHy0dHPjBmac/+7a/H+Fb190h2Ca/QNy+we25onP45k4E2YSk8AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />, a prism <em>routes</em> the data to go one of two ways: either inside through the residual <em>or</em> outside into the environment through <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAXCAQAAABZ9FzfAAAA50lEQVR4nI1UQRGEMAyMhVqoBSxgoRawUAu1UAtYwAIWsFALXJLO3Qzcps3mw4RuyJJNiRAKHSB2zmeKkPHASokq3Rw7P38jMb1xrlLwlBD68soGujh7zumFjzWQ37TsNqMf2vo/otLLjC6HMsgvHjpWLsj6Jo3plnLnr7OUyziv+eCQ8sAFpeiU/FYeOSOWERM5ULTF8oiTydnjt668gp4aF0XTeMHyVZ/HZGm6cnTI5biu3O7rGNOxckHw0O2N2sxN+MFWTmrYNh6erbx6lsVSXj3XxApGE5nU92xgmaREHCd/G7r9A+tji5e2CIjWAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> and <img width="19" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAbCAQAAAC60DVWAAABJklEQVR4nK2UYRWFIAyFV4EKVLACFaxgBStQgQpUoIIVXgUr8MY4etC34TjPyx/hwOe4GwP4Xw7sCxTSAhn2t2ARYZ+3YDvClt4GD4kZEdfXmz+OLml6MAczBNyWEeDOMSOsxBGawx7n/jl8R7DptmrQnwzbOS8zRS69kKWFflJdshS7QknYaAlWr7bil9PAypGVWZ8aWNQVBe/YEU3GZBT/HorikORYmwCnrXzJsUD13q2rX3GOGXo6cRR1d8ziSinYqMvdVZ4u4y9jQ9Q6GlVRokfzG++Ov+Ay3FUWkl5zPNQKq2Pckbb6lfKddldgaQTGO1ZkxmGSY0fH4F6sINmx2r0e+upVsmPhfOJqSY6FzvUFOSb5FhG1V6gLdiYMPzaMS/EqvzBVoSwnz/e/AAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" />. We see this animated below.</p>
<center>
<p float="left">
<img src="../images/prism_default_resized.gif" alt="Prism trace" width="400" /> <img src="../images/prism_env_resized.gif" alt="Prism trace" width="400" />
</p>
</center>
<p>More precisely, a prism is <img width="126" alt="(A, A&39;) \to (B, B&39;)" height="18" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPwAAAAkCAQAAAAHz5+uAAAEhklEQVR4nN2cbZnrLBCGYwELsRALWIiFWogFLGChFmKhFmKhFnqAnO5p0xnmg+Ft9n3yZ682+4TcwAxfu8PwO+SH8dtF+FX6n/C6DI/h/u1C/CI18ZqGYFmWJl3Ti2x/f3apXO6rpXnXmTg91cBrGlb27ZdhlpZM6HZPL3J5ueN2mqqXcPrvpOY1pfbCzRFjeshVXjaBmy+B67Xoi+ETW4RzCqlBfF7X9PmizL58RzUvl1rIwi7Qmh6zsu/WuIX02TGcricIsDVOPsWtmMqdm7H/ueZU6twboyJK8B3VvIKgIudSlBv7fo3blj479pIcGSajp2pFcfLlbY6ldOV9dMR4jkpe+RbPLEhu87dSGAvBblgqiYZxRiOaU0DG1pfyjhfgG0ocRzWvKGiNOb8Es4qH3RYEsBc00B6iOa1IFYzlHTWpiuOo5OXS19z8PpZXD2D4kQtzu/5MTI7avjjE43B6IPdM6ornOCp5LUB+wLSWFrSUh7b3PdjNVYJibiRWU6m7sOnSnOB8/Pzdh2IKzHFU87qh7eWoPMb8V5zWmTzm5isrULMyU0LahD2Q5oTlY/3gjuOo5OXKxIAj97Mo4NWBq9WNX1pagd3guU/G8nEsq2qaSNXqWCm1Z0MPL7mmveK1bpvZRHIURS0OJygfu7KYelUmqHZHlFdgZuvxzeDR2PP0bqvRfCIrCvohzemYj8f0SV5quapHQxaOKC9uxb8/LGeYljm13i0aLuM4wSyB5hRK+A1v1y35L+rhqIUjymtljZP9oUe2Ldq2uHEbKk9T6T8cjDSnFYxbeei1KZuqhSPKixc6j3s9a9MSToubbcXvmy4bw5HmhK3N7SNzzTaNhWNTxee88r5DtDVUfJtbveLHsn2huai9SYrTno8hD+2qnY1jQ8XngZg/XBEtFKVWN6rHH73pa080VJ+nOO35GNZDlRhtHBsqHhpD6tfuWt2sQ31MMYKzYE1xgvNxllNWvI0jyosaJXtw3OuVFd/uZlvxkb1wS3HCd98u4Gyclo0jyosCCR/h0a7dtbvxZiE8zYJGVOeE5+N9snoXl9nKEeVVX/0OaLuCqoqCKHODtRqevZWs1lOcsHy8j18+VwhpVlJHWCivsYJ8quS1z9W2fKCitpwqc8PvtDqMcRHFjhonPB9HJGBTrOSOmCq8NvArl3rnHc1reyB6D9yPSqaWu8Gq45fpKlx0hjllQalqTJWz76BB71xjpXOEVeUVgZ64vsxwj8Ox28t3r0EnlkJBj9G4wVqIIZZE0o1liNN8KP3rdUu/gVUtzkrrCKvKaxYjwOU7n4TFz5rI5YUDLktO+/P7nxomeG1me9yzKZqjJIfEesiOU1ZfVlkkL9kwp6bQ9Q/3FsW0yFJ2nLL6sspi8ILzjVSu61FIx1xj6ykbTll9We1PYPDyyv2jd4Wuh5+D2dkbvWw4ZfVltT+BxUvytzSw5q6DlUl8KraP2jll9WWVJeAVGwNpzxbsyp7eOdTKKav3uwh5RbOjy9ZaT1Wy83J6SszrDMH0U+50/+TjnJyeQnj9ARpALmNLiFvOAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-5px;" /> is a pair of two maps <img width="148" alt="match : A \to A&39; + B" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASkAAAAeCAQAAADamCCoAAAFQklEQVR4nO1b4cGjIAx1BVZwBVdgBVdwBVdgBVdwBVdwBVfoCj0IVoEEQYrYftf4475SgdfwCI/AVdXPvt14Vd8N4Wd/ybrqWT3uBvGzv2SjpNRyN4ifhayr2rshkEbhekhKdTdg+VLj1SSfWTqt5BDXsr+xYH+xRuHisOyxAr0LGAv3GWV5/01arpYuG6TTnkVBT7K/qWB/sUbhErJMFOmdy2mtx2KUf7+eVvau4uRQhNaEtRLO2a55Ya3Qgtvmgj3GGY1rKTrdOGBonFIGKG7y2IMAFDIBc6CUMemaGRz3WUbjKr1EC8/usgNkNyi6Jmm7OxUFq5SB+EBK0bh6+ZmfbOlxelLvNnkoXAOyMguwZX3SnCqppGoI34IM73eaD9eYIAnOk9Cs+5SjiK25i1KjB9CRlVVSE7i7BwelO961d+KCNhoXS4rf6b+MVlLVhuyGxMvy4UqqXXvimR20vDl/fbh4UtY8nVI+JXUoz9V6vfNebRDVUzsl/jyE/t6GzLbtpp5j6sHEqqFv1bu9I3wpqXrFEuMO1eP5La0SwLoWzxzGxVtxNjeudEr5lNQAKwnp8REOIB8AupGfOvmJyQo6cOMS2xrZ7Lh+38EeQL9Tr0mxBTrWf9tuUTWWte1Wfmu2rUOtIpMq7aNcOidtaYWxKOelVP1WzMuNK51SlJJiIGc8qaFmBTtBp9P2EoMBapwSN+XWWT92BALZ0H1KqpEEnY22B2Mm6NywSbIpQqw/E3ZstUXCZ+bldvDN4qDlx5VKKVdJqTS0SnOO/vaG9fUFhbEnUMgtcbszSdYRg0rnpGxC6QiztySQUJ4iXJKSUbYds2TOnzOI4CmWH1cqpQTwQljPLPH1/smioTI0iL4S87Obw+3QT6dzUgwoZLZtH4JOiBwxlDpv3Jn7+Y9kGpjP508O8uNK9d9ERki1RVh8my49dC3SIXSJ+cMEemNAVKBzUrgms6iJc1LXZKnmCm8Kcic7ldZcTg7nFbhSKeXLj+t94MGY4EUjXPJAKilWSeGapuGc1DVZKgF6zXyW4NDVgD3lWaKnRAouG+McjSm0feDeyRzMnLsLUUVcLbEJ0zqy7dWJbZSSagMxB+ekrjh3V47nzhNz+8GtE370shUbI1JxhTCqSYxLQ0uyOJjMz6Pl2FVJrxKzQ1cV4QRYrJI6gqkMn+4tiN7vG7VjyZ0/V6ZSL2fODq7ClVafVlLK2DGlXJVEKSk3UoyoTqySColNd0Y2Fyx7nNyJ8eyUonN5frsOV1p9/00Dvbv3TpYYJbUfq3QADu/K9oXx5RZbSb1KMfVMw7ppx8KyXelwBfDed84ltj09kNfhSqGUX0np0T64V4p1k1tiRgqdq3JJ1xiL52vgzdM9vr1N58LZGmCxkjLJfHxcGus04Z1deSl19pTvSlwplPJLFK3uvGIE6yZcshOoNg4zhVFjT1a2m2NMhbYnTWu0qFaQpW/W9+xQa5L5+Lgl9kCmQZuI3XLmzzvHhyG7FlcKpXxKajhYEMHCGSjz4GXcAuG0DTWDHc1jrTNtb8ybkwaL0cL5gb2RDqRyUtP61rFEjzmQYbIV/x1THejpxee8jSdIcD2u85SilttaMkHfPzhUiALJLFxSQX5E3SHfm2LwPyXULQRNsw6YOxrsbeAwuoOatvWwKHD57yC/NWvgUNvJVtRFj1DgP9Zo+jfsORlXlbm5nPd3mPFtlMB1hlKt06f5zNLPwZYYegWXKKPyGE3FnSNFO8LoKy600ZkRKleC2/0GS7lqc51dcaD1s//afpT6WWY7uDmQx/4BfThb4BIHzpsAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-2px;" /> and <img width="110" alt="build : B&39; \to A&39;" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAAAcCAQAAACguxm+AAAEmUlEQVR4nO1agbWzKgx2BVZgBVZgBVdwBVdgBVdwBVdwBVdwBX8IVSEEAYtt7zvv8/TcW1QSk/AlxDbN/7CQDf+2Chn4G1p+EF2zNeu3lUjib2j5UYzaJMu3lUjib2j5UazaJN23lfDQNW0wFtGSaY9O+tj0pyYEzDrredXFVbWlK5gNH6Me74M8IYGCWBW5dcC1RiMai2rJ9KkevHpl4DRYM3gzmHmVnnXTf6/uqiN9h9QRO4DUUf+/H62e3cgYPAOoalJrgQrghJZLwsBpWCf54MTYM9JdSJAq0CgDKTOS+kvVWgt6z2j0UstcA1+LXfTa8dFlUWAN6S5UpArrQM6eLSha+iaYdtkcWCKhZZ6ByzFkkVFt6VPkYW2A7Pr0VVf5+zBZOGSthJZ5Bi5HHgXWlm4eHq99A+E5bvypEpsDRaqA5BNa1s0xpzK/k+EMejhjy21WeSOwkhLzMYEFelTMJbSsnWN2/FaG84sTWbkXsbzFGaYSNpBOaNnvl1ruBhZauEIe5jCG14Pw6hz6mmsKbI970u41W4b83VYsww3Qf3hq16beIF5Tlli9pEfmSVgDm4PrYzqmsZtoDtO5+3numZq+xiBGgUKfGfU9ZufXZWS4mSiS46AyHIO20fjgZpsTz58L5ehb5LgFYnHnaH7cyrRLWGOZ1l0TPWxlm8tr4hTYeaqNGRluKyBTnOE4tAFW2I4/i+HmeuZeUG6ObZM3biha5peZ+hdttsgpo5MyY9fEKFCi0S7DKSUdDgVBqLxj1hr3j7e2GPBIOfyQWvK3RqGBp9ca2CNhQOSzOnv52DV0hmNBH+CJPVwYsSbJL2/WfWkIWNllASKRtgVd29DAe0m6E+bmGVs07ksG+hoDigJVkK1Ch78HtzeCJa+PN7hM9l6KSHlGjp7y0wI2MEd7iQ5VaT0R0/iaWIZbAzctkT3XPUgigFx9ykp2DvreOZbMEDHZ13+PseQ6LjRwix7ezWjUd4M5GKMosEWFg5Vecz+lmvgrx+0GKcviw1Jd3pozZQm+f4iGHkJoYP/hLQm6y3kNJqbMT2W4cGscrtT3QGc4A3bLcaUY9PPlEz9V6eLeSRRhxbZ4Iy3KSoJwkiLMRWW4MTDdpzLcXr3WlBViKGp8STJkZYnj3EfF71uxY88M1x5mOPNU/xLpEvCp3kQGiUBX3Uc8w1lJz77tbvMMfgCXJRbZvRP82gCvAey48TivXiaXDrXuxfBJwMK5G88lSPdSyDNIPMPZzHG3s5GHsm6liq7+TMdx7zIZkF7vnReQ4awZd9I73SGOe88x5ZCH9OZiUNLYWdpLEsttecUy3HBBobXQoUrgGuKicszunYyHC4xb8C1uX9L0FoeX4+ThgrOFNTk9TjvGkMGnY0UwqL3W19zTZR2V1/KiSIZr7ew7gac332Nuo0o/uf2NDa2RfQqaRoOJzK+gWmgNUVHZgTuNowwRGleY1vDkTD3rb63+uKqYzl2HxlxZI7iqg5UwJlZDqg3dXuyoZtD9eeQS8eTohtPDjHTPmFHAHiIOc1Z438LzOEZE5GWM8Obi/5GfV5e8eHoD/wDyTMGO1HDvSwAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" />. This is the classic presentation of a prism. As we’ll now see, it too has a more symmetric coend representation. It’s defined in the analogous way - in terms of two maps <img width="113" alt="f : A \to A&39; + B" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOMAAAAiCAQAAAAHM6bWAAADgUlEQVR4nO1b/5WDIAxmBVZwBVdgBVdwha7ACq7gCqzgCq7QFTwCvbtqQZNI6PWdH//c813jB/kdWqUucGBU824KF86iV4u6v5vEhbMYvRrnd5Ogoq0QQnrVCb+BhzSvu1djX53LCWjl1OC3Migr+JbGH8soKJ+LNC8TQqqu8H7rT/91jf75jeJYWk1hG22wPzk4L90Jyucizcv6p5JG/QsTHGgJxmR+VuffDvoYsKZ0ewSPUTSld4HoJCafixyv2T+tV6eawKLdPNWBBfLMpocA4zW/FVQK4PFToPq3kONVOwHYjAv1gRsiQzdVDhfivP2DaszxgghliLLuJ5zAZcwmagcR3LsKGasJgcEmA8c7kec1MloNuuKfP7t403lFi1VjjVTuwgZvgRJ/q684Y/+AHC/NajX4e0tnRvXDDdGmOfHuCOowgMFSQmM+ZYB5XoZV6vHVmMuMqBInFrb34M7w17Fla/9f1E4Kigj9eB8yQKBhT0xZyvPiqzGXGYcwRzo4cWgyY5UWG87jjUyMlsE+xfzSamxOeHd5Xnw1pjKjDg3giHMbQ1LMQq41m5X0JbSzJTEcW2sSEry4atxmxsY/gdZ/xMuzpA3Qy6E1lbl4VQzZg9PfSfDiqtGG0GlXC+ZqN7yBjqJ1qtmYiMQ4rg12S/NIGV5cNbqkK0HVMmMr8alwC7CVvj5eJzIAaP12Z9IuZHhxTzI3p4n1K2ogCCKkpvgQ39dT+xlxXE2onTlrRs5AebzWHCc0p6MSLGbGFHP0BMcouYtR2KrZrCFLec2KumJQxPkCn9cRx+/Gbb2OnMTu6GDBBfubQK76RqrOKj/HAQzeu1KDrDTkePEkpDMjQGPVKDeIM8n60QiocSCN5CR58STkbzD6ZD+ZgDvRPu9jW0RElJ/jdMTDk+TFUWM+M8Y2CPX9A2pGUEiiNmtDpdVIm6rK8uKoMZ8ZY75GOFmrqLf9uGFcu1P1lZ3j9KQ6W5oXR425zDjsBNsN4BBoE5DjYZz29g4NQzpbxRCSDmwcjOijr8GLrsZUMG+8XuK9BjLj0wuc4eAT7qlj2hrIttMqkZOxUurwoqix2+k1J3/OBINwWev8FNCvzSQhOQ/bfe311faSqKpG/fDAVqxn/K8g3EichQ65oFdxcnH9XuhD8TuvmC5f/FzA/QH4Yl+w7L/wBrS+nIXv3VxK/Dh8AU6gPIv59/XSAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-4px;" /> and <img width="118" alt="b : A&39; + B&39; \to A&39;" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOwAAAAeCAQAAACFgDqNAAADiklEQVR4nO1a2ZWsIBA1BVIgBVMgBVMwBVMgBVMwBVMwBVPoFByWbluhECgW7fPe5czHOMfhequsDZvmeWANvZuChSdygvBgnn2zNa+7SRh4IicIj+Y5CXLr3SQMPJEThMfw7JvOuvYS5PobuFzhiZwitCPC4rNYm/ipASp2moxrTAUTUmF3rp7VXJO4Phh5qh6ncERpR8SfBmV1XoUc5EK82u5MePwodpMCsX11YnepwHgQqB6ncCC0W8WfWVFSGp0SdQF2r1fXMcWhNa4SxeLLrC6nECC0o+qW8iCC1mLtBQWYkuCOKrJXzPpbOPmB0q6vlGFlJuMWuQERLV7WGxeO2SGGdm+O5lQWKO3GKvmEqjDCrUA4IYr1FNnl/gNwvT0YFsOpJJDa1cmws9pjUOS+uxFUU4HnC2fYZmfWoTm5kRJfNFDa1cmwshqVYLt8zft3zNQEb1hXhj0WTzhObqyJ8RCp3SfDtmJ77vVU2R7Fd3cy9ZMDudTAjzesK8OOan5Tpm/lSYEdrZ3OsHJRseb938BYgJLbD37IavcaFsqwRI3lpmLjCHp6z2KB1m5VvvrJAtRz64YI3PTkCpsaBaQBa1gzw1JxRQ4npsI1xoiOBmjtqBG39TvpBmYic5ZtzdBcYQ3LlRPz01oEv6Hw8FBmcFxfjNbO7mHnzDUyM3wsx1way3AGPV4WIWty5XqNVsWFWPdJ0M7uYbfMhjVz9pyhCscy/M6WztC1ctkRYiucZ43knaCd2cPSzIaVGex8lrJGGZa+B2n+tXoLFJ1hIfMdp06hvF6BvGyeoQ6UoJ3dw3bOh8dAmoUZa4zcwbyfKQMNwFVfoNMZFsYWnSAgXtdLB9LQlyZJOzvDXj18PKBq05yfYIC7H86wEgRh2FiM4v2DRpkuJGln17hrhi7zAwZWguw2w7oy7OdkJ0b2WIyRg8VE7bjxqHm/G4BHHTlmTxjDujOsdueS30t00YwTtTOPfcYAvw0lyJ3/6R7DupOMzlz42ZAfsdPiZO3OcybmzEFfhI4U24vqLX32hDGsK8OOFyE6D2Sgj4kGWbSb9pJBttD+W0JGiuT9FRWcU3Q4uZ5I+1nEGhYKYlRIrs90yg4npgg3zqYdUV/pdWq0FuK1/kP5+dCzmQWA2ZNiw1+MYbuLnnIRz1P+JDr8OTNr16oe6ZfwtA9XroE56PxH8VuG/Y9glD6N+VH8ATa8aylS3bM1AAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-2px;" /> standing for <em>forward</em> and <em>backward</em>. For any prism defined in terms of <img width="47" alt="match" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF8AAAAYCAQAAAA2GOmqAAACjUlEQVR4nM1XbRHkIAzFAhawgAUsYKEWagELtYAFLKyFWlgLeyGlJR/02t7Mzm36pw0kPMIjSY35ZQmmwPMyHxP/N5R/EQcbWAD8B95+QKLJxj60CQB+/Qqax/IGKP6hTQKb5StoHooHIO/HVgWspi+geSwzAMmPrX6G+RmAzA9tfoj567eZP8P0zrMIX/VxQjOfHuY2HpjOwnd9ItJge9ebcLh2XZ1npp35rmEJyvKQDIMOLlcy9ZplMHPgbAGNH2q4eIhubuMTPHukHZaegrFf23sSG1xgZPMdYZT6/qCfCrxq6+3htmT5dOy3Vrs9Cha+XzDKNUVYT8xxRrA8UmfM9xCMF/G9kOsdMFfRDZWzi7y0SVuU6BF+EK7UUAliQ5OacZbzOXiDDUL3lBrhuhQVlmOgilUGZxr6vYqYTOp8xjnfIlzq+82yfFFkOYW/TYtIFSpjDQWX1IxFLTvO+drSsjDonH9RBZJa+FrzVqy+y3xtSUXn/MsqIA/TDNpVDi627NDF3WR+vIilzvk6lEwkq3cNvbaSxUmx+i7z00Usdbez/r3zl6weMV9GICubu8wvgwRMRZ6Nv6LOHeb30j8hhXR26OTaIXPm71q9TSqa5x2LHbd+mudSQyOw1QK5QU8IuC9Cu51wzB7XUNv4rplPAzdooTXPtaaDdc15YCAsKTzxiDi9Ub0AOkVMg9Xdt3mc+TRw0qotd5XhaXOQD16Ww62F94BlftPvM14H/IWdZRJ5biY/k6OcX9qs4fVNKgtrjcGWq/6z9jRYQWfsNrctTRi3TGLnsRGc0JLLDFuvfeQMGyvMQl/TCbxEmHdyX6wqx1pTpba88ofbszbYYe8qPZ01u2HoUWsGfv8AJnxu5HDoDNcAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /> and <img width="38" alt="build" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAAAYCAQAAAD6gdNBAAACPElEQVR4nM1WUbXDIAzFAhZmAQu1gIVaqAUs1AIWsFALs1ALewnwIIGUsr19vPTs9BDCvQm5hSlVTSuvAjwv+H3TTEQ9ANddxgy5tVrUps4hwIxptTMExHWA+oL39Zpb7ucQYMZSEtwegu8t7jmAsVkg2BrfOiGQIfcMwCe2TwhkyD0D8InNCGTI/XeFSfYvFCbZ1xRmYEsdjOgy9LT1GPCr26hRk2xZMaEwfB7w4KGocwIBxgvM2qZGCiVHoclNMuD3sALPvfVeYU9YUIkxVAOhjm+eyAbjvYyuoq6atLJE/L3CaLVHBNxyU21D6WFc230VJTdpaXzre2dYiFUceYSbTQ9OvECqxq6iJIXpuD9Un2+eYel+cxnsxcBMbHs1OQqtbxJeWgfz9OUMAB7s4sWaPJnlClMXUbLCzi4N5DZKtB7Asuq5ovpxsqPz9k1KuDQN5D7ltCQAR5qVWqTJ7Nm1TCboBeK6qH6fm3AO8CQe26jCiDU6ob29wny3BUOFuaYJS6TWZJamXRVmCWRVypaToQL53ZMgboFhMQ0VrYxX0Sbmy6wrallI630uqQrElPUtlhGSJ/Zg4UvTlI3NmqiwVEZtSiU0ZW318QIqlo4fTEKxckN9IUFirhV6L+LdtufEFkJRL5lQJGDKtUYVGshHFQDjzNih+5xKkI/3/SEcBGtMFhPBNiERXr2BfakHjC386FGwQxJr46tMPqayRn17gbWYAerrP4o4Z9hIitCNzwi+5K1Y+K+E7dYPjH9X6ngTRUkAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /> maps, we can recast it to the coend form by setting <img width="79" alt="f = match" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ8AAAAfCAQAAABTotezAAADcUlEQVR4nO1ZjZmzIAxmBVZwBVZgBVdwBVdwBVdgBVboCl3BFXohoAaCFfFrvd7X1+eeXlNBCMmbH4XYhxJaNAX3fcEghRWjaOFvuHopF0DD7q24iQdooAIShhrh7G+CKf4/NKDAEXb+qPO+HgZ28Gngc/rHS7sCLexEHhyjYe/3usc5s1U4xYifn44p7OcIBhgz1jysQbP9O1BVPmSDBx5GCwNtzcBfCkdF5vCoauZzZvuX4q1j8P7gmBPMV222vxT3dzGfxmvC03L/vSts9LDc9cBa+OauJpH0m87kf9eRTIbdtOiGemM/DT7bPT2OzLMJNWEtmo3MYE4WH/iffZMLG6xuJnyagm8dfJNw9hNul0tiKLAuE37v4JotrQl7uKMb5vbjRtzD3C38Sud+4DxOcU7al9OZ8/pblRrqoMLCLNqIXaxA4jpUIklDWhdtzKCyYkvZYj5XEtzI3CMJLxpjNVWoLQ0k5V7va5Kya7v4mTNLbyXUhbwXpBIKnSi0y6Rc+ZwvVp7PdNeZhuDwKyw7lg2YA3FXF1/bOb9ftGQL3pLQ7/fEJjpmn/mcT6K66NxTFC4t00Gx+tKJXw2/zJZRRl5ClTOwO0a27XzOx0fK6Bh4zlecBbobj9aH58FzzX3JxFitlPn4SAqe8xVngSfSxVPgNs/bRbFy2hAdV+SKzRzztTu2xNm/uJDoLynYUlabJdQLUhYbGKuVMt+wYyK8bLg/DX7J1KWBY86sSq7nD+dVNme+dGWGjSllPrtjIqltqnKPtKV6Fs5C+pCT71/P2bSE+dbSq0MX5tFxde5ZZTHzzVKuZgpOX+ta5F7robrPcAqc51IJtQCfC6YKVoQA5k3Salcvd+drCBn4jjMfPbinvYC6zthZcJ7jklVZTdicjpQgSeLbLhZHGXVNwBtGDAKrGxXui5mPHtxONdZlueLV2M/waHFmFu+wy7bciy2NZZaXz3fcFvWNkS0PSZzvSTM/l/PZcNcOrV3T6RtYFsYlIgQgQ9IQpzSD3Rav0g7txhDbUdiI6DKhqwfVuz5KD4q10QgeJjqYpeido83Wh6+GZFUOlzjkij8VtaEa9mbat63yyJeTuQKTz5vF33iv9mbIcH7qEtf9cPiY5by/vyRp+XDopTF0+9recbg2ubO9LmofflEMhcF7r7D6guAHTG/0gNmV14MAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" /> and setting <img width="10" alt="b" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAQAAABQQhX9AAAAuElEQVR4nMWTURHEIAxEY6EWsIAFLGDhLGABC7VQC1jAAhZqgduUuWuHpNC/boYPmDdhWYDo1EIbJVTFGGohR4F2gHEMNhWAbo4ZYPVJv8/cYdP6tkOL7SNmE4dcBpUoI9tbhwX9TiPqwZpDf1nJumOZYdIzkBlWHewzNDooM/THipk7jEcGQlE4LHo8DF7vwmG+a4GHzjhnECTW3wP3WzWMtf0PY7HpLcafKwH26JtHL+fXy+kP9wt7+VMDJ3CWhAAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" /> to the composite <img width="222" alt="A&39; + B&39; \xrightarrow{A&39; + build} A&39; + A&39; \xrightarrow{\nabla_A} A" height="20" src="data:image/png;base64,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" class="display-math" style="margin:0; vertical-align:-2px;" />. In the image below we can see how the prism is an upside-down, mirror image of a lens.</p>
<center>
<img src="../images/prism.png" alt="Prism as an optic" width="600" />
</center>
<p>We can also imagine a particle flowing through a prism. A prism takes in an input <img width="15" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAYCAQAAABHYIU0AAAAyElEQVR4nJ3UYRGGIAwG4FWgAhWssApU+CpYgQpUoAIVqGAFK+hAvRucn2yMU3/oc+h4EUBaP3DiZ7uycECcxYlwmqOO6AF5hhpiufKJ8rDSMYVtfd0LL1qcAOm8Vow66iDUK1asWunSKsOw1+DSqqeU2DYrW3CQ49g0aNNkDLt5VAF9WsWxMCYednqcj02KS6uwG6FiO8bxJUvCjOHrtkcZ7lvF8SAmPFVtDfHy0dHPjBmac/+7a/H+Fb190h2Ca/QNy+we25onP45k4E2YSk8AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />, checks for some condition, and allows the environment to execute some computation only if that condition is true. This computation is of type <img width="58" alt="B \to B&39;" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHQAAAAcCAQAAAAaNFObAAAByElEQVR4nN2Y4ZGEIAyFacEWaMEWaMEWbMEWaIEWbMEWbMEWbMFL4tzdrAP4wKg39/izshI/lwQea8z/ljP2bYQn1JvNrG9DPKGRXnR5G+IJrfSife4Gb6ZIG6l/eD3ncTYnidvkgjnTmUC3bRTA/bSOgvFvFPKDbxbO5unaIwE5WHvobSjnNzPrshcLY+MrIP98YsXq5SHZzL9dCJuVOQc0JW60EgxIiRuFsA30ySHBeMgQ6W//wIsibCO2scSrgDXIN90FzF+t0SecCWFr0PJKVYHuYrRUZQbC5lBHlKqCIF5Da3vxVb5FlS1WBY1YqlFxF7VVRaDIdqwCSz28IY/YOlagUDwHqmxeksB/tJlCDeqeiOsK2u3uYZvETB3FBb5UrZM5tTIbOKQqW8r77Oudtq1vCXGBE0+Rba+C2BDEFVkx1zVtATCvsR3kM8dVDjadwpS2SaIic3qV7UPxKmA15cEABcqBmKGLSZUtfTrpky6zXqHICCqypatgP+GdnNkL1aFnDJEqW7oKgqKd/1aZ21VlS1VByKRNrTjdSvJDkc1FFmlLIfZzgbZZGBMLS1xKbF1mh5sJSNvlstBke4NNVe65/xO/AFl3asY0tP8WAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />. That is, the environment takes in a <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAXCAQAAABZ9FzfAAAA50lEQVR4nI1UQRGEMAyMhVqoBSxgoRawUAu1UAtYwAIWsFALXJLO3Qzcps3mw4RuyJJNiRAKHSB2zmeKkPHASokq3Rw7P38jMb1xrlLwlBD68soGujh7zumFjzWQ37TsNqMf2vo/otLLjC6HMsgvHjpWLsj6Jo3plnLnr7OUyziv+eCQ8sAFpeiU/FYeOSOWERM5ULTF8oiTydnjt668gp4aF0XTeMHyVZ/HZGm6cnTI5biu3O7rGNOxckHw0O2N2sxN+MFWTmrYNh6erbx6lsVSXj3XxApGE5nU92xgmaREHCd/G7r9A+tji5e2CIjWAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> that the prism produced and returns a <img width="19" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAbCAQAAAC60DVWAAABJklEQVR4nK2UYRWFIAyFV4EKVLACFaxgBStQgQpUoIIVXgUr8MY4etC34TjPyx/hwOe4GwP4Xw7sCxTSAhn2t2ARYZ+3YDvClt4GD4kZEdfXmz+OLml6MAczBNyWEeDOMSOsxBGawx7n/jl8R7DptmrQnwzbOS8zRS69kKWFflJdshS7QknYaAlWr7bil9PAypGVWZ8aWNQVBe/YEU3GZBT/HorikORYmwCnrXzJsUD13q2rX3GOGXo6cRR1d8ziSinYqMvdVZ4u4y9jQ9Q6GlVRokfzG++Ov+Ay3FUWkl5zPNQKq2Pckbb6lfKddldgaQTGO1ZkxmGSY0fH4F6sINmx2r0e+upVsmPhfOJqSY6FzvUFOSb5FhG1V6gLdiYMPzaMS/EqvzBVoSwnz/e/AAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> which the prism receives. The prism then has to translate that <img width="19" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAbCAQAAAC60DVWAAABJklEQVR4nK2UYRWFIAyFV4EKVLACFaxgBStQgQpUoIIVXgUr8MY4etC34TjPyx/hwOe4GwP4Xw7sCxTSAhn2t2ARYZ+3YDvClt4GD4kZEdfXmz+OLml6MAczBNyWEeDOMSOsxBGawx7n/jl8R7DptmrQnwzbOS8zRS69kKWFflJdshS7QknYaAlWr7bil9PAypGVWZ8aWNQVBe/YEU3GZBT/HorikORYmwCnrXzJsUD13q2rX3GOGXo6cRR1d8ziSinYqMvdVZ4u4y9jQ9Q6GlVRokfzG++Ov+Ay3FUWkl5zPNQKq2Pckbb6lfKddldgaQTGO1ZkxmGSY0fH4F6sINmx2r0e+upVsmPhfOJqSY6FzvUFOSb5FhG1V6gLdiYMPzaMS/EqvzBVoSwnz/e/AAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> into an <img width="18" alt="A&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAbCAQAAAC+JeVrAAABBUlEQVR4nK2UcRWEIAzGV4EKVrDCKljBClagghWoQAUqUMEK3ph3B0zeyfQ+/vA5Hz/c9jGAZ0IYHhJYM+yw/QPkCBT1p0+n2EagWYcZaIsTMeTEjA7kaZMXMUsxq8NMtGWHIKKRYqqeGUIERpVqJXshCwunUYMWekcNZuCUDtBYxJ228Z7PXRiU/8BoGz/Byk9kUHYS6hydymwKkLLZWanMHz0ADZVzEmi9B3JVe2PD211CcX7rknQpiOvoT5bskqX2+mrFO6BUZhRrZZBysLrGLZLe7hA2bzXqQbLMJUhhydLNtVSg8Udnur1t6F82MXWy8D1uL4f9YbhjyWKH4ls9Tr56AYWZenW6kbprAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" />, i.e. it has to know how to translate the answer from the environment into the type that it would’ve ended up with if the condition had been false.</p>
<p>This shows that that unlike a lens, a prism routes data to one of two ways: <em>either</em> through the residual into <img width="18" alt="A&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAbCAQAAAC+JeVrAAABBUlEQVR4nK2UcRWEIAzGV4EKVrDCKljBClagghWoQAUqUMEK3ph3B0zeyfQ+/vA5Hz/c9jGAZ0IYHhJYM+yw/QPkCBT1p0+n2EagWYcZaIsTMeTEjA7kaZMXMUsxq8NMtGWHIKKRYqqeGUIERpVqJXshCwunUYMWekcNZuCUDtBYxJ228Z7PXRiU/8BoGz/Byk9kUHYS6hydymwKkLLZWanMHz0ADZVzEmi9B3JVe2PD211CcX7rknQpiOvoT5bskqX2+mrFO6BUZhRrZZBysLrGLZLe7hA2bzXqQbLMJUhhydLNtVSg8Udnur1t6F82MXWy8D1uL4f9YbhjyWKH4ls9Tr56AYWZenW6kbprAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" />, <em>or</em> through the environment. These two branches of computation are shown as two animations above. For each input of type <img width="15" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAYCAQAAABHYIU0AAAAyElEQVR4nJ3UYRGGIAwG4FWgAhWssApU+CpYgQpUoAIVqGAFK+hAvRucn2yMU3/oc+h4EUBaP3DiZ7uycECcxYlwmqOO6AF5hhpiufKJ8rDSMYVtfd0LL1qcAOm8Vow66iDUK1asWunSKsOw1+DSqqeU2DYrW3CQ49g0aNNkDLt5VAF9WsWxMCYednqcj02KS6uwG6FiO8bxJUvCjOHrtkcZ7lvF8SAmPFVtDfHy0dHPjBmac/+7a/H+Fb190h2Ca/QNy+we25onP45k4E2YSk8AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />, only one of them will get executed. Prisms are quite often used in parsing. In game theory, we would use prisms if we want to allow agents to stop playing a game.</p>
<p>I find this operational perspective of lenses and prisms enlightening. If we think of lenses and prisms as little machines, then lenses are machines that always query the environment as they operate. Prisms, on the other hand, only sometimes query the environment, depending on the values of certain variables in their internals.</p>
<h2 id="here-i-am-stuck-in-an-affine-traversal-with-you">Here I am, stuck in an Affine Traversal with you</h2>
<p>Can we combine lenses and prisms? Can we model a process that has both disjunctive and conjunctive data flows? The answer is yes, and we get something that’s called an <em>affine traversal</em>. To understand it, let’s go back to the formal definition.</p>
<p>Both lenses and prisms are optics, and optics have a neat coend representation. Given a symmetric monoidal category <img width="12" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAQAAACBIibWAAAA1UlEQVR4nL1UURHDIAyNBSxgAQtYwMIsYCEWsDALWKiFWsDCFtLCXQmBfe3lrnel76VpkleANQx4DrvhMTXCAZ8eYU1HKERHjsKCt062RD3A9fvAAtTojjKm4WRRUqXn4SwS/ZzTDT0odH3iJMFrLsBJrV7PXx/N8mdtCnnVC4mrF25PbEC91jlqL9Ke1mDX05S4xu9/F+CfBJudlwLto4OcT2TBbA6GvFHkctjbiHIrk1ZqZkEZXl4Nqqy263ZHFhnKmx9WFQi33VuU/eTrryVzoNbiL7ZkZyKHSiAGAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />, the hom-object of optics is defined as follows:</p>
<center>
<img width="455" alt="\mathbf{Optic}(\mathcal{C})((A, A&39;), (B, B&39;)) = \int^M \mathcal{C}(A, M \otimes B) \times \mathcal{C}(M \otimes B&39;, A&39;)" height="40" src="data:image/png;base64,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" class="display-math" style="margin:0; vertical-align:-15px;" />.
</center>
<p>Lenses fall out when <img width="12" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAQAAACBIibWAAAA1UlEQVR4nL1UURHDIAyNBSxgAQtYwMIsYCEWsDALWKiFWsDCFtLCXQmBfe3lrnel76VpkleANQx4DrvhMTXCAZ8eYU1HKERHjsKCt062RD3A9fvAAtTojjKm4WRRUqXn4SwS/ZzTDT0odH3iJMFrLsBJrV7PXx/N8mdtCnnVC4mrF25PbEC91jlqL9Ke1mDX05S4xu9/F+CfBJudlwLto4OcT2TBbA6GvFHkctjbiHIrk1ZqZkEZXl4Nqqy263ZHFhnKmx9WFQi33VuU/eTrryVzoNbiL7ZkZyKHSiAGAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> is a cartesian monoidal category, and prisms fall out when <img width="12" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAQAAACBIibWAAAA1UlEQVR4nL1UURHDIAyNBSxgAQtYwMIsYCEWsDALWKiFWsDCFtLCXQmBfe3lrnel76VpkleANQx4DrvhMTXCAZ8eYU1HKERHjsKCt062RD3A9fvAAtTojjKm4WRRUqXn4SwS/ZzTDT0odH3iJMFrLsBJrV7PXx/N8mdtCnnVC4mrF25PbEC91jlqL9Ke1mDX05S4xu9/F+CfBJudlwLto4OcT2TBbA6GvFHkctjbiHIrk1ZqZkEZXl4Nqqy263ZHFhnKmx9WFQi33VuU/eTrryVzoNbiL7ZkZyKHSiAGAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> is a cocartesian monoidal category. So how do we compose lenses and prisms?</p>
<center>
<img src="../images/affine_traversal.jpg" alt="Lens + Prism = Affine Traversal" width="450" />
</center>
<p>Since both are given by some monoidal categories, we’d expect that affine traversals are given by a monoidal category too. But it’s not clear how to compose two monoidal categories. What would we even expect the result to be? As always, understanding what it is that we want to do will lead us to the answer. It’s not the case that we want to treat these as <em>just</em> monoidal categories.</p>
<p>In the above definition, looking at the operator <img width="15" alt="\otimes" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAABBElEQVR4nI2UCxHDIAyGY2EWsIAFLNQCFrBQC1jAQi3UAhZmYUuyrYXww+3ner0L+ciDB9FKQYdf+gBFOnnsOgpV/sJ/YFDMdTZPmQ5jA0rs9JgsWtclRHouHNIKDxr1mDhETt0xjvPiCakK44J+/jtCt+80wuM1Rzh2aYAeb1GpPKGkW914j8q2FYuK82jxAyqyntrpccEKrEQva/DALfM4ObZVHSzsNqIS3eJjgQq3W5CbjevxDe303rjkrk09ntEJdFcteejwjTvYQo2dINrix/xmn3wAEPrDCz7ZNj0knFOHF716VnIOFlFvbdy6zBkEXSzo6zK75VBenz6BMsPw9XoDRjZWZrPhrmkAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-2px;" /> (which appears twice), its left operand <img width="20" alt="M" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAXCAQAAADT28WeAAABJklEQVR4nJ2VbRXDIAxFYwELtVALWKiFWcACFrCABSzUQi3MQpcEWEmhnMLjT7d88LhkK0BLBkJathnPUhjPmZ9eooYNHHzhxLV08hxn7GhAw9rdmptaTtePGVvK6G1ZyGDBgenmIa7AY+zEnJfyWBKw4ImiRWce4+5twwCRkW9GNTsnyt3LuLSyM2IUmnHPOYMECfuJLmpZvtNhgnQw8nDXkrgOE6SbbA2O480mCJLqhiZ9niAYncrBUf9DThCMT7KhE5FBgiQ5OLpgNkUwHmxPz6pwNElQDo4tGkwSpJmjhurme5ogKQ+OLJ8kSDq41IppHCJoC4LRLx1ObjJEcL/9Miz/QSjx3WuCSzXIsaH0HA/cf31BHpC8rv234pJWkUOrejX9ALVCmYlVDTOVAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> has different semantics than its right operand. The object <img width="20" alt="M" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAXCAQAAADT28WeAAABJklEQVR4nJ2VbRXDIAxFYwELtVALWKiFWcACFrCABSzUQi3MQpcEWEmhnMLjT7d88LhkK0BLBkJathnPUhjPmZ9eooYNHHzhxLV08hxn7GhAw9rdmptaTtePGVvK6G1ZyGDBgenmIa7AY+zEnJfyWBKw4ImiRWce4+5twwCRkW9GNTsnyt3LuLSyM2IUmnHPOYMECfuJLmpZvtNhgnQw8nDXkrgOE6SbbA2O480mCJLqhiZ9niAYncrBUf9DThCMT7KhE5FBgiQ5OLpgNkUwHmxPz6pwNElQDo4tGkwSpJmjhurme5ogKQ+OLJ8kSDq41IppHCJoC4LRLx1ObjJEcL/9Miz/QSjx3WuCSzXIsaH0HA/cf31BHpC8rv234pJWkUOrejX9ALVCmYlVDTOVAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> is <em>private</em> data of an optic hidden from the outside world, while objects <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAXCAQAAABZ9FzfAAAA50lEQVR4nI1UQRGEMAyMhVqoBSxgoRawUAu1UAtYwAIWsFALXJLO3Qzcps3mw4RuyJJNiRAKHSB2zmeKkPHASokq3Rw7P38jMb1xrlLwlBD68soGujh7zumFjzWQ37TsNqMf2vo/otLLjC6HMsgvHjpWLsj6Jo3plnLnr7OUyziv+eCQ8sAFpeiU/FYeOSOWERM5ULTF8oiTydnjt668gp4aF0XTeMHyVZ/HZGm6cnTI5biu3O7rGNOxckHw0O2N2sxN+MFWTmrYNh6erbx6lsVSXj3XxApGE5nU92xgmaREHCd/G7r9A+tji5e2CIjWAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> and <img width="19" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAbCAQAAAC60DVWAAABJklEQVR4nK2UYRWFIAyFV4EKVLACFaxgBStQgQpUoIIVXgUr8MY4etC34TjPyx/hwOe4GwP4Xw7sCxTSAhn2t2ARYZ+3YDvClt4GD4kZEdfXmz+OLml6MAczBNyWEeDOMSOsxBGawx7n/jl8R7DptmrQnwzbOS8zRS69kKWFflJdshS7QknYaAlWr7bil9PAypGVWZ8aWNQVBe/YEU3GZBT/HorikORYmwCnrXzJsUD13q2rX3GOGXo6cRR1d8ziSinYqMvdVZ4u4y9jQ9Q6GlVRokfzG++Ov+Ay3FUWkl5zPNQKq2Pckbb6lfKddldgaQTGO1ZkxmGSY0fH4F6sINmx2r0e+upVsmPhfOJqSY6FzvUFOSb5FhG1V6gLdiYMPzaMS/EqvzBVoSwnz/e/AAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> are “ports” available to the outside world. Even more, if we think about the underlying functor of the monoidal category <img width="104" alt="\otimes : \mathcal{C} \times \mathcal{C} \to \mathcal{C}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANEAAAAbCAQAAABIQKK2AAADLUlEQVR4nO1agZWrIBCkBVqwBVuwBVugBVugBVqwBVuwBVuwhbsFjFFAWGC97+X++C7vXWKckWGXXQxjTwFnnTmaP8J7hafpMeBsYDP72o/+w3l/i54dkq0gTJpjNdLGj+b9LXo2NCBqZu3+f2+kyY/lvUGPzYpt+sQitDBblPPOTwT4v+Il1iOMrzbsRrbAX3eDsMl5bwBhCzHPU3ivUKSnM+acK4oWfJ4IqwwOElZ4PWMBaYKM40m8pHoGsML9ikUHX6VKejKQazvUXI4p4MlJVM6LxZo1RgV6RJRiIDJJiwjNHUycfjl5+w0O0e+mDDpeLJaMsqNAT2ciaLqwQcDgNHCBcIy9oZuv+DlTRf0kLkzSBqVmcA0vFjIjIgv0LMa9sEliGxiRvKhuv+bI57ZeKY/GkEkYg2p5cWjQtWGBnn6/cd8kcRiUVBzZ3vgasjr3uyZhDKLgxUEhMo1GgZ7xcJNnk8RpQAY4UtSxSFsi6wkWR5NwBtHwYsBNk5JGgZ6zo2+ThNdY1WxNNESd/MskrEFUvBjoXmdMRFKBHu5VQ9Yk1yCNeN0Uh93coGiErUk4gyh5MWhhwi9RtgI9XWDguSkAfcRWmhQk4VANGQtuDW+zbWzmH8tl+Vygpw2Yocws9fvcmkWXziKd4vD5vI63yz50QT1F+Ir0uIWy2nP92SQ/JeZAEm1ZcrOLyC/7pLt4cVAQd+miKlvPfFrg1KliOprUVy26MrpM9si09TJIA2cSDS8OCtkCZOuRByOU13ccP6u5nWHL0T5sbYbZijkapIExiYIXhx6VwIr0NPsXVLB7F9tZ6TQXE9hsC6m/wilk4LsGaaRNqufFArdLV6hHmvzpG6TxMim2BFqkNoAmI81NBfpxMOaBQMggjbRJdbxYaB2YvYViPTO0XLGd5BExQ1IbQO1ekkojj8OcmU4PhuMKQwZpiEQrWMeLxfX4Eenx67cjwvHln5Xqmnunz1gzChAVWTVShUwNLxY5SbNQDzfzwB8G3TfR3RA3jw4nc82f/M3A/bypBzFEenpY8hREU8fs0x97mbu38f8jE635YYm2RoFFj/pt5N/CNzz3Ewr8J7J6AAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-2px;" />, there’s nothing in the definition of the optics that requires the first argument to be the same as the second. The private information <img width="20" alt="M" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAXCAQAAADT28WeAAABJklEQVR4nJ2VbRXDIAxFYwELtVALWKiFWcACFrCABSzUQi3MQpcEWEmhnMLjT7d88LhkK0BLBkJathnPUhjPmZ9eooYNHHzhxLV08hxn7GhAw9rdmptaTtePGVvK6G1ZyGDBgenmIa7AY+zEnJfyWBKw4ImiRWce4+5twwCRkW9GNTsnyt3LuLSyM2IUmnHPOYMECfuJLmpZvtNhgnQw8nDXkrgOE6SbbA2O480mCJLqhiZ9niAYncrBUf9DThCMT7KhE5FBgiQ5OLpgNkUwHmxPz6pwNElQDo4tGkwSpJmjhurme5ogKQ+OLJ8kSDq41IppHCJoC4LRLx1ObjJEcL/9Miz/QSjx3WuCSzXIsaH0HA/cf31BHpC8rv234pJWkUOrejX9ALVCmYlVDTOVAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> can be of different type than <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAXCAQAAABZ9FzfAAAA50lEQVR4nI1UQRGEMAyMhVqoBSxgoRawUAu1UAtYwAIWsFALXJLO3Qzcps3mw4RuyJJNiRAKHSB2zmeKkPHASokq3Rw7P38jMb1xrlLwlBD68soGujh7zumFjzWQ37TsNqMf2vo/otLLjC6HMsgvHjpWLsj6Jo3plnLnr7OUyziv+eCQ8sAFpeiU/FYeOSOWERM5ULTF8oiTydnjt668gp4aF0XTeMHyVZ/HZGm6cnTI5biu3O7rGNOxckHw0O2N2sxN+MFWTmrYNh6erbx6lsVSXj3XxApGE5nU92xgmaREHCd/G7r9A+tji5e2CIjWAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> and <img width="19" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAbCAQAAAC60DVWAAABJklEQVR4nK2UYRWFIAyFV4EKVLACFaxgBStQgQpUoIIVXgUr8MY4etC34TjPyx/hwOe4GwP4Xw7sCxTSAhn2t2ARYZ+3YDvClt4GD4kZEdfXmz+OLml6MAczBNyWEeDOMSOsxBGawx7n/jl8R7DptmrQnwzbOS8zRS69kKWFflJdshS7QknYaAlWr7bil9PAypGVWZ8aWNQVBe/YEU3GZBT/HorikORYmwCnrXzJsUD13q2rX3GOGXo6cRR1d8ziSinYqMvdVZ4u4y9jQ9Q6GlVRokfzG++Ov+Ay3FUWkl5zPNQKq2Pckbb6lfKddldgaQTGO1ZkxmGSY0fH4F6sINmx2r0e+upVsmPhfOJqSY6FzvUFOSb5FhG1V6gLdiYMPzaMS/EqvzBVoSwnz/e/AAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> which are available to the outside world.</p>
<p>This brings us to the world of <a href="http://nlab-pages.s3.us-east-2.amazonaws.com/nlab/show/actegory">actegories</a>. They have a slick definition. Let <img width="21" alt="\mathcal{M}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAaCAQAAACEcm1DAAABUklEQVR4nI1VARHEIAzDAhZmAQuzMAtYmAUsYGEWsIAFLGDhvxSee7Yy0t1uO0gDbUNRamUbPbiBWKs+KsCkVnkMmIk2g6QHYU8M+uFHA0jDW9gR0r3RrsFaJUZCdjZat0RGxiWM1hNhgV9LXF0eLG6kMsTlLk6OB4tKlXyVYtWdzPVYJOhbFSxCW3Za3eYOpf5B/aoA6cBxUOYlvI1II8vPwUKkjBr+Fj1GYV7TaG7pCai8TC/UNcluITX9H9SB64GfYnb9MAbLK/Wd1OyOTcQP51+j8jKDVtOt4djbMjtK6wdQ1e4xIa29C1Ct7hX+d/OdNN6k5DDV2kcXyE2XEilMm3rAo2MQSUHaXWgtW+tRWewO15zW9OEoJt9zJzPCzCtt4L7q6JXboKaZ2Zl3TQn6kbwW5L+QcHM9RY8rMrYp8EoerByeTJ5C3jWtdKEX8sq+c0S+/V9LzaEAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /> be a monoidal category, and <img width="12" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAQAAACBIibWAAAA1UlEQVR4nL1UURHDIAyNBSxgAQtYwMIsYCEWsDALWKiFWsDCFtLCXQmBfe3lrnel76VpkleANQx4DrvhMTXCAZ8eYU1HKERHjsKCt062RD3A9fvAAtTojjKm4WRRUqXn4SwS/ZzTDT0odH3iJMFrLsBJrV7PXx/N8mdtCnnVC4mrF25PbEC91jlqL9Ke1mDX05S4xu9/F+CfBJudlwLto4OcT2TBbA6GvFHkctjbiHIrk1ZqZkEZXl4Nqqy263ZHFhnKmx9WFQi33VuU/eTrryVzoNbiL7ZkZyKHSiAGAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> just a category. A <img width="21" alt="\mathcal{M}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAaCAQAAACEcm1DAAABUklEQVR4nI1VARHEIAzDAhZmAQuzMAtYmAUsYGEWsIAFLGDhvxSee7Yy0t1uO0gDbUNRamUbPbiBWKs+KsCkVnkMmIk2g6QHYU8M+uFHA0jDW9gR0r3RrsFaJUZCdjZat0RGxiWM1hNhgV9LXF0eLG6kMsTlLk6OB4tKlXyVYtWdzPVYJOhbFSxCW3Za3eYOpf5B/aoA6cBxUOYlvI1II8vPwUKkjBr+Fj1GYV7TaG7pCai8TC/UNcluITX9H9SB64GfYnb9MAbLK/Wd1OyOTcQP51+j8jKDVtOt4djbMjtK6wdQ1e4xIa29C1Ct7hX+d/OdNN6k5DDV2kcXyE2XEilMm3rAo2MQSUHaXWgtW+tRWewO15zW9OEoJt9zJzPCzCtt4L7q6JXboKaZ2Zl3TQn6kbwW5L+QcHM9RY8rMrYp8EoerByeTJ5C3jWtdKEX8sq+c0S+/V9LzaEAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />-actegory <img width="12" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAQAAACBIibWAAAA1UlEQVR4nL1UURHDIAyNBSxgAQtYwMIsYCEWsDALWKiFWsDCFtLCXQmBfe3lrnel76VpkleANQx4DrvhMTXCAZ8eYU1HKERHjsKCt062RD3A9fvAAtTojjKm4WRRUqXn4SwS/ZzTDT0odH3iJMFrLsBJrV7PXx/N8mdtCnnVC4mrF25PbEC91jlqL9Ke1mDX05S4xu9/F+CfBJudlwLto4OcT2TBbA6GvFHkctjbiHIrk1ZqZkEZXl4Nqqy263ZHFhnKmx9WFQi33VuU/eTrryVzoNbiL7ZkZyKHSiAGAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> is a strong monoidal functor <img width="104" alt="\bullet : \mathcal{M} \to [\mathcal{C}, \mathcal{C}]" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANEAAAAiCAQAAABrNfTTAAAD8klEQVR4nO1b7bWkIAylBVqwBVuwBVuYFmyBFmjBFmzBFmzBFubx5TyRAInisG+Pl7N/ZtkQckMSgsvYgxhaNrnR/vergmjUoMz+Pjr2ZsKM+OpczdLjin6+jMat+Va/VMVLqTARZssbdYlBUxQHZwOb1Yxt9CdWSMmoTtGqVFiRc3s1d7hVGxgpioTSfnb+vhrzjmT5aRnVKbJewxEzW6N+DXVjFDXKsPMuU/RmL4IkOy+jMkWdoyivBGeLmVkDMEXaZeThF2qgw8ioTNHgKMp7no3Uyxd0CgFRpI17zKEDUUOcjMoUSVOx5OO3dFTiC4uSCCnSZ3oNwrM+5y+0VKyMyhTN6kjPWd8bzDmjx/kUVsJtI6RIALp0xDOElVGVIm4KBXtC4vcJXZZLl7XwPprDQqD7SFFnqtDQ/yfCrQgvI0GRrtVH9U8EKgHqaxemLttDnyBLQdz4W7wekGUFFoLg8UeKpgLnGS8juuvBVeh2zNmwMJtZNAijZJsIYY25MXDGXKCjOkEcDaH28imy+l5rylBkRCgSO3rsyMXu94mSeHEy1wi9XP26uoM/FS+5pVofR7lPkShQWVJkgBR1AUHv7BmBkl8a7UfJMZKN5p1jzMXrOV1R4ToBPkWLyY3XQJEBUjSBFJ3rPsUhPpQOYDaS3m93lNw6z42Ik7SnqClQWdJkgBTBBJUseTWWzwmxkdn3Kk3Qbz+O37C+XXlRI1eE7CnqC5QtNBnATDjMlfbi1ovFC/Obqa8DZR2KosYrcShjSZbLe4pEAYpoMoCZTXQj9B5uHNIzuPQC6ZGgze/yt6KOPCbjemlz/XMUsagvlnsI4J9KzaLfhTpN0HzIECUMA0EqPfK7Cim6lpVpMsB9hyW3LbvL3UpewYm0bsFBgu6iSCLbQCFFsZDbo+TRZID73hr/d50hnXuOPiRctoMIuoeiHi1xT9HgcleI/S0uDZqMiJat90yLq6bwBuwA9bYMCG9yvIEifJcuLLqhvCiB4AVrTJMR3Tc3XaytTMgbJ98Aaj9SZjDxS+NZcKAoT9GL4dtJ/tV1cq7ka6qftI+7itsELwPR6cb2oiyZKUyGbKH+wK0PnrhGCud1vNj1eSR0CKAenY0s2jpapwnsYr6jjoWXUfAxQmaD4W/QpJt5K2Aw9RcOFC2One7+UPOukZ1Lc4rgv8PK+Op70ZbdzvS3WvNCKQt+RUd5OoFeXQf3GWLuqaaLmh4r44sU2fenGh9ZXUX6O7o0+suhufpHWn8BVyhKfcGKw0MRAucp4gWaZg9FCJynSBQw70MRAmcp6os8nzwUIXCWojKmfShC4PcF7ZvGqrPqH8X2/37on6EVXfUHdfrOLBcnBekAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-5px;" />. Uncurrying <img width="10" alt="\bullet" height="7" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAPCAQAAAChU0zgAAAAeUlEQVR4nGNgQAeCDOUMqxh2M3QwhGLIoYByhncM/+HwDIMxLoUdSMog8B12xS4YCiEmYwG7sSr9j83N2BX+BzqLKOtBcDe6UiWcSldhOuAdDqXlxAQVJLgEMZUKMtwlzkwQMAaGIgHfI5vcATd7FTBUiAA4454oAADxwYFMwxNSGQAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" /> we can represent actegories in a more familiar form, as a functor of type <img width="87" alt="\mathcal{M} \times \mathcal{C} \to \mathcal{C}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK8AAAAaCAQAAABrnMQ4AAADCElEQVR4nOVZ7ZGtIAylBVqwBVuwBVqwBVugBVqwBVuwBVqwhX0E0BXlI3zI+7FxZmfnXrw5nITkAISkbFAP3nLGtjBKJv309uu3bDQz+SEb+udnIopglRglC9kVuvNh3Tw3RHOooQfSBVNjl2KAecYVql395fo/mNDayXNTNCYWFDFy1D88VcHE2aCmsit/pzGNkXfw3BjNZOlNk0aJ1CO/NwijeHzy/4pDFZrF0puOhak7sgxjhsF0nr1g6eL5AzRCEYupJMKGAd8EywzWyPEqVbBu5o89f4JmV0m+J6Ox6PzGZfkY+Y4mBQ33+Jia5u4RRdgUDdVNzWRmeOIg3YSt0umo/QSlG1WBjGf/pFXMO1u2hqpXoltkNRrIXENfmLiz+izIFjgHCAZyU5mzddAHHL0SqtFw/foYWfaD1nuUEFscMALORzCGXIMDv3TLbEB2/QZopH0d9Ozu+d6QYpbCliHLngRjyDUB7KEPhPKSTpNqNOP1+hqovndS9szN8y/BOHJNR+6x5QY9kN5zVaPhV0FYvNVXOJ/lyrKTYCy5Q8edGfSTNZrBDdDIa9KmzrixEs75Ai1wZwjGkXtuNXtsucFg5cqIt2o0o1NZ5ONg51k9p6JoLhntgVdMaLDHLPmPDIisGjTahEOWcPbR797PkKr3blAW8BWsbkJT9rPpYhfyV0kvvRSBMXYrD7PWEW5lyndH9TkTDergp3EnwF+bUPOPHa1WoplfvfOwutZHbj69J7nGF4bg+KabNdXDItkPKtHIV2S41QY+cnPpvZMLhiF4IaETubv6bmEMMZMqNJPnxcEWe/+rawa9T3LB0gSf/t/1XTQuGphThwI040XP7m1SQsfLn/Z4en3kgqUJ3mx4XQRw+dLyMHImuK19Nhp4YVUD1sBmj0akNrexpMk88pMLNiek3XjJJa4nBb425xqmha1IJZONpubOlV+lI3WVKSJ1iSWWJXvo1+ODXRx+9plozmvkkp30qM/tY9S1Mbju3vTDPxJpE6o0FKCBwWu3i/Q/Yv8AKO0Efwk6uHAAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /> plus some equations. This looks similar to a monoidal category, and the extra level of generality will be needed to represent affine traversals.</p>
<p>An actegory is like a <a href="http://nlab-pages.s3.us-east-2.amazonaws.com/nlab/show/para+construction">parameterised map</a>. A <img width="21" alt="\mathcal{M}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAaCAQAAACEcm1DAAABUklEQVR4nI1VARHEIAzDAhZmAQuzMAtYmAUsYGEWsIAFLGDhvxSee7Yy0t1uO0gDbUNRamUbPbiBWKs+KsCkVnkMmIk2g6QHYU8M+uFHA0jDW9gR0r3RrsFaJUZCdjZat0RGxiWM1hNhgV9LXF0eLG6kMsTlLk6OB4tKlXyVYtWdzPVYJOhbFSxCW3Za3eYOpf5B/aoA6cBxUOYlvI1II8vPwUKkjBr+Fj1GYV7TaG7pCai8TC/UNcluITX9H9SB64GfYnb9MAbLK/Wd1OyOTcQP51+j8jKDVtOt4djbMjtK6wdQ1e4xIa29C1Ct7hX+d/OdNN6k5DDV2kcXyE2XEilMm3rAo2MQSUHaXWgtW+tRWewO15zW9OEoJt9zJzPCzCtt4L7q6JXboKaZ2Zl3TQn6kbwW5L+QcHM9RY8rMrYp8EoerByeTJ5C3jWtdKEX8sq+c0S+/V9LzaEAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />-actegory <img width="12" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAQAAACBIibWAAAA1UlEQVR4nL1UURHDIAyNBSxgAQtYwMIsYCEWsDALWKiFWsDCFtLCXQmBfe3lrnel76VpkleANQx4DrvhMTXCAZ8eYU1HKERHjsKCt062RD3A9fvAAtTojjKm4WRRUqXn4SwS/ZzTDT0odH3iJMFrLsBJrV7PXx/N8mdtCnnVC4mrF25PbEC91jlqL9Ke1mDX05S4xu9/F+CfBJudlwLto4OcT2TBbA6GvFHkctjbiHIrk1ZqZkEZXl4Nqqy263ZHFhnKmx9WFQi33VuU/eTrryVzoNbiL7ZkZyKHSiAGAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> is a map <img width="47" alt="\mathcal{C} \to \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF8AAAAZCAQAAAD9RDoPAAABbklEQVR4nMWYAbHDIAyGsYAFLNRCLWBhFmoBC1ioBSzMQi1gYS+wXm9jW8lPAy+5213bcHyU8CedUuem1ZzdVOLGGECj1aLu6nG47U8nR+NUpHCXPeYB6xjO6zSGQu9qOq5tHuAGYArQTLQ+X9z5v+QBaVJ4KO4tFL71oasYSKPpQaTfd9towK0HXcVgGvclq2bBdx9fcrhuIE169G21QUz1N0AAYJrQXV8csI8gzfNEI5uLm2ErGEzjhuiLpznKhBChSSfa18MuWlITTv0Gacywypq0fK3sAEzzLMXzRTSeTfRut9O5YBrXjG/2Jgr37acgwzTt+GrvwRFPohhOZmvEH9OWedqvRZbGnR4WK1gPPKN1gGmWPRs/TVO3HcXaBstKCpjG7Mfps5fzoknF63oaaEIeUG5s+jiTa5ZvNAOn5jbQTIeguTxI0yrD22fadVvZlbSBxhYKHsWrMJKGDTTp74iQ3XUR0ZmZOmyaPzXqDEcTBNCrAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> parameterised by <img width="21" alt="\mathcal{M}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAaCAQAAACEcm1DAAABUklEQVR4nI1VARHEIAzDAhZmAQuzMAtYmAUsYGEWsIAFLGDhvxSee7Yy0t1uO0gDbUNRamUbPbiBWKs+KsCkVnkMmIk2g6QHYU8M+uFHA0jDW9gR0r3RrsFaJUZCdjZat0RGxiWM1hNhgV9LXF0eLG6kMsTlLk6OB4tKlXyVYtWdzPVYJOhbFSxCW3Za3eYOpf5B/aoA6cBxUOYlvI1II8vPwUKkjBr+Fj1GYV7TaG7pCai8TC/UNcluITX9H9SB64GfYnb9MAbLK/Wd1OyOTcQP51+j8jKDVtOt4djbMjtK6wdQ1e4xIa29C1Ct7hX+d/OdNN6k5DDV2kcXyE2XEilMm3rAo2MQSUHaXWgtW+tRWewO15zW9OEoJt9zJzPCzCtt4L7q6JXboKaZ2Zl3TQn6kbwW5L+QcHM9RY8rMrYp8EoerByeTJ5C3jWtdKEX8sq+c0S+/V9LzaEAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />. And parameterised maps have a well-defined composition rule. A <img width="15" alt="P" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAXCAQAAABZ9FzfAAAAx0lEQVR4nNWUYRHDIAyFYwELszALWMACFrCABSzMAhawUAu1wJJQ7rY2LLS7/dh7f3ppv8BraAEkRciCI9qBEYk3WXwsQUVnvO6O8MDKCkFvQC0It7vqHfGKjVRFxo8KXL9peOatj3alBqiDTbrhncMa++SkFsp/xkfJARZ++8r4fpLc8NpJg+XkFuFVS02KG97tsVIQTfq8SZR84TPeHcQpDDQx2bFacncVb8knPkxZBeFyFTbfJXf/m9xuf7jT8gy+euJ0PwFlV288eF8yWQAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" /> parameterised map <img width="53" alt="A \to B" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGsAAAAZCAQAAACcXBhNAAAB7UlEQVR4nNVXbZGEMAythVqoBSzUAhawgIVaqAUs1AIWagELXNLe7EEnZRM2O7v3+q8DIV8veRjDxWRG9rP/Bs7sZvm0EyaYRJwF7mfw8AYShJW0vRTDQ8dE8ART7B9nhLA2uIvGysyNxdT6Hl+F8MWXobm1Jks9tPD4Wox9AwL4sRH3U/Fwkhiai7HvCCt1WO6Kh4FrxpXSBrL0nwD6MRP3gyysBN1swBC+5NWc226miGYWonrIXEI4ef7M6W2uzM/rCT1miUYGDos6NL2sxAz38q33eszCsZ+5Az4culg3LHez9hSzLASKwTKDcqei7mXh6SHys/tAyywHN7iKFwnrzw9nZZ2BbJDKsVBaLZzOClZmfoJ8Uxt9+TSUPEsqlsiO8WAncyfr2nwwvWEhD+BOFjRQT0fU+cgQu9ixZ52cn4bliuC8czJLf1dmUU8yFQYOC9+c2DV6/LD01Nbm1asyi8bOoQg1WbR1BiJCfSkhRINmFsJywvLkhPLqYUWhhOor9KmrFA9oh0WFts4YhUnqM6sun+16poZu1LphSVVhn1nxuV4dLqadps7AtpFpjB6z4rPfRwt12rp/Vf73x18qeGgswgRRFHAQTNXtFwxNhz3Sjoy12TOv/6DwbYwX+26F5OjO5hfhlarewQ/04S56jjbjewAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" /> and a <img width="15" alt="Q" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAfCAQAAABaZbWMAAABN0lEQVR4nI1UCxWFIAylghWsQAUqWIEKVqCCFahABStYgQq8OfCBODYu53h0cNndxyklw+DSEydfsCqoUzlcXl3wXGaJFxDWxqLBcskKFqAloPfQKsJaCUZDPYFKe3CwEyTq1+uzm2AZjuoYXff+QW/dsi42pwFPEDAoaiS5Xp9Gt0aWms8Q5OyXi5chH2iWmiDSMccJ0Ss68L1Z0+YOFk/tvXkuYo+nPg26T5QpiyZaZOcar8DRfh/ZHHnBlJKBrXQqGtylPEet+275Dd6Pxs+GhRx2gW3qvJVrTNGSxwDbQOEfU/3hPV4RQZfQe3UQVLkBczw5+hxGnhNj4CvCVy0OO7+yfwukgD5tVz6pfTskSN6DTWzfD/kpn5HGLkVOWG8/HnxjRKQncTCScIUq1pmGhgvIH+YHoqaW4TYB9VcAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" />-parameterised map <img width="54" alt="B \to C" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAAAZCAQAAACRQmgKAAACCklEQVR4nNVYbbHDIBDEQixgIRawgIVYiAUsYKEWYiEWsBALeXdHZ5rm8bGk5HXe8qdDCr2PvbtNlfrfGJWhNZ72CnBqSawH7c9K32oqDkv2bCo8bQtkW8SkfOmYoYNe7bQeEpW4LB3faM+r4Q9ML9sXxI5XfgayzcuTnZyrHmfXzskd5NK1s6ktYCd2ytNv9rBzHPoqr/iCLbE/icvVyNyEgcK6ZynHYQ/1Sxah429occ0lntyPsmMxHcVKi2AH5sT++EXXVqFiHvZ6pTFmeWKv23fAVm7UJ8QSKVWS+aTS+raR0JB9A7DFfFJpXgq1V/N3iCkHi7bKL5urlTaQs+xwv6mmYWrHnAGGYxe96kDTDo9rHuB94UEO+F4V7oR27m2t5NjcXYdw7aaIf8YmrnXAkky+Ec3W0tMQjMKGcsjiLC21fRg5vVFvv1cwUsBCkepId4QQL0o5gCgR/SRP+wrZoGGuAXxyBSWGEMM0r0VuzecNcw0gbLrSGEM/zh/Aej0l6V5AxJ1FCJtX9lNWWV6Hh+TWVnUNmLf5SosvDTVF0AYWtMis9BV5NyMBz1dat7F5AKoiYwPLBQESWPlK8ze8gjLBUQ44yVvq2xMm/lK9SNPhqPd7j+tHkyqMpHwvFS1/RlVgCxNnpWt7q0dGK72thJgFH4+MmT6VRsZXYS60JBbq7JKv/XH4A7dIKfZiwPbRAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> can be plugged together to obtain a <img width="48" alt="P \otimes Q" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAfCAQAAACy5QCnAAACyElEQVR4nNVYgZGEIAykBVuwBVugBVugBVugBVqwBVuwhWvBFvwkeAoHITn/b+Z+mfmZV4EN2Q1wxvwPWGqD9nNvlkrz0EbTfZJnBQ5mXmlub2bzgL8KBhaIBrNDW47YseEAu9nM9HnWBxwQnk2fPBngyUOXCUsB2JenAwSwQyifR0fL5YrnyGDLgmLgKYASEz1XDEB4U7snOpDNzvTzpAwRC/NZzIwsIwcUUu3ORTZ5RPrl6j/f1rRRYGekMrJvLliinmdpAFctqsxF+q0Z8H1oD1J3ACJKi1sdxARE65XCqgyIMzyatWahL8RBag4w0BErET+8g7c8yUkMwYoL1GJ34q4DLK3+wpB0kPhesbpbmxx9IwRQ13lH699S34NUXg/BHT1dQ99W4TBFAHUHoIK3ZnLHM7gyBJcEzucgbp+STzbJA/4I4NlwzVboFoQqMidT5yG4LG8TK8JNIaCe2M2tT6LLfdImVRXPV+UKwb3IbmCmH2RqNJq4E2l0WKIrbB9DeKWPqO+kOgfM0lkgDjMKw9T6lbTQ9jWydQtOihIaBdTcxqID3j82DxWqAdpaoVS34KQ4JHj5LIYb9dochO+ZI9BKdUUIpdgi+P3/6imehrubDkCsWd5CUlTzEEZm/F60Z6DFbapjvOkAhE9ohkyneQiBrfT5MW2kUXzy/948qBwk7jkA0Z/aDoXNrhD6xmneJfvAc1u0R07iVUY8DN53AMLTZCV9xDOEpany5RTwFSbuDBbIrzJ9e9yE72OF6bgi19Hbtr+uy8z13UK6EK7zcX9LW7setwjwPeu5eYUnJ0Sz4o8J+SFGe529jY5yUE4z0Epqx3DHjzueljYVnXTU+BOMYOcAU1siY+mWxt0SZKRVkSvBH8BA13kkHiCA3yT+Kq1W95PKtyGefuIPaxoPfR22s7C0r6NfC3/QV+wD3wr0U3X7+wGaclyQECS8lgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-4px;" />-parameterised map <img width="53" alt="A \to C" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGsAAAAZCAQAAACcXBhNAAAB80lEQVR4nMVXbbWDMAyNBSzUAhZqoRawgAUsYAELtYCFWsACL0nZ2daNNtnC2+2fHejS3N58ASDFAEG893/Qg8fVF89UcLDDYujSdwjoywYJIq8E0/F8gFlnKCKtaO7eJ/BIY0f377p0SGvmNzsSUyDgH3ZYrT1UgwjQ9bqXN0Rsw3evbyrGVlxE7Lfo2IuzMCMNk8bcBCPf0m9p1UkBe6jILMfBl2kp64wp1kZ2B11mRUxFQL2Ilv/Wtwdsqkuia92qmeM1mRUOYT3Tsuxc97LcRj69vt/LM4viuRMb1mFSJHhkrbrqHi/PLCoWN1jTcmL185UqG23t4MdOZWqaMaNedQVu+0wTYHkqEcl8zujQpmQg2yybSxmrV4xPPbq8NBRzTMrs5LU4Ll7SkHtULFUbh2mxmvAe49NKAlruCBj9Sqc9R0ZL1AOpWPhi5cRtNbzyX+2Vg/tcLxktUZAub46xnzMINHeP1R29gFaQBKl/W5/8BbRm0Qi1NWm1yg6jLBYZ9nNGEF7T3PjWGxt6M6bTTda0pFOhq8aJaGjqK9XOds4Y0JpkxiBMrNe73UM7ADvUaTv9qvLHh7/UlRYW1RXlQHyuww5tNPWOD12kLBlr0WUs5jOtlcCdc8Grp7Yw4q9aW/gZ/Ae6e1SH6MxIq9pB/wBRawM/IbqYXQAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" />, as animated below.</p>
<center>
<img src="../images/para_comp.gif" alt="Composition of parameterized maps" width="600" />
</center>
<p>Every symmetric monoidal category <img width="12" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAQAAACBIibWAAAA1UlEQVR4nL1UURHDIAyNBSxgAQtYwMIsYCEWsDALWKiFWsDCFtLCXQmBfe3lrnel76VpkleANQx4DrvhMTXCAZ8eYU1HKERHjsKCt062RD3A9fvAAtTojjKm4WRRUqXn4SwS/ZzTDT0odH3iJMFrLsBJrV7PXx/N8mdtCnnVC4mrF25PbEC91jlqL9Ke1mDX05S4xu9/F+CfBJudlwLto4OcT2TBbA6GvFHkctjbiHIrk1ZqZkEZXl4Nqqy263ZHFhnKmx9WFQi33VuU/eTrryVzoNbiL7ZkZyKHSiAGAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> is a <img width="12" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAQAAACBIibWAAAA1UlEQVR4nL1UURHDIAyNBSxgAQtYwMIsYCEWsDALWKiFWsDCFtLCXQmBfe3lrnel76VpkleANQx4DrvhMTXCAZ8eYU1HKERHjsKCt062RD3A9fvAAtTojjKm4WRRUqXn4SwS/ZzTDT0odH3iJMFrLsBJrV7PXx/N8mdtCnnVC4mrF25PbEC91jlqL9Ke1mDX05S4xu9/F+CfBJudlwLto4OcT2TBbA6GvFHkctjbiHIrk1ZqZkEZXl4Nqqy263ZHFhnKmx9WFQi33VuU/eTrryVzoNbiL7ZkZyKHSiAGAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />-actegory <img width="12" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAQAAACBIibWAAAA1UlEQVR4nL1UURHDIAyNBSxgAQtYwMIsYCEWsDALWKiFWsDCFtLCXQmBfe3lrnel76VpkleANQx4DrvhMTXCAZ8eYU1HKERHjsKCt062RD3A9fvAAtTojjKm4WRRUqXn4SwS/ZzTDT0odH3iJMFrLsBJrV7PXx/N8mdtCnnVC4mrF25PbEC91jlqL9Ke1mDX05S4xu9/F+CfBJudlwLto4OcT2TBbA6GvFHkctjbiHIrk1ZqZkEZXl4Nqqy263ZHFhnKmx9WFQi33VuU/eTrryVzoNbiL7ZkZyKHSiAGAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />, which means we have a clear way of composing lenses and prisms – as actegories! Let me spell it out.</p>
<p>A cartesian monoidal category is a <img width="12" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAQAAACBIibWAAAA1UlEQVR4nL1UURHDIAyNBSxgAQtYwMIsYCEWsDALWKiFWsDCFtLCXQmBfe3lrnel76VpkleANQx4DrvhMTXCAZ8eYU1HKERHjsKCt062RD3A9fvAAtTojjKm4WRRUqXn4SwS/ZzTDT0odH3iJMFrLsBJrV7PXx/N8mdtCnnVC4mrF25PbEC91jlqL9Ke1mDX05S4xu9/F+CfBJudlwLto4OcT2TBbA6GvFHkctjbiHIrk1ZqZkEZXl4Nqqy263ZHFhnKmx9WFQi33VuU/eTrryVzoNbiL7ZkZyKHSiAGAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />-parameterised map <img width="47" alt="\mathcal{C} \to \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF8AAAAZCAQAAAD9RDoPAAABbklEQVR4nMWYAbHDIAyGsYAFLNRCLWBhFmoBC1ioBSzMQi1gYS+wXm9jW8lPAy+5213bcHyU8CedUuem1ZzdVOLGGECj1aLu6nG47U8nR+NUpHCXPeYB6xjO6zSGQu9qOq5tHuAGYArQTLQ+X9z5v+QBaVJ4KO4tFL71oasYSKPpQaTfd9towK0HXcVgGvclq2bBdx9fcrhuIE169G21QUz1N0AAYJrQXV8csI8gzfNEI5uLm2ErGEzjhuiLpznKhBChSSfa18MuWlITTv0Gacywypq0fK3sAEzzLMXzRTSeTfRut9O5YBrXjG/2Jgr37acgwzTt+GrvwRFPohhOZmvEH9OWedqvRZbGnR4WK1gPPKN1gGmWPRs/TVO3HcXaBstKCpjG7Mfps5fzoknF63oaaEIeUG5s+jiTa5ZvNAOn5jbQTIeguTxI0yrD22fadVvZlbSBxhYKHsWrMJKGDTTp74iQ3XUR0ZmZOmyaPzXqDEcTBNCrAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />. A cocartesian monoidal category is a <img width="12" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAQAAACBIibWAAAA1UlEQVR4nL1UURHDIAyNBSxgAQtYwMIsYCEWsDALWKiFWsDCFtLCXQmBfe3lrnel76VpkleANQx4DrvhMTXCAZ8eYU1HKERHjsKCt062RD3A9fvAAtTojjKm4WRRUqXn4SwS/ZzTDT0odH3iJMFrLsBJrV7PXx/N8mdtCnnVC4mrF25PbEC91jlqL9Ke1mDX05S4xu9/F+CfBJudlwLto4OcT2TBbA6GvFHkctjbiHIrk1ZqZkEZXl4Nqqy263ZHFhnKmx9WFQi33VuU/eTrryVzoNbiL7ZkZyKHSiAGAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />-parameterised map <img width="47" alt="\mathcal{C} \to \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF8AAAAZCAQAAAD9RDoPAAABbklEQVR4nMWYAbHDIAyGsYAFLNRCLWBhFmoBC1ioBSzMQi1gYS+wXm9jW8lPAy+5213bcHyU8CedUuem1ZzdVOLGGECj1aLu6nG47U8nR+NUpHCXPeYB6xjO6zSGQu9qOq5tHuAGYArQTLQ+X9z5v+QBaVJ4KO4tFL71oasYSKPpQaTfd9towK0HXcVgGvclq2bBdx9fcrhuIE169G21QUz1N0AAYJrQXV8csI8gzfNEI5uLm2ErGEzjhuiLpznKhBChSSfa18MuWlITTv0Gacywypq0fK3sAEzzLMXzRTSeTfRut9O5YBrXjG/2Jgr37acgwzTt+GrvwRFPohhOZmvEH9OWedqvRZbGnR4WK1gPPKN1gGmWPRs/TVO3HcXaBstKCpjG7Mfps5fzoknF63oaaEIeUG5s+jiTa5ZvNAOn5jbQTIeguTxI0yrD22fadVvZlbSBxhYKHsWrMJKGDTTp74iQ3XUR0ZmZOmyaPzXqDEcTBNCrAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />. Composing them as parameterised maps, we obtain a <img width="42" alt="\mathcal{C} \times \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAAAZCAQAAAAFpMH4AAABbklEQVR4nL2XjRGDIAyFWYEVXMEVXIEVukJXYAVX6Aqs4AquwAqWn+pZSuNLUMNd7yrE9yEhEKVo02pIrTsYd7YxdLV6qkktWzPX00l0rfJhuE3NJ4fXLZgs3S4MnVS//TfJwV4OydTtw0zG4skdS8/UjcNd8ewZhs/X0El1dejw4ffb5uDwuIJOrmsrMTFA37Mn+vRhkmHqxq7avByQzZYivvaY08+iNuq6hr39+IMaMT35vdm6eY/Rr6SshopgsnVt894uURFMge5MxBlqe1QMk63bnXT6rKgoJls3H1eDnHCzjIphCnTtaaD5REG3B1v3PNC46HjcCUHbLx463YD037zarGvJoDbgQq6Y0TBUtm6Oq1o+y/sXKUX2mCgqW7f7XPx/bysjuDQlJoYq0HXJoUwqsSBArng1TAyVrdtv5ZRNTjrMx32VBpTVMVdUKqELdM2nnFqbZ5wYIxHF5uA9At1YqrrU7G3lMaj7BqetB38OKDrdAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />-parameterised map <img width="47" alt="\mathcal{C} \to \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF8AAAAZCAQAAAD9RDoPAAABbklEQVR4nMWYAbHDIAyGsYAFLNRCLWBhFmoBC1ioBSzMQi1gYS+wXm9jW8lPAy+5213bcHyU8CedUuem1ZzdVOLGGECj1aLu6nG47U8nR+NUpHCXPeYB6xjO6zSGQu9qOq5tHuAGYArQTLQ+X9z5v+QBaVJ4KO4tFL71oasYSKPpQaTfd9towK0HXcVgGvclq2bBdx9fcrhuIE169G21QUz1N0AAYJrQXV8csI8gzfNEI5uLm2ErGEzjhuiLpznKhBChSSfa18MuWlITTv0Gacywypq0fK3sAEzzLMXzRTSeTfRut9O5YBrXjG/2Jgr37acgwzTt+GrvwRFPohhOZmvEH9OWedqvRZbGnR4WK1gPPKN1gGmWPRs/TVO3HcXaBstKCpjG7Mfps5fzoknF63oaaEIeUG5s+jiTa5ZvNAOn5jbQTIeguTxI0yrD22fadVvZlbSBxhYKHsWrMJKGDTTp74iQ3XUR0ZmZOmyaPzXqDEcTBNCrAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />. This is a <img width="42" alt="\mathcal{C} \times \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAAAZCAQAAAAFpMH4AAABbklEQVR4nL2XjRGDIAyFWYEVXMEVXIEVukJXYAVX6Aqs4AquwAqWn+pZSuNLUMNd7yrE9yEhEKVo02pIrTsYd7YxdLV6qkktWzPX00l0rfJhuE3NJ4fXLZgs3S4MnVS//TfJwV4OydTtw0zG4skdS8/UjcNd8ewZhs/X0El1dejw4ffb5uDwuIJOrmsrMTFA37Mn+vRhkmHqxq7avByQzZYivvaY08+iNuq6hr39+IMaMT35vdm6eY/Rr6SshopgsnVt894uURFMge5MxBlqe1QMk63bnXT6rKgoJls3H1eDnHCzjIphCnTtaaD5REG3B1v3PNC46HjcCUHbLx463YD037zarGvJoDbgQq6Y0TBUtm6Oq1o+y/sXKUX2mCgqW7f7XPx/bysjuDQlJoYq0HXJoUwqsSBArng1TAyVrdtv5ZRNTjrMx32VBpTVMVdUKqELdM2nnFqbZ5wYIxHF5uA9At1YqrrU7G3lMaj7BqetB38OKDrdAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />-actegory <img width="12" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAQAAACBIibWAAAA1UlEQVR4nL1UURHDIAyNBSxgAQtYwMIsYCEWsDALWKiFWsDCFtLCXQmBfe3lrnel76VpkleANQx4DrvhMTXCAZ8eYU1HKERHjsKCt062RD3A9fvAAtTojjKm4WRRUqXn4SwS/ZzTDT0odH3iJMFrLsBJrV7PXx/N8mdtCnnVC4mrF25PbEC91jlqL9Ke1mDX05S4xu9/F+CfBJudlwLto4OcT2TBbA6GvFHkctjbiHIrk1ZqZkEZXl4Nqqy263ZHFhnKmx9WFQi33VuU/eTrryVzoNbiL7ZkZyKHSiAGAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />, i.e. a strong monoidal functor <img width="141" alt="AF : \mathcal{C} \times \mathcal{C} \to [\mathcal{C}, \mathcal{C}]" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARsAAAAiCAQAAADFJrV7AAAEhklEQVR4nO2ca7WrMBCFsYAFLNQCFrBQC1jAAhZqAQu1gIVa6E0I9EAeM3vI9MG6bNY6PyidPcBHMknoKYpTR9KlGObtcgzXa9G8I6MMlUU9bdV/4mtVF8+im7a0u0Z+2xjV7Pk0e0SqzFduyU87dhPaMSqLtribjJbtU0B/y/dPFpu0NPKjYoixGcxXhuSnrQHjNpncA2DGaf91xwmk1BWPl89jip4GWlPf8l2LwkYjPzqGEJtmRoI/Jha2l1OaVGWyuK96WOfaKUX/PV9fKWw08uNjiO5jOYV7ks1jMfV88SNKs1+ngLuYJ6D39nyis/iWb6g4Nhr5ITFE2HRTJ8Rhcye6sQduRsiemO/QGtdRJfrv+cYUw0YjPyyGAJtq6pwcNuk2oyQbRQ1sSnMKD/N3q1G5bvod37hCbDTyQ2MIsBmmQ9tk5eKUrmxcjHx1ESxr4JmiuscSGKTu9UX1EHXgITYa+aExYGyaub+rmb4y7MSazae5sv6x52Fgb/zT67H/ZGs2Duj9vqhG0dXxsdHID48BYmMvbPkKTVXmYWWDtzB2aslP2tewe9xyTYBjz41/0vf7oupE7YKPjUZ+eAwQG1sM/30lHTysbGrBnMGdHdxfmMqKVgwcDJo8X0yVaMSzxUYjP0kMCJtqczOfRHPvVzb2m23i2FgyyOA+p5bwwcGgyffF1BsPrrVdtMVGIz9JDAib2+agkRhgu8pmWe4ahc9ArCDbaiSQxbQGB4VGwxeRHcegbfMWG438JDEAbGovGLW84LqZet6a6bboqVKZkV3AwaHR8UVkZ01uUIuzxkYjP1kMAJu7dxoDOQu8v7LhRQ/ucTlwUGj0fBFdzFM/Al5rbDTyk8Vgj+ymWcP1NiaxCa0bQWXDq1O7fa2o+9zvW83LgPJtZAbOa2w0rossBnNktepylq2fDGInFc7ZdKqjDy1sbPck6clzfP2rx2+uCODcfhqbW+Tj9DwxtRqlIXdqucuGbkG2TM7jvMsXU2/aJ6SFDrHJy08Wg8QmXpnUCWzo1SgNdaRDA7VsCzRWKDgavph6uN4KscnLTxaDxMYvhp1S88TvLxzbudcP5UZF/DT6GhorDJx8X0yN4PqtsdHITxaDyLNLNpZxbPhXKnjRF62ay8VwRbeHGlgfGisEnFxfVJJVqXAAjuYXv8ayGElsLgQC8Xni/MqGX1xwg3+/IbejPf7lgBg0Vgg4Ob6obB7oHLE/3Yfnl77GknOMYmNfPrYDx3if6Dop/wa4vXmzNPziwuU1QHVjtNI8B8PmBca04tBYXdmaLMcX1U00zxtbk0LyeyZLCck5RiIMr6+HGKzfZF8q79bblxqe8+qBkrrxZkIecMPeE1k1b/RFJevu/BVwNL++cD8PiAk/x09NfirKtoVu4rH76Du87/blXxrZHh2+3YfmVxNvMGAxDojNKSv6d1K0mmzsT2wOqhxsqF9yYjqxOaj2Y1MqLC+f2BxU+7HR+EH1ic1BtRcbfsyI6MTmoNqLjc7tPrE5qOrX7Monb+B3XE+pafm/M7LZHnXXfypQYcmUa2WSAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-5px;" />.<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> Fixing some parameters <img width="101" alt="(C, D) : \mathcal{C} \times \mathcal{C}" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMsAAAAiCAQAAABbueXyAAAED0lEQVR4nN1ai7WkIAylBVqwBVugBVuwBVugBVqYFmzBFmzBFmb5OO84moQQYd7buZ6z56063MANSUCUwtAriz77PLS3Rv+2Eb+PXs3ZYeiV8Vd/utcKo1qaC6Njj4zqGvMIeXu1kq8M6qE2/84cr/VnXo3KFRhj99+/Xw9/fwTZJ/+sFbRvfVHPn2toxiTm1f7FCX1qvAxPP/z94X0b5TD+/lhgkvFGuGjMvHtLuCZ/b/P3oKA1Nwqs1jMu/l8b/woWtXMAMW/wYhhBgDCIV1+2+2CWTn8TjTEXniDXNWh1/m7tMNl5nuXQ6hAtap9XC3k7YJgSdJxuWJgKc2gtNs5GYyA8QN9xqMvI0Htncqc7nwhixbzODz4EWpQ0wCWZJWGOsw/mg+aRQZ1GgjA4Z/ZJ5F6NecNgwHllQQcwYSjMLAnUxJ1BoddqcV/7trZLoFxF/WjMOyH5IcyFjcwcplpmeeeE7tYplC3gEoY1V6j8prOjIOBdwIeGkQZN1cyCP5XNyitMFP3qs1BBcwYerkOop7OfgFcjhDPY1JmuZmYJSLKcjcVsPL9lMvbON+qtEbEhiLJlakUBrwF/kuZK+aDnQc9Bh8ylFSlKjlhigY0j1T3yYhsShiOKiNeCkd41KhnpzJL8CpJlJgLfC08yPKae3qu3zsJwRBHywrJsmS5KQWeWNLSQxzuGv0Fp9Yi1wvw/CsMTRcg7A1VOt2+P1AedWfAyA3aeEnSVVvIvYbiiCHmh8MCpwmSg27VoFL4vy5AJn3wkYXiiiHnlspQnz1xmWdG5dF8WW02WtNLjJnEhr1yW8iBHZ5aR6MBfkkXHlR43X1SUpWfIMgiCHL2ZE7qKbbLUkuV+banjLrBG1zGVeOEaZ8vK8ijeDtGk2JZcvtaSBWMfmCHpJUoATxghL75uoZZmE/HRDAOV/PooCj40UL1YhpQPoPVDqqk4e3tHUQI4wgh54f2mjoyI8KZLzpvxzGK8eXRdMwMbmGUWdPty89pXxwwyZ1EC8sIIeTtipQAfcBjBAJbb+sAzS2KivZWzispZkHYQzvKHT7ecbVBIlIC8MELeFemyA4ari8chIDwzFQdU3Rn///AdIhcQMdeBLMDRq9ehBhuHSHtfnd8+4lKARQkYM9YJeR3amWGvjqb9IMQjHozAW1lA88Yfs87X6n/F8dSJtUpwjOpxe+PfCqpJR8znXFUq4h3I2Bo8Osjh/ODk0qJpdEzhUe2TbjgMlA5B2Y8dQBLzrpW28IcmXcU/an85xtvlZ4JtcjZxyn6O+1rAWaEMuskBOM0oCb4WhrmgomArHhs6tpr/LvnFwM9V8iDZI8ujZ26ffzHcrWDRYqaEJVyLdv8z8FYRn8P8x+z5NfylgJE/FPdV+AcwLXB5ZlSoywAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-5px;" />, what does the resulting functor <img width="132" alt="AF(C, D) : \mathcal{C} \to \mathcal{C}" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAiCAQAAAAJv4+QAAAFF0lEQVR4nO1cbdmsLBC2AhWsYAUqWMEKVqACFaxgha1gBSvs4UOfVWBmQEfd93r35s95UOEGhvmCPVX1JJpKPdp/CGH4iKdJ/FfQVS1zi001Zkx/U0lTmqDuKnTV62KREG48sqov7SUXh9nU1bsakOeKLDL4oqkmgkZrepzNW6Mr05826SpdwFwt3+/LYOq7ZP89Os4zEKbtl5nHtXBvsFvZjOaTEXnemwkeXMOvSBQmV98FdF7mGxjSfaU3usCqc+2ehG3hkGao2jEYl91gS2/qZlOXMhHjJYZMmf7WuZkdn6sE7wY27bLUOW+FmsBCR/UKES+79Hb54v2rlmUsVXAyyUw4XrGJsNqQ1yjVppfXpk0/U0/5T6fZCNeA/QiHAt8RwRTXgOCsvb1Bo2D1xkTwKGE2JPeGRrVhKRojxDqoec5kMLBRziDQAvFCzMq8+0uD2gYXB7+0JR6EB2zwRFJ3SERgS2EXIOy7PyTWX8KmdovnBQJTpAJVPHPwJuQ/YEJl0RZ6EB4YszEpYhOThRempTkyStOhUXwJm9HtlR70D1bAHoRv5YMe9AKs2M2ohyDZPIh9n6lajvBTJURRsuqHucDfYWDTLrtHknYmNirt7ukHL4CAzHBuJKsHAT89polCSCds8Y5MOcxHMWW7gwxsxJ8PTi9WrOxhq532AsYk4T0kqwdh4QUinBKY5fYdSbAdb4glVPYWYWCjNrYeF4jYg5CAFZZAO17kypebBs5cA/pjIsPsFxGKN6TfxYE6M0JgYFPvhosvV+hB1GDiSSG5iitCMdyD8PsmJRAjGVW9ichL3RRLaNML7e8wsBl20zhlKN41MTwh0ggJxJwR2B4BFTBDKTdN7qeUi7bFdJHGCyGyYqLTbEJrjVtirz7XxHBr/h177p92YnmuF4HiB84b9o0gwc1FneEic8FmFwZUSzCwCVO6kGq1yPcgIFWcE2EcA94unF85KxB4GM4Ne1Q4Ib2dZqNcRmtbJkQg4u5aMPV0RiDKXSLKg4AN4VmBUCeWoF4MaHmBTpDPsKm8SyiDopPh2ba7fQ20eGcEotyk4B5Eh0zTkwJRRbNPF28asfTbifEMiU+xXCWVcN4iLRBNhkC0B0wKzszqB8i08QjEXQdY9hQYu05wik3a/sPKFz/FCAF57zPZBu42pYAz80lrqE0egYD6blnzE5pMYJ9ik75EBiv1MocFy0NgaZ4e3QFpYMwaJw7wRKSjoXz0i02PIVwMxpe8bjNm/wQbBU48FqDlZxCgU4IaFat0ypqaBpiZNJOA76oRDJzz+q8XNy8eq2Y2JTmnGYfZNMjSQrnKEg/CU0sPQFWp+0sWXdJcUKljmJnvCd+j9Jio/n2gHoqdjd84j767TE12gI29djkDFn41GfGC+fqS2wMTONU6sVC1uxCbwpswVSkjJ91hEO6A+V5pr4hKXTd/waCPuYTZiePu8hoHhsz8YzGbcRPNhsu7vZ378Vb7oBYOS/fQyDS2i+ffL1dhBySU8uKTWrYuwWyN03XW/uzBjbHvn4qL9vmE+YLUW775uYPNIbTEIKS7wT2aCe9JAZMXDWpgOpayWtcn9tRFISh1BH8vm4OY2A592ksGhl3y++EC5DpCNNQlv4DqyYs6PzAjbftLIS75sYvIcDp/YIZkSc3EPxDkgCLvSv1wAbDfbuXhyNkGjaboHvMPjNAnFfMV2kG4c94fHkJeTuBOjF/H6H+G71LO4kv+14YH8Q+wzEG2LKuPIgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-5px;" /> do? It takes some object <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAXCAQAAABZ9FzfAAAA50lEQVR4nI1UQRGEMAyMhVqoBSxgoRawUAu1UAtYwAIWsFALXJLO3Qzcps3mw4RuyJJNiRAKHSB2zmeKkPHASokq3Rw7P38jMb1xrlLwlBD68soGujh7zumFjzWQ37TsNqMf2vo/otLLjC6HMsgvHjpWLsj6Jo3plnLnr7OUyziv+eCQ8sAFpeiU/FYeOSOWERM5ULTF8oiTydnjt668gp4aF0XTeMHyVZ/HZGm6cnTI5biu3O7rGNOxckHw0O2N2sxN+MFWTmrYNh6erbx6lsVSXj3XxApGE5nU92xgmaREHCd/G7r9A+tji5e2CIjWAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> to <img width="82" alt="C + D \times B" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKUAAAAbCAQAAAC34odUAAAC/0lEQVR4nO1Z0ZWEIAykBVuwhW2BFmzBFmyBFmjBFmzBFmzBFjwCeOtpEkh21499N/yh6DAmQ0BjyngYG9rj1PcPETozmtUsZoptMS7398Z//N0uv/VvG0N/b9qPv72Gx1DLwwbptiDZM/6aMNzHK1uYzqdhw4f04U1bIG5/2xD61tDnApt78OQxHnh0gcEa9SnwANFgClfVXZ7KPXFh4xTshR1Mbb5NzJ3H2dSaGGwzN7AJlzcyhWH48h6GRbg4BQxjjJK7ADxWpL+P/MgM5YVMj5U45frCEjXF3MDQoPH6KUzEh2sjC4dciZhJ+gmd0ClfmTBHdBJ+0lcAPAak/8ExTKHMOaEVOqVeStwpd1BJ9wSXDY1gDrhTAoZ4paMHkQGb75E5pV5K2inLV9ObqagFE+My7/om7KOxy84UB/EroxWmlV5K2ikBSUoutnpCTBBS4uCUU/q4AKNqpZh8t//opeQzxBejEhdTKiTulE2uIYiw83TmvwCtlLxTplgpSXkVUy7k2Snb0APl+cjNa60iJ4VWypIXbqXyOOMoplzIxAO2zMc2ByEH2gjbvEl7N7RS8k5Zs0Du2MXUCEkVXTaeTRDPkpCTQCslz8aRBQqGJKZGSEPuZ5iysU5Kjkoby/uathQdueSUizCDBpH0Zx6YYMxOp05Knr5FGqx+197SUQTvlL1w2wipvaiqk+SUOEhDZDdBGZ3CAHQJzm9fF6LSwwFCwjkSVWdyoLenDbe2rEUpyTqKgUbKhv2srmIjcXzW/HsgJxeTPvnp0XozwxfKi4EaWCAjl7JjEvgRhax1vaOQAJmYtFOmzCA/aMs6kHTDuEMjJe2UUITohQRIxKSdsridcYY6ne5VyQ3QSEk5ZeJXe6aDCQmoF5NySs8k/p+bzmTb+FNIC7mUWC0Bm7UlxKPEYnAhAX1VBY3xaMPYdB5UkRldXh+H/FtqjL+p9JBI2TOVqBf/mvNM/PK1SMfUxHN4rkAPiAGQ0Nf/oCRx32+Dr8e/lG8Dc4LyXfgBK27fpsnizDMAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-2px;" />. If we unpack the definition of optics for this actegory, we recover the affine traversal defined <a href="https://arxiv.org/abs/2001.07488">Profunctor Optics: A Categorical Update</a>(Sec. 3.2.1).</p>
<p>This seems pretty neat, but what does an affine traversal <em>actually do</em>? Lenses compute an internal state <em>and</em> interact with the environment. Prisms compute an internal state <em>or</em> interact with the environment. Can we interpret an affine traversal in a similar way? The answer is yes. The first thing we have to note is that unlike lenses and prisms, the affine traversal is parameterised by a <em>pair</em> of private objects <img width="101" alt="(C, D) : \mathcal{C} \times \mathcal{C}" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMsAAAAiCAQAAABbueXyAAAED0lEQVR4nN1ai7WkIAylBVqwBVugBVuwBVugBVqYFmzBFmzBFmb5OO84moQQYd7buZ6z56063MANSUCUwtAriz77PLS3Rv+2Eb+PXs3ZYeiV8Vd/utcKo1qaC6Njj4zqGvMIeXu1kq8M6qE2/84cr/VnXo3KFRhj99+/Xw9/fwTZJ/+sFbRvfVHPn2toxiTm1f7FCX1qvAxPP/z94X0b5TD+/lhgkvFGuGjMvHtLuCZ/b/P3oKA1Nwqs1jMu/l8b/woWtXMAMW/wYhhBgDCIV1+2+2CWTn8TjTEXniDXNWh1/m7tMNl5nuXQ6hAtap9XC3k7YJgSdJxuWJgKc2gtNs5GYyA8QN9xqMvI0Htncqc7nwhixbzODz4EWpQ0wCWZJWGOsw/mg+aRQZ1GgjA4Z/ZJ5F6NecNgwHllQQcwYSjMLAnUxJ1BoddqcV/7trZLoFxF/WjMOyH5IcyFjcwcplpmeeeE7tYplC3gEoY1V6j8prOjIOBdwIeGkQZN1cyCP5XNyitMFP3qs1BBcwYerkOop7OfgFcjhDPY1JmuZmYJSLKcjcVsPL9lMvbON+qtEbEhiLJlakUBrwF/kuZK+aDnQc9Bh8ylFSlKjlhigY0j1T3yYhsShiOKiNeCkd41KhnpzJL8CpJlJgLfC08yPKae3qu3zsJwRBHywrJsmS5KQWeWNLSQxzuGv0Fp9Yi1wvw/CsMTRcg7A1VOt2+P1AedWfAyA3aeEnSVVvIvYbiiCHmh8MCpwmSg27VoFL4vy5AJn3wkYXiiiHnlspQnz1xmWdG5dF8WW02WtNLjJnEhr1yW8iBHZ5aR6MBfkkXHlR43X1SUpWfIMgiCHL2ZE7qKbbLUkuV+banjLrBG1zGVeOEaZ8vK8ijeDtGk2JZcvtaSBWMfmCHpJUoATxghL75uoZZmE/HRDAOV/PooCj40UL1YhpQPoPVDqqk4e3tHUQI4wgh54f2mjoyI8KZLzpvxzGK8eXRdMwMbmGUWdPty89pXxwwyZ1EC8sIIeTtipQAfcBjBAJbb+sAzS2KivZWzispZkHYQzvKHT7ecbVBIlIC8MELeFemyA4ari8chIDwzFQdU3Rn///AdIhcQMdeBLMDRq9ehBhuHSHtfnd8+4lKARQkYM9YJeR3amWGvjqb9IMQjHozAW1lA88Yfs87X6n/F8dSJtUpwjOpxe+PfCqpJR8znXFUq4h3I2Bo8Osjh/ODk0qJpdEzhUe2TbjgMlA5B2Y8dQBLzrpW28IcmXcU/an85xtvlZ4JtcjZxyn6O+1rAWaEMuskBOM0oCb4WhrmgomArHhs6tpr/LvnFwM9V8iDZI8ujZ26ffzHcrWDRYqaEJVyLdv8z8FYRn8P8x+z5NfylgJE/FPdV+AcwLXB5ZlSoywAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-5px;" />. This means that we’ll have a prism-like internal state <img width="15" alt="C" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAZCAQAAABj/j2vAAAA7ElEQVR4nKWUYRXDIAyEY6EWagELWMBCLdRCLWABC7VQC7WABXYJ27qtTeB1x58+ko/kgELUliOP4X7mOhQoUaadVhk7Lc/5iWIL9UgvSDvqDMCjRAoWMMSJBfXGU4QXyIidIx/wJnWvxT3td2GSvgznm7StK1jOee1sOZONU+IcKu/j0XJU56vUHhq44rzWbl4ITVHwcBfPgt/UKLB1ZKZ6dv1vXP1R+3DVnOvAgxXPTTxZV4rPfTPgGcNQPTqvRNXLemiR+lcNTnbjL1UD3z/kCLT7PgR5jhJ88vM842tVDSnyqMZYBG49HfQAVUtgXFXzAHIAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /> and a lens-like internal state <img width="16" alt="D" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAXCAQAAAAvzu5UAAAA3UlEQVR4nI1UXRmDMAyMhVqYBSzUAhZqAQu1gIVaqAUs1AIWSkjptm/L3+UFArkkxxUADhkqEwXzCV5sxR8irLBDx6h4PWPD3Im5DMFLc1PEn2wg6sNHkomCQ8F88VBUWoNDYOdj0GlrmX63CHglJu4lT4tCVsJ++kBW4kNhOERTAh7PqNCVGDMaFNauneylQlciGmu+u8ivjBkXjcBSoqkzfnWRkDz2PtQuzT5kQVViWNs46qsy6EIEqpCzD69ExHIHgaxEJjs5/pycbSLeN+y/WcXjY3HR8FglufACyrmGel2GRNsAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />. Looking at the coend below</p>
<center>
<img width="318" alt="\int^{C, D} \mathcal{C}(A, C + D \times B) \times \mathcal{C}(C + D \times B&39;, A&39;)" height="40" src="data:image/png;base64,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" class="display-math" style="margin:0; vertical-align:-15px;" />
</center>
<p>we can see that an affine traversal can do either one, but not both of these things:</p>
<ol style="list-style-type: decimal">
<li>Compute an internal state <img width="15" alt="C" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAZCAQAAABj/j2vAAAA7ElEQVR4nKWUYRXDIAyEY6EWagELWMBCLdRCLWABC7VQC7WABXYJ27qtTeB1x58+ko/kgELUliOP4X7mOhQoUaadVhk7Lc/5iWIL9UgvSDvqDMCjRAoWMMSJBfXGU4QXyIidIx/wJnWvxT3td2GSvgznm7StK1jOee1sOZONU+IcKu/j0XJU56vUHhq44rzWbl4ITVHwcBfPgt/UKLB1ZKZ6dv1vXP1R+3DVnOvAgxXPTTxZV4rPfTPgGcNQPTqvRNXLemiR+lcNTnbjL1UD3z/kCLT7PgR5jhJ88vM842tVDSnyqMZYBG49HfQAVUtgXFXzAHIAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /></li>
<li>Compute an internal state <img width="16" alt="D" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAXCAQAAAAvzu5UAAAA3UlEQVR4nI1UXRmDMAyMhVqYBSzUAhZqAQu1gIVaqAUs1AIWSkjptm/L3+UFArkkxxUADhkqEwXzCV5sxR8irLBDx6h4PWPD3Im5DMFLc1PEn2wg6sNHkomCQ8F88VBUWoNDYOdj0GlrmX63CHglJu4lT4tCVsJ++kBW4kNhOERTAh7PqNCVGDMaFNauneylQlciGmu+u8ivjBkXjcBSoqkzfnWRkDz2PtQuzT5kQVViWNs46qsy6EIEqpCzD69ExHIHgaxEJjs5/pycbSLeN+y/WcXjY3HR8FglufACyrmGel2GRNsAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" /> <em>and</em> interact with the environment</li>
</ol>
<p>While technical derivations are available in the aforementioned paper, the high-level intuitions I presented here don’t seem to be. I find them useful, since they give an operational view of the affine traversal. We can also easily see how to recover prisms (by setting <img width="46" alt="D = I" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF0AAAAXCAQAAADDu4tCAAABRUlEQVR4nL2XbRWFIAyGV4EKVrACFahgBStQwQpWsIIVqGAF75h6rkcnH8e5Z3+Ug/jKXhkAcHiYmBixvYOGfeI7GnzrNRJYcDDAijHh9RE9ti3Y5sFo6UbMSc2M745KMljqfO1maJBZVXzEkRpX1tlTZ44R20dBWe/UMExkFw7D5uNb5kc1DCu5mid+1iAkqgSTVHOBd/pBTN8iJiyPq8lz2ltVzhNAyOn/ofRWeDGnw77KaiHo9C0netIFnQ57ZXuipZpbFiVFRtDpNptAWxwlVVnQ6dsstKWDvUTU6aFmFl4j6PROeRtQ5fS0t4Ly5qvC6WlvbVuA9M/VsAcVPnIrTJXTU95qSXjuBzV4KLmfbPjIrTBCTrcoOy9cFhGneypD2ifTCqdz5cbifcD57j+QVq+GoXss1gG3W52G0hP+puL2AT8/RAMMJfXgfwAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" />) and lenses (by setting <img width="45" alt="C = I" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAAZCAQAAAD0r5p1AAABaElEQVR4nM1X0bGEIAxMC7RAC7ZAC7RwLVwLtmALtmALtmALtuBbwJubp/fI3hwv5+bHkWiWsIQgoqOTAOsO7y6MKKOsssiUbZF+f3+TwSS+R8SjKQiguYHeM68OHw15ZANxCzjEioi5wWZET6tede/hOGG2RyTiK8bOI/+HmGlHzc1hZtufMkhrsDQmVkefaSuoky4/sVH2A3Ne+Q+dopmyC1zOtbIVUy7XqnLDV5Rd3YqBmFm4nrKnnGtX9QlXU3bJtS0pDYSyB64+moJQ9srURwXd/hfGmASpyvbZQa2PKgJt9T1UQCpbbVVMQSibo23bsDaq2dJARO+AqNkdQTsai4jqRlaV9qhuI79fKRjTKgnVjZS6PVfG7zANDj7nG8lr01JAKDvBV92sD3Wyz344zi+zcCME0hqUsguKUH43ph6U7ev5m+dIzNeuERpNJ9kdT5Our6boT20AST7AMdEdQNvySkDjBxwB3N9brOqiAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />).</p>
<h2 id="conclusions">Conclusions</h2>
<p>It’s been known for a while that affine traversals arise as compositions of lenses and prisms. What I couldn’t find in the literature was the definition of this composition operator, as well as a more detailed operational view. Thinking about lenses and prisms as models of processes that either <em>make us</em> query the environment, or <em>allow us to query the environment</em> was enlightening to me, and my key to understanding affine traversals.</p>
<p>This unlocks more questions. All optics in <a href="https://arxiv.org/abs/2001.07488">Profunctor Optics: A Categorical Update</a> are defined using actegories, and actegories can be composed. Can we use this method to come up with new types of optics? In this blog post we talked about the affine traversal, but can we recover <em>the traversal</em> as a limit of some infinite sequence of composition? Are there some even more exotic types of optics, other than kaleidoscopes, glasses and grates?</p>
<p>And lastly, it’s well known that lenses can be used to help us model all sorts of interaction protocols (<a href="https://arxiv.org/abs/2103.01931">1</a>, <a href="https://arxiv.org/abs/1903.03671">2</a>, <a href="https://arxiv.org/abs/1910.03656">3</a>). But prisms, affine traversals, and the rest of the optical gadgets are not as well studied in categorical machine learning nor categorical game theory. There’s a large class of important systems that can’t be described with just lenses: systems with power to choose whether to execute some code or not.</p>
<p><br> <br></p>
<p>Thanks to <a href="https://ievacepaite.com/">Ieva Čepaitė</a> and <a href="https://twitter.com/dailectic">David Orion Girardo</a> for a read-through of this post.</p>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>While we can easily obtain the functor <img width="141" alt="AF : \mathcal{C} \times \mathcal{C} \to [\mathcal{C}, \mathcal{C}]" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARsAAAAiCAQAAADFJrV7AAAEhklEQVR4nO2ca7WrMBCFsYAFLNQCFrBQC1jAAhZqAQu1gIVa6E0I9EAeM3vI9MG6bNY6PyidPcBHMknoKYpTR9KlGObtcgzXa9G8I6MMlUU9bdV/4mtVF8+im7a0u0Z+2xjV7Pk0e0SqzFduyU87dhPaMSqLtribjJbtU0B/y/dPFpu0NPKjYoixGcxXhuSnrQHjNpncA2DGaf91xwmk1BWPl89jip4GWlPf8l2LwkYjPzqGEJtmRoI/Jha2l1OaVGWyuK96WOfaKUX/PV9fKWw08uNjiO5jOYV7ks1jMfV88SNKs1+ngLuYJ6D39nyis/iWb6g4Nhr5ITFE2HRTJ8Rhcye6sQduRsiemO/QGtdRJfrv+cYUw0YjPyyGAJtq6pwcNuk2oyQbRQ1sSnMKD/N3q1G5bvod37hCbDTyQ2MIsBmmQ9tk5eKUrmxcjHx1ESxr4JmiuscSGKTu9UX1EHXgITYa+aExYGyaub+rmb4y7MSazae5sv6x52Fgb/zT67H/ZGs2Duj9vqhG0dXxsdHID48BYmMvbPkKTVXmYWWDtzB2aslP2tewe9xyTYBjz41/0vf7oupE7YKPjUZ+eAwQG1sM/30lHTysbGrBnMGdHdxfmMqKVgwcDJo8X0yVaMSzxUYjP0kMCJtqczOfRHPvVzb2m23i2FgyyOA+p5bwwcGgyffF1BsPrrVdtMVGIz9JDAib2+agkRhgu8pmWe4ahc9ArCDbaiSQxbQGB4VGwxeRHcegbfMWG438JDEAbGovGLW84LqZet6a6bboqVKZkV3AwaHR8UVkZ01uUIuzxkYjP1kMAJu7dxoDOQu8v7LhRQ/ucTlwUGj0fBFdzFM/Al5rbDTyk8Vgj+ymWcP1NiaxCa0bQWXDq1O7fa2o+9zvW83LgPJtZAbOa2w0rossBnNktepylq2fDGInFc7ZdKqjDy1sbPck6clzfP2rx2+uCODcfhqbW+Tj9DwxtRqlIXdqucuGbkG2TM7jvMsXU2/aJ6SFDrHJy08Wg8QmXpnUCWzo1SgNdaRDA7VsCzRWKDgavph6uN4KscnLTxaDxMYvhp1S88TvLxzbudcP5UZF/DT6GhorDJx8X0yN4PqtsdHITxaDyLNLNpZxbPhXKnjRF62ay8VwRbeHGlgfGisEnFxfVJJVqXAAjuYXv8ayGElsLgQC8Xni/MqGX1xwg3+/IbejPf7lgBg0Vgg4Ob6obB7oHLE/3Yfnl77GknOMYmNfPrYDx3if6Dop/wa4vXmzNPziwuU1QHVjtNI8B8PmBca04tBYXdmaLMcX1U00zxtbk0LyeyZLCck5RiIMr6+HGKzfZF8q79bblxqe8+qBkrrxZkIecMPeE1k1b/RFJevu/BVwNL++cD8PiAk/x09NfirKtoVu4rH76Du87/blXxrZHh2+3YfmVxNvMGAxDojNKSv6d1K0mmzsT2wOqhxsqF9yYjqxOaj2Y1MqLC+f2BxU+7HR+EH1ic1BtRcbfsyI6MTmoNqLjc7tPrE5qOrX7Monb+B3XE+pafm/M7LZHnXXfypQYcmUa2WSAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-5px;" />, showing it is strong monoidal will require a distributive law between the two underlying actegories.<a href="#fnref1">↩</a></p></li>
</ol>
</div>


<form style="border:1px solid #ccc;padding:3px;text-align:center;" action="https://tinyletter.com/bgavran" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/bgavran', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
    <p><label for="tlemail">Want to subscribe to my newsletter? Sign up with your email below.</label> Or subscribe via <a href="../rss.xml">RSS</a>. </p>
    <p><input type="text" style="width:140px" name="email" id="tlemail" /> <input type="hidden" value="1" name="embed" /><input type="submit" value="Sign up" /></p>

    <small> <a href="https://tinyletter.com" target="_blank">powered by TinyLetter</a> </small>
</form>

<div class="commentbox"></div>


<script>
commentBox('5769281040023552-proj');
</script>

        <div id="footer">
          <div class="inside">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>.
            This theme was designed by <a href="http://twitter.com/katychuang">Dr. Kat</a> and showcased in the <a href="http://katychuang.com/hakyll-cssgarden/gallery/">Hakyll-CSSGarden</a>


          </div>
        </div>

          </div>
        </div>
    </body>
</html>
