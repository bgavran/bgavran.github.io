<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-PWZE1HYS87"></script>
        <script>
         window.dataLayer = window.dataLayer || [];
         function gtag(){dataLayer.push(arguments);}
         gtag('js', new Date());

         gtag('config', 'G-PWZE1HYS87');
        </script>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="author" content="Bruno Gavranovic" />
        <meta name="viewport" content="width=device-width" />
        <meta http-equiv="Cache-Control" content="max-age=86400, must-revalidate" />
        <title>Lenses to the left of me, Prisms to the right</title>
        <script src="../css/jquery.js"></script>
        <script src="../css/selectfile.js"></script>
        <link rel="stylesheet" type="text/css" title="hakyll_theme" href="../css/theprofessional.css" />
        <link href="https://fonts.googleapis.com/css?family=Titillium+Web" rel="stylesheet">
    </head>
    <body>
        <div class="highbar">&nbsp;</div>
        <div class="container-gallery">
        <div id="content" class="inside">

        <div id="header">
          <div class="box">
            <div id="logo" class="name">
                <h2><pageTitle><a href="../">Bruno Gavranović</a></pageTitle></h2>
            </div>
            <div id="navigation" class="pageslinks">
              <nav class="menuNav">
                <div class="menuItems">
                <a href="../" class="posts/2022-01-05-lenses-to-the-left-of-me.md">Home</a>
                <a href="../archive.html" class="posts/2022-01-05-lenses-to-the-left-of-me.md">Posts</a>
                <a href="../papers.html" class="posts/2022-01-05-lenses-to-the-left-of-me.md">Papers</a>
                <a href="../research_philosophy.html" class="posts/2022-01-05-lenses-to-the-left-of-me.md">Research Philosophy</a>
                <a href="../about.html" class="posts/2022-01-05-lenses-to-the-left-of-me.md">About</a>
		<!-- <a href="/contact.html" class="posts/2022-01-05-lenses-to-the-left-of-me.md">Contact</a> -->
                </div>
              </nav>
            </div>
        </div>
        </div>
            <script src="https://unpkg.com/commentbox.io/dist/commentBox.min.js"></script>

<div class="info">
    Posted on January  5, 2022
    
</div>

<h1 id="lenses-to-the-left-of-me-prisms-to-the-right">Lenses to the left of me, Prisms to the right</h1>
<p>There’s an interesting way to think about lenses and prisms. Lenses model processes that perform internal computation <em>and</em> interact with the environment. Prisms model processes that perform internal computation <em>or</em> interact with the environment. Let me explain what I mean.</p>
<p>A lens <img width="125" alt="(A, A&39;) \to (B, B&39;)" height="18" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPsAAAAkCAQAAADlE4TXAAAEmklEQVR4nN1ci5GjMAylBVqghbTgFtICLdCCW6AFWqCFtEALaSFnmeweIZL1sbiQe8zO7CbMs/wkZFnANs03oG+6T5vwVfgv9OqbR3P/tBFfhAq9QjP62lKBMU1jef7eNlP6OQ/OpNMPzHr1zU18ct9EvWUqtnuaxvD716WZT+N4jU7/Dka9LilWpJPp0hCzxTYxW8gpa2sPiH0G0DpNaRb4EdN8LJAzGvVq02SuYnPmNIifEzC2mD7bZ4DJNcPYUNLpksQfkt2PlHDD5gAHQGBf1KPJGY16RcXVe82GPMTnW9iW9Mm+LoWsYLtq/MDpFPJc3h0855XXsjTIGE16aQRtU6SNbm7H2cCeCTl7/HCi53UaiHr6kuc4IN9wkDAa9dLIGdNQkYhAPXC2gZAXpto7jGoFr9NEOKDJc7TUQxJGk16dIg67PPF1valPuBTb9LsV2ePmWEpqIdHpTpzT5jni7qtnNOk1IOsChSm7Z11v5CWgjq0txGhU2MpBmzl4nah1eG2mWDKVhNGo10zGyrsR08aY2rqaYrsUuk3BuEJimJVNF16nSHbKFuPeR8Jo0qvN2wMZbs/IaV3cbmOzpUoMw26nW4ZEp5ksrcB5llqonpHQK4glj5vzHopg8WW7iXMThzYJJw9diU5Ytd4+izJbX6+ekdCLqgL36F6S1L2yT2dnm906BhB6d3GlwOsUnk7621a5pmBecqvFBg9GQq8odPv0ctZc6XY7m9ReGW7i/jo/7roOx5djTPMazB18D0bC7km0Aw+7FWKuatjUsPm6vc2Ol1zxvE74OgwF193YbfBgJPSSJc29NLHK7TVsvm5fHX8X7A54nag+XG9ubnkwVrgd1sDXO0BLHti2g65ji8X9b5frBMvB1cWcTvQOe3Wffv/hw0joxbsdyq+wO9Y+uuWqq2WDaZQaRXtu/phyZcGNzulE77BXJ+n3Hz6MhF4wnXKBMCGSBLPba9m8k/xIJNI9OJ2oHTbA1o/3YST04mTcl18/n9oaNvVsvm6P4jYKNy59h+1q1MqH0eh2qs61TaWebTLXFO8IxTrhFWWdSuvwnJO11mYvRkKvazHJRdIZWGeNuwp1bDg82zWzotDidKLW4fX+4ntw8VppGXEQenWF6+xSkPi9swYP+pRuN+jY6DO9br0GVd4o6USvw5FwEaeVnpECqdeCftHmWxVUmgn5u9fHhNaNEF5l69lwlMXXYVQGEK4TAKtNuuSaJc8Ku65LWtkYcRT0GpEadd7saPcxN22+25YdY45gbBALG46eDB09JE2aLTCdrjvrtwf0zinH0lpZGXEU9LoW406HcPDTraPb/TewVdcr99RpHf/4J4GLei1ub3mEQ591a9lscCz8dAIcqxWA0atH0pcN8dDX73rVgxFHjO+lE+BYrQCsXvg6o4fXky84lo+/IOGlE+BYrQCsXsHQUHiH9aUfGYYTvA7loxPgWK0AIr0078XgOPY90C7FrlcNX4N6nQDHvzMr1musTGBHRi/cFfesomtQqxPg6Ctdpdf40XdOSjiXZeeyBoPSwjOk0Xe0p/v3HOfU6QeEXn8AfdQ2W9K2REsAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-5px;" /> is usually thought of as a pair of maps <img width="88" alt="get : A \to B" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALEAAAAfCAQAAAACNuTQAAADk0lEQVR4nO1ZW6HDIAzFAhZqAQtYqAUs1AIWsICFWqiFWqiF3hC6DShQ2ODuPnb42dYuhDQ5eZSQ3whB5LtV+NsYyE7mdytBNOgQX5Lwdyv3KmYw8fJuJQgDQ06gyU4UfHosAboZF2D9thYgfugnnox4rL3jDuXgqMnZmMYJVkJ7bbuC+H6BQsFH1I8xsfHiLfI7Qw2nPpsOnY8vQXGZ8J3vhwY9dPTK3i9fiK6paEAOtgz4E1LKlvBVihrGjf8yVL8AIcZrjGEtA44N5e7gGvVIMbF1tOdkFmDtGML88At7tJaV8QyuUQ+ZYGJrhYuaZ4S/68xTYHhdg7/arEmPgmU8QtisnKHN/fX5djkqFdrcxBOYql6fOUEGCk2fOT+Do2g8zAQ3j6fAZ1hej4dqC6o2wIHNssWK/ZwLkxXvq4N0jGqr0XagYJL6RxarGuiRAjMPTMBmD+UlGkN41/3DKe+qLvSu+sp28AJva55UJcisq+b5YeJH0zGCNVZsRDJgsNHifTdiHluf6wXpPcetMNNP6Os10J7cuUPdshwRWQrLxNJbCrSa8lKWIFNzL6AHNKH7rClcfXxn3WpiHnDe3GEnikYu9+Q4Exsn3dIkKU4MOXm0oALfGeCbCO7uUxOHR5ddHqYx8lZccqb6N5FrjNYTk2pHDD06FnlPbToghVImroXhSX+WtQYEFoONuWdWtho4kK6JSbrtGCIF/eaIuRX8ltpjxytl4jqYRMeDpYr6u/Bf10ujE5WcIV0TWxNH6yXr4C5VM09MTujt7h5MHMaKAe/SQtd0pqma2CA5n5BRJtbe9RzT9mHiMNHdfm3dfFg6Ku9L05O0Ma3b2YTaE3NlQp+JW41AUjm+tYk5qZkp5Jh4xmiPas1P9cLmiWFRE9P7b+6cmF32XmVBLpNmbN3fzVVOkSZNOwVMPqzVaTso1shbcD0UOzgvUFwmzjaQxNbf16+GWIbb2/Z3/LI+8ZFiYpk3sGUR610MZ0+hGB7wj/8Kab4bRF0OGvdTag1BcTSTCkaO19q9ulFVjyuWCQawhp28XMQnB98yIaOOcUZI6CM2vhwHROEkjmE7KeD360muvGDS2alSQ2/RQRXbYjpd2nCMwd7uWgtc67Rt3IdsBRnzHzvS/I14ZrT6Mvya+IMOmCIh+sFLUF7qop1f1f9DiGA+oaoK8Q8KwJ1C3tS6W9P3ux8gOI4nZ6yHxTvy69/FFyaNApIS2QdUAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-4px;" /> and <img width="130" alt="put : A \times B&39; \to A&39;" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAAAiCAQAAAATg28eAAAEsUlEQVR4nO1ajbWzIAx1BVZgBVdgBVdwBVdgBVdwBVfoCq7QFfwgoAIS+VFs+z2v57zz2qqEeAk3iVX1oATain7ahCj8ip0/iraaq/enjYjAr9j5s+iFg6dPGxGBX7EzgLbinzYBwVs4uPu0ERb8vvo+OzNAxSTGG8cbxGj+g1fMOpNBwCU32haC31ffZ2cWRjGN143j1cJxnRhzFgGVGUcrrJBurtczufj8XbHK76tb7GzF4CX1aAOPZC44gg8Mxqx334+w1y5raxKfvkmLY766xU45CAuflgki+N1/gAgdorJrsEXttjIMD/eadQjMV7fYSQs/JC6czpHVWRID6rx53YW7oksgHZivbrGzLSrkKOx3ar++1+WYyiZgi6LI8FUJGe6rW+zsi6YlA0xJ7ddN8OwjqpCkiIIpBEX8WfxVlGgT7hnC2bthvrraTgRTwaDN9MpTkwur3regpR9y90ypq3G0Djetqry+uFI3otbHAPfVoZ2dGLbT2peI/wYnQ6bi87Bbg/X6yIlOqBodiOSB00GenZPDvrTSJZFEqBEqKBqk0HVEFEIPBClD/O5Upp/qKwCHUPECZjdrSHmvAaQWE6agj00qUKNIKYkiD5VMqf/x8DNllTe5MR2V04fho0I6DSojMzDvowRkqbIMEVbm5vo5vhIDjvpiecF2Cde5pvydVIpbpgxsPatkiGJfTh2AWmWRd7QkdamQQwOmibCVkhpxzwnKSyXBhaU52X6mrzq9zgfnAqaZxPXvjfO7Txa+o9R8B1EjDYN13zEhNzGpkEODRSFw6+iNzbQcZJROHyPTV0twm5zQz/QNFna5D34vC+tiNQTmxJ4xaaSFCnk0wBSCvOu7sP4mQIW0qJDtK7U294WgVn/DtUmzVZakHh3dFashuM7giZRTVMijgV8hSLQ3FLYUeVMS8pO+2heCuNWucH/PVwjpkHul3fWbHFqGgVcCzlw5e2MFDgqbZ84RS+HTvup3D/FlTXJwyhD5CiEVUvow5+irtNqiWld4XeEIeA1BESEt/3FnEj6Udoub6wW+cltFxAqI6hNxzr9HIQyeSbCkyS3aAKsrHAOrIUhsfYZSSKvUnvYVphCWR99Udlf7PoXgSp/l2/gyiSkRc6iAKYSlyVuyr8+TVM15X3kUgr3fuy8ybAqhXr+3r7iqzYlp5tjJuZlCKhWOFMIIy6FcX59VaV2Bs76q9gpBrfhtK3CJsJ3frUHH3FzqgLNjgzpHJxBXL/MljGlUwBWC6uuVTB/HpOV01leAyTl1dNzXWUSghizc4oi5uRwXXl9V3Ktm9YHmiKmXYXWDFCpgCoEXpwFLyovO+gpAtehZhu137qOQlCgQaEnNuiOx0WNcTekDLeJ5Jz33INB0wYIyg9+mwD3wukEsFXz7KxWPX3VLyhaY+2jFdYWvAEohyAfcwhuHvYeJDbiOQReSwlob4dzt9jWUYVtPl9JF+NXJ0cigfdUK88A1dX8gtEKbV+OMYh5TkOpXILaMdI2vAFuKIvNOPBzZzWW2WxHE892DXOS16k+h5MskD34GvprAgz8IX9fgwR/Evsvw4M+B63z4dfhq2YP/HuY7N+UTogdfiX91+uFdlmg7HAAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-4px;" />. This is the classic presentation of a lens. Instead, here we’ll use the <em>coend</em> representation of which is more symmetric. It’s defined in terms of two maps of type <img width="109" alt="f : A \to A \times B" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANoAAAAfCAQAAAArMRtXAAADaklEQVR4nO1ai5GsIBAkBVMwBVMgBVPYFEyBFEzBFEhhUzAFU/ANsNYqx8gMH91XZVNXe3Wn0EsP81MhYuiFEl30qjy8YI1fxK/yOkUn3kBbws9YcZVWrEJXnD8VV/OaYLXwMBoQ0YjZkpZiAfr1TpuG2d/VZk/H1bw62OkB1lzhiMjdeAELYz4kBcwEA3wq+FxAwjroLc210uzpuIeXtGv+lccY0EzRwOhrjmVXMao1sMr4g6LdxWuwB+QvOstliN3eXEJZARGFWNeduIvXBCtOwf+slAgrL/DorV3B+XFyqL0A9/FakPPkjlBYzh2UDYh1MdktcX68LzjvCsE7B1xeZ8I2jLOKRTRTfKyUbzVRfGgW5MdyHNWSFZHOMjc+rwVdz8TGUIwKQyERTUASEvF7LtGcrWjmt7ilNHAVP7t8gxtyd5cWbcjKdvm8OkQ2Jxn9pGnEBY5WzNN5lB2OsBlxVzPbhJQHtduOtbArbuArphpBGq+QbFzJRDBDbD7JCcEIJUsGfkXTHg77Urz3oGDONuG+dF6+bHzJ5Ee0b1ndw4yzLbVJGCi5yu7qmWnZ04GIrtAwesPgu8gcXnvZ+JJtEU0dxgjrD9TvMRaOMkdIzyB0hZqwsbLxTlsur022FMmwiGbmXGjZ8NYNqQN/M1WVQt5tHScDzuflZEuRLBzRDF7UIt9clhITKDDx5tjFngnrtTbCpAzqBqbx8oHXWun3kQrrDq0X8mFCvfTGSOo9+HfFx2RjEs1jpPPaw51uvG7DgddoTrRoWviqkBhsmAKbIKs0jEZWe6AEry2WYXXbGbAazYDUd1TV0hA/1G9/LV1eO2fHaSDl89qnH3zZ8C5+T2OhC/cCv8DyudKiSWb/MZ+XnzHyZDuLaNo6zmhkTQm/FCh0A0r3RDSjyizBK5Tkc2TDI5p71hA1wJadhpgCIf4YpztJn8v2RCTL6PJ5YXUZXTYsoimaZM6H8jbQpdZndXtjm7iYA3BvoZAep5MwkvmX4YXXZTTZQrGzBalcT5fkxfhpSOwOvauafHuavKqqxOMgaklditd4kvJ0p6L13ir7YbqO5MxCV0i/r0XKg6L/HPUK6wfFsVUY9V8zeFAEjc0Ajd8ekjpnD27A9yWWvPcrHlwI00M3kr2SHh0+uAmdrW7UI9nv4x9cOi7/HzGYpAAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-4px;" /> and <img width="113" alt="b : A \times B&39; \to A&39;" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOMAAAAcCAQAAAA5Q8ALAAADq0lEQVR4nO1ai5GDIBC1BVqwBVughbRgC7ZAC7ZAC7aQFtJCWvAWCBNFFnYR8W7mHnM3mTuFx1tgP6Tr/hHD2PV3UyDgb7C8DWO3du+7SWTxN1jeiBkEet1NIotfwXLs1N0UULxBoOluEjvE1IqyFN0CbYW2NKDVNxrHQ9vZxZrqZPCstIeVaMguh5haKEvZPWCTrk12iVkwzwbjeAwwu8ku0hk+fdsILIxEw+ZZ1UgDOmJqJVkaM4arsz4eVtD18nH2kHbM4fD3xfqY77o2GvymCDCuVoJl30RcAStrvsGMExLZDZaL9zJGA92SVgZxtZIsxyYeS4FkCtkZV0KjU99GBFOT84iOuFpJlnMDr9DbU975qbZyYfGnsFy8gfX9QfwGmFpJli08o7YjOD/1IDyf4iMY+xnzjO4MWuG369F/qoOzvcXVSrJs4RnlZ9U7YpSd/4YzIg7jNehVDIXWPF6bOHCoXBdZUPYUYGolWXrPKOEFDRs5nTkJeI6fWz0/0ZUgm3FADOmMSN+NC+IZZ2veq7z0dCoD5avVec+o4UdAm6GTFIFXQSlIbai4HI6CmCG5Rux20ei3Fxf2XJfqC2BZGm2UqfUxjJdGZF7kZ379LoV9M6Li0JB8I8qPGb+J/wN6fNliwLVQwLQkCy1Uqz8EHUsyDZ5ABN460zvJFlZyszUk34jeM6pdm2H8nOuogWfmXIujUK1jzrhUjVtl4JkW5m72hiwxIuYZTZ/vqpFpDMIakrcji9U65ox166vhRBT7UHaGLDFi3DMajE3KEG7pce5MitUKc0ZBzuwoMB5if7Pwsv1z12iZ6Kn31ug+TaG3nqqkURdgsVrHnLFUsnjvz929gmkzu47j1jSeR+LAc0ZnRm7EHc4l37R1WbTZnlDr6BlTU+dCRwhIphm9T8TyyBSwnNGgxQ3rjBzpcZxQ63h7Vc8zhu56S4w6wjaw4RsS84z+EujaOrJiefNTaqlgooPdi3Vu3bAojS5gGJ3yDJlyD0vFeeKjc2LhU2qNQThDueugHYgK7YdamYilGBxD4u7B3Rxcm3AsrADqpFr9zmySEL2ZLz/kv4YxJMJkWmUCyxPphsQ8o2pgRMmKxs+rZTMy35kRKFd3cCF06ilhC8PYcSbt/17ZcfA8kWbImFfpwXiu9Hh1KW4mh0911LJlYg0HqwLhKFFV7otHyyZfCveCDvKp1HhzIjwYkmZ8BKNsm6mm1sqJU6Am/bXUsuhtjvKPeii5zCvADyBMXvF3vKttAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />, meaning <em>forward</em> and <em>backward</em>, respectively. For any lens defined in terms of <img width="24" alt="get" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAcCAQAAACNZfRBAAABo0lEQVR4nLVWbcGEIAymAhWsQAUqUIEKVqACFahgBStYgQq+2/S4DfS4e9WHP8K4fT3bOKXuhleTGm7XyrCoVdnn1A+gfn1OPSZohRQ9iAgGxicNIAOmf82poBKEewZD8gS+atproBWXIwa271MzRs3wUyy0EQJ2TcgGcjzBuaIbM5kYwCCuCW4v+/eJe15lUPtCoJC9kK9Mjjnn0gTScBo3eZfBJ77HkN9t09ZIEPHlXg/McMGxvaWQXxhIAe9SDdL33vR6wAt1iFEkJFb+D7Dz1e2PPbA0GUyMYk3+TTuFSGiq0tFhYGtyJ84yq2q7y7ciPBpnHQY8KdDsBHOayy6IXYsuA+GQgSTknzLcZaBVwBnoK5AMpPaCbWqEM7CloDWgyxl/B4xoxoKFNZmmnsiVvOYAC/XlAmcgCS4LXPEB500UDCBsNZfk4zgVA7GqRaFipvqO4EFS7WR3NMosjcF62uKYwRGXztVLSAa4E7iOUrAN7S9hOlV/GWPDwEVEQZi++8+Hr+ZQrJ6Zy7BsLGNt528r4RcTgd7aiR7Bwzb5H/4A9nTAL98csVEAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" /> and <img width="25" alt="put" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAcCAQAAABmUk9CAAABr0lEQVR4nLVWYdWFIAxdBSpYgQpWsIIVqGAFKlDBClawwqvAtw0QGPLe8Xxy+fGQzV3cZeMBjMEKO0yDYhc4wcM8mmRCEj+ahFLmMWnDYZHGjKchZXTPaPBDDSieK5w52CoZJ3x2sIi39BVQoTeNhZUJ84Zsw4wCHDgAHR0TzPDh1RDOIpHGACURiX0W26Cx81qYr1BBRck2dLE4Mrnn8092xb+1uCS2Ext2uLa1ySKYuEcnwsxMS3TBvgj7ndiffs24qMkpkjLHsEcnbCu2/lYz4SPbslrjSrArfspNhPw/IpL5XTNtWZE2R9f+UJkE27gcVSAKsQr/B8okyIYXkmSqJyX8HygT0FMmBV6qBL6oTJ3nTaQ0K6Ov9foNqRtDKhN2m5MkabK/uVJdpl0XZV7gjKWYsCNJmXlT0UyF2DkHZdpdpWOxd19crVaQhMApoOLG6mPny+T7RWObJssIytDrK9/k9uYuX5DIcliHVoUHYmffvGuNHtQw205+saejSw28/3ehbu9zUyPqZq3A16voLdzVwADcdacBaLvZ69j4aFIjaS7Vt2nS6BzD/+IPvfLWKl51JxwAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" /> maps, we can recast it to the coend form: define <img width="12" alt="f" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAfCAQAAABXe8XLAAAAzElEQVR4nL1UURXEIAyrBSzMAhawgAUsYAELszALWMDCLMwCl/bYu0/SnwtvKx8JbSggskOWJnHLWogyQE/4ToYe5JaOmOSRyWSpoFXEhvhAvsUAMVlhlIsA+tzTfkigD49AK6f25sW1LFPF6LhNoLOt4WZDLX9nhcsykcMBbdrlEZxWkANvl2mo5YOnRztuDhQIukfQvJY7BNkjcFo+vJbzXyw7u0w6iOtPXc1gx02vZOUerWR7r83q3NU/ULfSCzIRb5wiYuWO7dzQP6SLTxiyqaz2AAAAAElFTkSuQmCC" class="inline-math" style="margin:0; vertical-align:-4px;" /> as the composite <img width="193" alt="A \xrightarrow{\Delta_A} A \times A \xrightarrow{A \times get} A \times B" height="18" src="data:image/png;base64,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" class="display-math" style="margin:0; vertical-align:-1px;" /> , while <img width="54" alt="b = put" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAAAeCAQAAACMR1iyAAACWklEQVR4nN1YjdGDIAxlBVZgBVZgBVdwBVdgBVZwBVdwBVfoCv2SgPJvtV+xZx93PSWRJJAHoYyt4GyC9oQ2sZ+DYh1bIDT9bUfaAENT33biTfSQb6ImFJSQd8XusvQ3ZtqLZTE3ZtqLZbkz03BZhprw/kyTNeG6pAqScoQZ4Bc4NIDF1RKHpxFsh3kjyJcu+UpuQXDQVnRsPSnjsBUCtEzDwTk0w+bmwWmYTgZ2ZvjtwDIGpdiDem0IBoKT4FcYHGbXsj1rahP12eeeZVhI7OfjCQO3BHe012TJ28J34eTceRJuEJhdYzLWuLcBWqaFszM5Ezkk6R5rVWqDpNvcCl1XblK1k3eJvLRhPM6dadOOujrc6kk9OtmSTKlynsyVUPINQ54901rXk3bsfF/uXY+Vc3rz2YP6j2Sk4dyZxrMEbYM8W5Brc1X+JtNCKOqpnhQfQ54tc+Q8ut0n+v9kmi4sfAuUs2WI3niif4pp+hTTBF1bj7X9lK4xbQ2mi5LzLabpZJklDVG9/YCuPtjqY6yBxG7FvEmn3DNNbv3xFykP6ZNwfq+6A6R27Kr4BExD8/rDlsZhSsu8zBDREKqwC7XBktQ8EwQWMmmI/BLBhuHXOkzpsXSOmi2nJQxgLimOLdP8td8kgdlg1iA41bdPV2n6gKctNFNmNn6INbaGEOvF0WdhmYaWe/pnwxSY2dFE29uIAN0Z9HpXXVrgUmBRnN8QAggqja6DP6PQbn3Dia8quY/8Yr8PYPf6eGeUzqgfQaka/BHc+f+zHWjaxrGIKl7474ywFGt0cfoDvXdgN2BSmM0AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" />. This is the representation of lens as an optic, and it makes explicit the fact that the forward part of the lens saves an <em>internal state of type <img width="14" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAYCAQAAACsVz43AAAAyklEQVR4nJ2UYRHDIAyFYwELWKgFLNTCLGAhFrCABSzUQi3UwpZkYwdsLUlfrn+afEd5PAqg0wNQOTnIwxPKPbQQut0BVwK5zHK0XrqHIkR6GF1soJc9RkGDDc0CBEFXCxgIhS9qOtmNPpjlrCg2w4wmLei7EByWPOXO0aJHq0EtqgxFNagKtSjS3kpXu6B+BrJBYaiky1P+MxI06GhQi05CMRpUNUXxtD3J03JxABd5cnQrj9MLHaS309SPyuf/wzXalJseV3y/fgExVmXOX3Xf9wAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" /></em>. In the image below, the forward map <img width="12" alt="f" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAfCAQAAABXe8XLAAAAzElEQVR4nL1UURXEIAyrBSzMAhawgAUsYAELszALWMDCLMwCl/bYu0/SnwtvKx8JbSggskOWJnHLWogyQE/4ToYe5JaOmOSRyWSpoFXEhvhAvsUAMVlhlIsA+tzTfkigD49AK6f25sW1LFPF6LhNoLOt4WZDLX9nhcsykcMBbdrlEZxWkANvl2mo5YOnRztuDhQIukfQvJY7BNkjcFo+vJbzXyw7u0w6iOtPXc1gx02vZOUerWR7r83q3NU/ULfSCzIRb5wiYuWO7dzQP6SLTxiyqaz2AAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-4px;" /> is the gray box and the internal state is drawn as the vertical wire (this is also called the “residual”). The dot is the copy map <img width="24" alt="\Delta_A" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAdCAQAAACp+0zaAAABI0lEQVR4nLWVURWDMAxFY6EWsIAFLGBhFrAQC1jAQi1gAQtYYEnLgZXStLDm5eyHZXm5TcoAJBmw0IgZfwthg1HTwMBKFpsmB8LsLNQ4DCzuo8iBFAAfPQ7PwFLj8AwsJY6TgaXCcTKwFDhCBlZ1jpCBVZkjZmBV5YgZWE84Jmilr+8ZWKUcA2V1UsI9A6uMo3GvzlQNkBhK37sjhWiBYpeY5ejpmDrKsakE7lPqMcdhXGm2mNNd5k7ac6SOAfdN4pxkj7l98Rzr7by6w5pzbieKhNllY0pyTEdZm1pbv/dlEXPgT1Fuo48NPg8MOIbg1w0NGI+w8tq+0xRMcaj/F9ZfmMSb8UYmKteSxVLTYKY5Xp8lb8Zz2f2eDMEzv5szTcjpC2xduhMZnhMOAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-3px;" />.</p>
<center>
<img src="../images/lens.png" alt="Lens as an optic" width="600" />
</center>
<p>We can imagine a particle flowing in this lens, as an input of type <img width="14" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAYCAQAAACsVz43AAAAyklEQVR4nJ2UYRHDIAyFYwELWKgFLNTCLGAhFrCABSzUQi3UwpZkYwdsLUlfrn+afEd5PAqg0wNQOTnIwxPKPbQQut0BVwK5zHK0XrqHIkR6GF1soJc9RkGDDc0CBEFXCxgIhS9qOtmNPpjlrCg2w4wmLei7EByWPOXO0aJHq0EtqgxFNagKtSjS3kpXu6B+BrJBYaiky1P+MxI06GhQi05CMRpUNUXxtD3J03JxABd5cnQrj9MLHaS309SPyuf/wzXalJseV3y/fgExVmXOX3Xf9wAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" />. A lens takes in this input and does two things in parallel in the forward pass: it copies it down on the vertical wire (residual/internal state) <em>and</em> it also uses the map <img width="24" alt="get" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAcCAQAAACNZfRBAAABo0lEQVR4nLVWbcGEIAymAhWsQAUqUIEKVqACFahgBStYgQq+2/S4DfS4e9WHP8K4fT3bOKXuhleTGm7XyrCoVdnn1A+gfn1OPSZohRQ9iAgGxicNIAOmf82poBKEewZD8gS+atproBWXIwa271MzRs3wUyy0EQJ2TcgGcjzBuaIbM5kYwCCuCW4v+/eJe15lUPtCoJC9kK9Mjjnn0gTScBo3eZfBJ77HkN9t09ZIEPHlXg/McMGxvaWQXxhIAe9SDdL33vR6wAt1iFEkJFb+D7Dz1e2PPbA0GUyMYk3+TTuFSGiq0tFhYGtyJ84yq2q7y7ciPBpnHQY8KdDsBHOayy6IXYsuA+GQgSTknzLcZaBVwBnoK5AMpPaCbWqEM7CloDWgyxl/B4xoxoKFNZmmnsiVvOYAC/XlAmcgCS4LXPEB500UDCBsNZfk4zgVA7GqRaFipvqO4EFS7WR3NMosjcF62uKYwRGXztVLSAa4E7iOUrAN7S9hOlV/GWPDwEVEQZi++8+Hr+ZQrJ6Zy7BsLGNt528r4RcTgd7aiR7Bwzb5H/4A9nTAL98csVEAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" /> to turn it into an output <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAA5ElEQVR4nIVTURWEMAyrBSxgAQuzgAUszMIsYAELs3AWZgELXFa44/Fo2vSHtzbdkhaRNzapJIoko/6BCSVZDsSKrzsW+eCsIh8gKfldVnHaZPDJ/ebdfFVvmn3yhpLNzBz6dBc76T8o2W57gSkWmNYzi0cuRLHArAOeu6jkaas2DUZlOTpcJgZjShf5Xo8ZdzZdmRCn4vKIFVJydGuHrXhCw933uYPt0EIH+AefscQLwmd8kptHZjP+kd295n/NrLnCqZ7iqoJGTuaKc/xLMMUlpiZD1QhKU5fpcp5m2NG3erZIX9lZjeq4V/EkAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" />. Then, this output <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAA5ElEQVR4nIVTURWEMAyrBSxgAQuzgAUszMIsYAELs3AWZgELXFa44/Fo2vSHtzbdkhaRNzapJIoko/6BCSVZDsSKrzsW+eCsIh8gKfldVnHaZPDJ/ebdfFVvmn3yhpLNzBz6dBc76T8o2W57gSkWmNYzi0cuRLHArAOeu6jkaas2DUZlOTpcJgZjShf5Xo8ZdzZdmRCn4vKIFVJydGuHrXhCw933uYPt0EIH+AefscQLwmd8kptHZjP+kd295n/NrLnCqZ7iqoJGTuaKc/xLMMUlpiZD1QhKU5fpcp5m2NG3erZIX9lZjeq4V/EkAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> is turned into a “response” <img width="18" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAbCAQAAABR545VAAABJElEQVR4nK2VDRGEIBCFt4IVrEAFKljBClSgghWsQAUrWMEK3LLInY68Yx19zNz4w3wsbx8e0VON1D9m7KBI2zuoiVHrO6iNUQ6/nimA4cmeZlrZXodRhqc4nhS5fHsYIy38LPD7Is/3vlW4FZS5PA/iTalj5btm/xzojJElsjs9X80tUPILTYuyybKcrc45CXWmE9S8L6eIAXIqRzLyb4aObZSHGU5GL3JldCkPwKlJlqhVCxUrTnV7K/4E8iq7o37hHLieVQJ7U9kpfxoTb9rdqyip7lSyedP07KiaU0kjjAgQzhQd4qkSzlRG3fjQoUwVVNCjkFPEkYia71PRP6eCbF39/4Kdct+DrBRyyt8F2YobPQNW6Zzy2GRL6yOdvqGN+ACxYKOQNBTaGgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" /> by the environment (not drawn), and on the backward pass via the <img width="25" alt="put" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAcCAQAAABmUk9CAAABr0lEQVR4nLVWYdWFIAxdBSpYgQpWsIIVqGAFKlDBClawwqvAtw0QGPLe8Xxy+fGQzV3cZeMBjMEKO0yDYhc4wcM8mmRCEj+ahFLmMWnDYZHGjKchZXTPaPBDDSieK5w52CoZJ3x2sIi39BVQoTeNhZUJ84Zsw4wCHDgAHR0TzPDh1RDOIpHGACURiX0W26Cx81qYr1BBRck2dLE4Mrnn8092xb+1uCS2Ext2uLa1ySKYuEcnwsxMS3TBvgj7ndiffs24qMkpkjLHsEcnbCu2/lYz4SPbslrjSrArfspNhPw/IpL5XTNtWZE2R9f+UJkE27gcVSAKsQr/B8okyIYXkmSqJyX8HygT0FMmBV6qBL6oTJ3nTaQ0K6Ov9foNqRtDKhN2m5MkabK/uVJdpl0XZV7gjKWYsCNJmXlT0UyF2DkHZdpdpWOxd19crVaQhMApoOLG6mPny+T7RWObJssIytDrK9/k9uYuX5DIcliHVoUHYmffvGuNHtQw205+saejSw28/3ehbu9zUyPqZq3A16voLdzVwADcdacBaLvZ69j4aFIjaS7Vt2nS6BzD/+IPvfLWKl51JxwAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" /> map it’s turned back into <img width="17" alt="A&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAbCAQAAABc+f4SAAABBElEQVR4nKWVYRmEIAyGqUAFK1iBCla4ClZYBSpQgQpWoAIVvLHjThicMv345XCvsH3PVOqJXmp6lJ8hu4rPMRYxQfplaGIRMasEMmGCZzFDV9ISjMeUjcUAY+0JT7RgQlq1AkYEfdJ4Dttg0jWd5CyAZQTCzEV0xWczDpmoJithyjQna7WjZEOY5RfV+PQah5h8/w/m6Mssc++We6EZRiQoEhPG3oFMleFix8dDclVn/D2MYebyHR8PaGNGhzsYwFr4agXCiGZdKq5hyzY+vpTrvG6kGF7cEiMwIC/uVyIM/H1V4OP5pKmDPtY4VSIbTocM7YWrEe7zvN07w9EVe3v/p/IGTAR7dHkFbeoAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />. In other words, in this lens we can trace out “two paths” the data flows through starting from <img width="14" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAYCAQAAACsVz43AAAAyklEQVR4nJ2UYRHDIAyFYwELWKgFLNTCLGAhFrCABSzUQi3UwpZkYwdsLUlfrn+afEd5PAqg0wNQOTnIwxPKPbQQut0BVwK5zHK0XrqHIkR6GF1soJc9RkGDDc0CBEFXCxgIhS9qOtmNPpjlrCg2w4wmLei7EByWPOXO0aJHq0EtqgxFNagKtSjS3kpXu6B+BrJBYaiky1P+MxI06GhQi05CMRpUNUXxtD3J03JxABd5cnQrj9MLHaS309SPyuf/wzXalJseV3y/fgExVmXOX3Xf9wAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" /> and ending at <img width="17" alt="A&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAbCAQAAABc+f4SAAABBElEQVR4nKWVYRmEIAyGqUAFK1iBCla4ClZYBSpQgQpWoAIVvLHjThicMv345XCvsH3PVOqJXmp6lJ8hu4rPMRYxQfplaGIRMasEMmGCZzFDV9ISjMeUjcUAY+0JT7RgQlq1AkYEfdJ4Dttg0jWd5CyAZQTCzEV0xWczDpmoJithyjQna7WjZEOY5RfV+PQah5h8/w/m6Mssc++We6EZRiQoEhPG3oFMleFix8dDclVn/D2MYebyHR8PaGNGhzsYwFr4agXCiGZdKq5hyzY+vpTrvG6kGF7cEiMwIC/uVyIM/H1V4OP5pKmDPtY4VSIbTocM7YWrEe7zvN07w9EVe3v/p/IGTAR7dHkFbeoAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />: it goes through the residual (which is in this case also of type <img width="14" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAYCAQAAACsVz43AAAAyklEQVR4nJ2UYRHDIAyFYwELWKgFLNTCLGAhFrCABSzUQi3UwpZkYwdsLUlfrn+afEd5PAqg0wNQOTnIwxPKPbQQut0BVwK5zHK0XrqHIkR6GF1soJc9RkGDDc0CBEFXCxgIhS9qOtmNPpjlrCg2w4wmLei7EByWPOXO0aJHq0EtqgxFNagKtSjS3kpXu6B+BrJBYaiky1P+MxI06GhQi05CMRpUNUXxtD3J03JxABd5cnQrj9MLHaS309SPyuf/wzXalJseV3y/fgExVmXOX3Xf9wAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" />) <em>and</em> it goes through both <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAA5ElEQVR4nIVTURWEMAyrBSxgAQuzgAUszMIsYAELs3AWZgELXFa44/Fo2vSHtzbdkhaRNzapJIoko/6BCSVZDsSKrzsW+eCsIh8gKfldVnHaZPDJ/ebdfFVvmn3yhpLNzBz6dBc76T8o2W57gSkWmNYzi0cuRLHArAOeu6jkaas2DUZlOTpcJgZjShf5Xo8ZdzZdmRCn4vKIFVJydGuHrXhCw933uYPt0EIH+AefscQLwmd8kptHZjP+kd295n/NrLnCqZ7iqoJGTuaKc/xLMMUlpiZD1QhKU5fpcp5m2NG3erZIX9lZjeq4V/EkAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> and <img width="18" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAbCAQAAABR545VAAABJElEQVR4nK2VDRGEIBCFt4IVrEAFKljBClSgghWsQAUrWMEK3LLInY68Yx19zNz4w3wsbx8e0VON1D9m7KBI2zuoiVHrO6iNUQ6/nimA4cmeZlrZXodRhqc4nhS5fHsYIy38LPD7Is/3vlW4FZS5PA/iTalj5btm/xzojJElsjs9X80tUPILTYuyybKcrc45CXWmE9S8L6eIAXIqRzLyb4aObZSHGU5GL3JldCkPwKlJlqhVCxUrTnV7K/4E8iq7o37hHLieVQJ7U9kpfxoTb9rdqyip7lSyedP07KiaU0kjjAgQzhQd4qkSzlRG3fjQoUwVVNCjkFPEkYia71PRP6eCbF39/4Kdct+DrBRyyt8F2YobPQNW6Zzy2GRL6yOdvqGN+ACxYKOQNBTaGgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" />.</p>
<center>
<img src="../images/lens_traces.gif" alt="Lens two traces" width="600" />
</center>
<p>We can think of this as a “conjunctive” data flow: both paths are traversed. The lens computes some internal state <em>and</em> interacts with the environment. This is useful for <a href="https://arxiv.org/abs/2103.01931">machine learning</a> (where we want to remember which point we’re differentiating <em>with respect to</em> on the backward pass) and in <a href="https://arxiv.org/abs/1603.04641">game theory</a> (where we want to remember the state for which we’re going to receive a payoff for).</p>
<p>A prism, on the other hand, is characterized by a <em>disjunctive</em> data flow. Starting from <img width="14" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAYCAQAAACsVz43AAAAyklEQVR4nJ2UYRHDIAyFYwELWKgFLNTCLGAhFrCABSzUQi3UwpZkYwdsLUlfrn+afEd5PAqg0wNQOTnIwxPKPbQQut0BVwK5zHK0XrqHIkR6GF1soJc9RkGDDc0CBEFXCxgIhS9qOtmNPpjlrCg2w4wmLei7EByWPOXO0aJHq0EtqgxFNagKtSjS3kpXu6B+BrJBYaiky1P+MxI06GhQi05CMRpUNUXxtD3J03JxABd5cnQrj9MLHaS309SPyuf/wzXalJseV3y/fgExVmXOX3Xf9wAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" />, a prism <em>routes</em> the data to go one of two ways: either inside through the residual <em>or</em> outside into the environment through <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAA5ElEQVR4nIVTURWEMAyrBSxgAQuzgAUszMIsYAELs3AWZgELXFa44/Fo2vSHtzbdkhaRNzapJIoko/6BCSVZDsSKrzsW+eCsIh8gKfldVnHaZPDJ/ebdfFVvmn3yhpLNzBz6dBc76T8o2W57gSkWmNYzi0cuRLHArAOeu6jkaas2DUZlOTpcJgZjShf5Xo8ZdzZdmRCn4vKIFVJydGuHrXhCw933uYPt0EIH+AefscQLwmd8kptHZjP+kd295n/NrLnCqZ7iqoJGTuaKc/xLMMUlpiZD1QhKU5fpcp5m2NG3erZIX9lZjeq4V/EkAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> and <img width="18" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAbCAQAAABR545VAAABJElEQVR4nK2VDRGEIBCFt4IVrEAFKljBClSgghWsQAUrWMEK3LLInY68Yx19zNz4w3wsbx8e0VON1D9m7KBI2zuoiVHrO6iNUQ6/nimA4cmeZlrZXodRhqc4nhS5fHsYIy38LPD7Is/3vlW4FZS5PA/iTalj5btm/xzojJElsjs9X80tUPILTYuyybKcrc45CXWmE9S8L6eIAXIqRzLyb4aObZSHGU5GL3JldCkPwKlJlqhVCxUrTnV7K/4E8iq7o37hHLieVQJ7U9kpfxoTb9rdqyip7lSyedP07KiaU0kjjAgQzhQd4qkSzlRG3fjQoUwVVNCjkFPEkYia71PRP6eCbF39/4Kdct+DrBRyyt8F2YobPQNW6Zzy2GRL6yOdvqGN+ACxYKOQNBTaGgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" />. We see this animated below.</p>
<center>
<p float="left">
<img src="../images/prism_default_resized.gif" alt="Prism trace" width="400" /> <img src="../images/prism_env_resized.gif" alt="Prism trace" width="400" />
</p>
</center>
<p>More precisely, a prism is <img width="125" alt="(A, A&39;) \to (B, B&39;)" height="18" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPsAAAAkCAQAAADlE4TXAAAEmklEQVR4nN1ci5GjMAylBVqghbTgFtICLdCCW6AFWqCFtEALaSFnmeweIZL1sbiQe8zO7CbMs/wkZFnANs03oG+6T5vwVfgv9OqbR3P/tBFfhAq9QjP62lKBMU1jef7eNlP6OQ/OpNMPzHr1zU18ct9EvWUqtnuaxvD716WZT+N4jU7/Dka9LilWpJPp0hCzxTYxW8gpa2sPiH0G0DpNaRb4EdN8LJAzGvVq02SuYnPmNIifEzC2mD7bZ4DJNcPYUNLpksQfkt2PlHDD5gAHQGBf1KPJGY16RcXVe82GPMTnW9iW9Mm+LoWsYLtq/MDpFPJc3h0855XXsjTIGE16aQRtU6SNbm7H2cCeCTl7/HCi53UaiHr6kuc4IN9wkDAa9dLIGdNQkYhAPXC2gZAXpto7jGoFr9NEOKDJc7TUQxJGk16dIg67PPF1valPuBTb9LsV2ePmWEpqIdHpTpzT5jni7qtnNOk1IOsChSm7Z11v5CWgjq0txGhU2MpBmzl4nah1eG2mWDKVhNGo10zGyrsR08aY2rqaYrsUuk3BuEJimJVNF16nSHbKFuPeR8Jo0qvN2wMZbs/IaV3cbmOzpUoMw26nW4ZEp5ksrcB5llqonpHQK4glj5vzHopg8WW7iXMThzYJJw9diU5Ytd4+izJbX6+ekdCLqgL36F6S1L2yT2dnm906BhB6d3GlwOsUnk7621a5pmBecqvFBg9GQq8odPv0ctZc6XY7m9ReGW7i/jo/7roOx5djTPMazB18D0bC7km0Aw+7FWKuatjUsPm6vc2Ol1zxvE74OgwF193YbfBgJPSSJc29NLHK7TVsvm5fHX8X7A54nag+XG9ubnkwVrgd1sDXO0BLHti2g65ji8X9b5frBMvB1cWcTvQOe3Wffv/hw0joxbsdyq+wO9Y+uuWqq2WDaZQaRXtu/phyZcGNzulE77BXJ+n3Hz6MhF4wnXKBMCGSBLPba9m8k/xIJNI9OJ2oHTbA1o/3YST04mTcl18/n9oaNvVsvm6P4jYKNy59h+1q1MqH0eh2qs61TaWebTLXFO8IxTrhFWWdSuvwnJO11mYvRkKvazHJRdIZWGeNuwp1bDg82zWzotDidKLW4fX+4ntw8VppGXEQenWF6+xSkPi9swYP+pRuN+jY6DO9br0GVd4o6USvw5FwEaeVnpECqdeCftHmWxVUmgn5u9fHhNaNEF5l69lwlMXXYVQGEK4TAKtNuuSaJc8Ku65LWtkYcRT0GpEadd7saPcxN22+25YdY45gbBALG46eDB09JE2aLTCdrjvrtwf0zinH0lpZGXEU9LoW406HcPDTraPb/TewVdcr99RpHf/4J4GLei1ub3mEQ591a9lscCz8dAIcqxWA0atH0pcN8dDX73rVgxFHjO+lE+BYrQCsXvg6o4fXky84lo+/IOGlE+BYrQCsXsHQUHiH9aUfGYYTvA7loxPgWK0AIr0078XgOPY90C7FrlcNX4N6nQDHvzMr1musTGBHRi/cFfesomtQqxPg6Ctdpdf40XdOSjiXZeeyBoPSwjOk0Xe0p/v3HOfU6QeEXn8AfdQ2W9K2REsAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-5px;" /> is a pair of two maps <img width="148" alt="match : A \to A&39; + B" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASgAAAAeCAQAAAA1WkuWAAAFS0lEQVR4nO1aa7nrIBCMBSzEQixgAQuxEAtYwAIWsFALsVALvbDkwWNJCCW0536d/DmHJrDAsMwudN0Pfxtj13/ahB/+H4zdq3t+2ogf/h8ITaj500b8cIyx4582AQVm11MTavqALX8SrFN69b0aD1mv21MN28sFZheFDY80aF3qtvGHayv+CHpt6gSEaik7lW7v0bC9XGB2cV3WxpsO21wI/df+jNomQ/ShiRUBRt3wVWrQxhqBwaC9GraYB9yuuelio2BBTB0Fc9TCTwYw3b/qHjmsiVYger2JLyQUbpfZBOXFmt6h35SIKIfmsgTQF02UYf94gzU4uB4WnliHnwRu11SwQJ9vKB6ZJPDrE7pzLGq0pYLqQaNYpfBNQjNllywQA+/0LBVRErDsqq98G6LALbZVUBIG2yoFVq3W9z0sbhcpqrmcUCkFZV1Fy31kwVywkbRUUHRZY3bg6sVO6s0epOwaijLk5YTiyZz8jMfFRH8iHR9i0mgmy7BvOGwpSZk06qGTAVPJEl6yxWGbJ6ZVr9uV0Lq/va0KaoCWRdYqMC2WRByPpW1SmVDTm5miunaVE0oltjUBRENchYSJmGE9DfrzEYaBL252AKqsJfHEUv2lJZ+Rj+PmnHv9Hwc6vOANDr+6ILrFeambBhkN62TlUjPN8ldz0TbJnal6VfWLRA93OQ1q21VOKCySI4tQRxYMXQxXQAXlvGKmZwhKQtc3eo0JJEEgE6vLOO7HVjcB6u02mZZcismMbbMkj9R7LvtZOWbhusaywKK+XaWEoguh9pQmg3kWqfrEMlFzlKSyIaFbYjrm/k+DjjJkSp9oV3w6hdlgHsU1PEPYT+AJr0F6rajqQfDD62U+6ttVSiiroLj3CG3NlOqXNZQgIXMc8/h0IUAWdwWOkUgbUK9BIk/28LZTFXk1VTX+WkEDbaCqpzYJUOr6KUF9u0oJhSso4xCeuLK1E8ciKsSB+xCU8OgbERFhQtdW/KWfyY1zUM9bUo7hVPPqhLKUel5Mm9xhVymhUrnwMZlMAMSHjXHgPgUlcbprjvwIpqDIydULnMr1L5Nx0GnuMyNU9tGD7SUPGg9Vs6vUxrPoOZ2DslRLJjUfERXiow9/W2JRU/aIxd9ZMQXFTobnnMo1YGQvDR6BbPwhwm/OHwleOtc/lNp1ZqMvrNfnTN+lc1CWUImomiBUCCc9pEvcVK6COjLSAKdybQUlkQmiFycuB1fPCe6yq+z7VA7K1pgMFXIU1BRULaPqchXUWcyCUbn2hhfK3rW0bmrTbl9XtN99dpURKn2bgB3ZlKOgdi/BoIlYHe2R2/ql/846VDHxXMRUdm2pdRCZirzqEopmqBQf99lVQqgjBaVgmSeEy7mCcr2EgGpCErqXVFb/4yYHho0UEzo4ZPkqpvJ+FshONo/cIePJyambK1cXF8CddpUQKi1OpiNJn6Og9sMP4hxZut1/bNvmsJW7CmpP0/fRBmvK1rx4rKD2TqGpfsSCYwyIrltRM1dOD0OPGPfaVUKolILixxFibg7K0kRsLlBt7xAofS61yG0Y1TZEwvOA4QUx94owloNSy1vH/umFLIwQBI5sU26cwm+1LrWKCxS4367rhMKUW69nwZ6pHNQWKyhsUxKaLsw79yfg0hmk4s1AMMidcmfaB0jaj/CWD3tMYq6/+/cUwuSpwahrYQfbQbofIVS3Z2DClSed39JS9Ary05kt7LpCKBa06T5z4BwQkKipuMRgQPIWpmxfVaQLr6jYSyw48EwIRbaJHi39dpRdprkL33UX9Yc/jx+hfqiK5O2AWvgHlCpiyFJxzyYAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-2px;" /> and <img width="109" alt="build : B&39; \to A&39;" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANsAAAAcCAQAAABCZwLHAAAEtklEQVR4nO1aj7GzIAx3BVZgBVZgBVdwBVdgBVdgBVfoCq7QFfogiEIIiJXar3ffj3t3r4AQk5B/2HX/YTF0/NskVOA3qLwNQ/fqnt8m4hC/QeWNmAxDlm8TcYjfoPJGPA1Dxm8TEWHoVNJHUsm62bSXaXNTAoRZ7wHrpoSEaLu7hvWopjqJ5kowPqzJvm3ACT5kqZRdbw7hEXuPwAzLdPTbrmsFgtmFd5cNdvcQZrURdp1gZd8GUKHZjO9QzXZtBavAD9RXpHI5ZO8RFDArjng49B3DsrS/tHsICbuKpH8GH7Hr7ZLQ+104Jcf8KlBZy97yprPR6RhDlfFzu7czVmMm8hKwj/cSdldNzPoWmFHeKZFDkco69p7HVGWGBsI0XIHOvmroQ8fL9qUtlKFIJXaiSGUde8+jzvS23j0XHzJgiheo/qeCag6KOyaxQJHK656NJqXO9C63eDZ3ql+rIWfbf21wdTUN/He077woUtnCs1H4jmdT2ZrCEhhj0bjuMBub8T7kagMkSpiKVHr2SvOANgc1ZCGHPnwWRKTN9Jyy8RvMqAZNOvZsNpWoF+uc8WwTiJM6hS0wXsoAH2usyCry3A2Ovdr8MdMms4gnQJhfHCKwUCg8KrbQcyxyptfmaQoItU742LMtp4o7YbTowdYw5XOpNTNie9c/q+BJl3FWwbHF6yHbHrT1E7b2hMZuCPQ5NydveoeIrVOFX6WymRzkKrY90e5hj+njUaMygnsnC+SRrXnWxvQcuUFnZjgQ4np7tNQUMF6tLhPPyXk2iXr7CpGMcDrr4DybitpkdhxvKGI9AjtVDx0p1FwrtpS986r/XgumLjY7SxCp5ebQno2BNoU62TpjpD2bde3PppEjBQaCO3fiJKJ2rrUsKXt9hVCtxMRFKx5FavQcvwo2TCoJP1rnbJRnsxiyaUFLWME9T90pYDGrWrFh9jJkNPF5GAh9Tvtoz5Ymwm0zxnzO1kWpdh040PtOq41YrT+M7ykW4gCQpGH24le3MVhoXlJz6ErBsQmijF+fMLV1xpjP2ZzYztZF5Omm4b3rFNEGI/h5V5U8fD5lb/zq7uyFjnbpsD5zglmU8UuZeo9nc2h/o5iCUuk8NCEeWSe29DYnvvvqkTeiRGTXwLkGZfx0wri7PJs/6Z+9XVOn0nkcjPjeKjoVelEBYuHReLjI7sXE1r+fv2E1laHx24nTpIo44V4pDXmUPNuM3qs9ZOIoysjFnFViG7o4Z8P6j8W2j48rw2XgM3wdYjd+IngarxUKt2y+6nxF3rO5yvpnE4D5VMCjsqKpqpPwiJUy8Q1jNO5iK7mS6QnwM/i23d6nAqWQSGyPzQCLon7t88rIeTZ1g9BkTfy3QRQCsco6yRRVxSeU53MIUR0Y1C1f6xWDZ/SwCUNvhIu1jyF2z9u5tLVPu98DPUnhlYRFFCivwA11rnT36dLWVB3uMCg754y5hLHluNriPt3pzQs/SHfegzDd7QAHQdiPD+ZgYZtv9GY0/rxmMbM0Io6BKemh4CTWtQe41y3h6FMd/w0G1Ww1st1dXh61SfYc0IYtg0a0H67IIWfIw46K6Fc6jvVDZK5bRLQWi379Ls5cLV3AH7LBxrwQImNPAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />. This is the classic presentation of a prism. As we’ll now see, it too has a more symmetric coend representation. It’s defined in the analogous way - in terms of two maps <img width="113" alt="f : A \to A&39; + B" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOIAAAAiCAQAAADo8c3oAAADhElEQVR4nO1ai5GjMAylBbeQFmjBLdACLdCCW6AFWqCFtEALtMDJNpkEDsWSbEFujufZnZ3Mxn72E/qZqrrBR1s9rqZwIw9ttVTz1SRu5KEHEaerSfDQVK6qlddoYY1fxDGvGUTsTuciRl09YRsWfnrFVR5wKKPi/FIc87LBmZoT1h9g9ePhNSHCgNPwm7DB9vSexhFmf6rNLscxLwefnuM3ajj5DlZb4BGyH6MFVt68SIp0q9twqrbXBJqL0uxyYLwm+Oy83NQGDn/LNYa4TNDE6+0f21oxKhpYpf9BETFe3sUOzLlyJO+QTLgO3JKR2ZxytA6IOMTargTGq1sNm4OZ/Y03BtRoFkomYU+IVI+wQvT78o2WB85rEBQXOXvDMuH4iCV9ggsBVRdD2F70+03BeRcI/jnAeBnRzHIRsYgYGw4ELoN6NWRXS4pUS2Z8Y5b54bxqUadGLqJDe0NTyk/GRHYKIvq/0tHKwH/xs9fnGvJNcRG7rGy6NC+5iCPiMvsg7lddXBhxA36kHcgkaES5j+NZCrtuA1uUHn55XnIRjzJQsyY7BCO1LFn4ld5j4wzm4j0bB3NKUnsNXlIR7Sriu8xvwKSmUPqT0LHqoQ6m5ln+sCEyKjTenjD4LlWDl1TEGBHdZvTAp6Puq1dtLtmdgYwKNakJMvKeRh1eUhGPI6JPrmZajvzM8OSU2beH61QaC17GmZVh6/CSniTWk2mpzZFFsUPo49W2Kz8R1nuECCUZiTwuk5eUY+pZwmvEilbo12h9kg+fOtjdiF3KlL3uv5UeQ4hptOdAzivFcZucvEYqruE1YhQxmXa2ConGC8PBoVj2YVHQs9oVerxkM2A1YpyRoI/endk+dXh9Wrrcj86R3lTX5CUTEb+laGisvBWU7GW+geWLpUW0hKjzCU1eEhG/RcQxONpkpOanNTSaDj2Q0j2bkXXrp8tLIiIeETtSWhQuPnlpjS9I0tdW9Zd0vWzPxrKMUJuXREQsIjqahNHn8ojHpPlbvmVCUxpzEPEtHtLrBiT0ZP5n8OKLeBSLHyBd7FGTZuOnNalvjB/10d6+hl39VOL6i1rin8OLI2KzW/Vz+K4pOVMZFdL9cyG5GNPDJad5v6ReFqeKWK+/9V/L+L9AvnXIhQkZZlfFFPa33jy7QcT7paC891NuXAjff/cStqKr1Bs/gjpUV+6W8N/DH8XQQXWPhdmJAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-4px;" /> and <img width="117" alt="b : A&39; + B&39; \to A&39;" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOsAAAAeCAQAAABnXCH0AAADmklEQVR4nO1ajdGrIBC0BVqwBVughbRgC7ZAC7ZAC7SQFmzBFvIdkEQFTuEANfPeMpnJmCjLHnA/2DR3Q9+0V1PwcEdOIdyWZ9+8mvlqEg7uyCmEG/Mcgdp0NQkHd+QUwk149o3wrs1AbbiAyx7uyClaO9YoaC9o6hRibaAnbrYRdkLv0ow21ASwuIZTPJK0480DFvErMA9qQE+hp3NNnNZ7B6MdzCQe4dvSeuCkJesu4BSPZO20WTn2Y0E8jKSvQO/nxXLcMOi868r4qM+8P5dTDJK1awN/rwEGc230+tK9y8Qn5Qg+IJFjZ5gNZE51QdCuP8mzChBNeGtlIOwUc8beIlEplgiDwqkuCNqNp/iR1vgF69nWVCQhPM8RHYtwmWEmyZxqgqTdOZ5Vmj6sZ3t8r2ox++Rn0flintXuWZYLjROO/KcRtDvHs/L3OrDUlr2hI1VI6GYVaE1m+saZNE44FOyHOSBp9/GsHG6QsND3czUG/6Nkc893mMMcajTQzaoQzzoac4dWcT6GzAyYpJ31rBI+DNoID9mjMJFKVWJFxmaNeaCbdYl2F7B3GFWr+MDArPSJTNTOGuozT9nBjaHc6QjtJomeC8TdVLPyt1mXQsQDRjuZ4kRNCBg1LSkjatc6bthuUziFAURInXlyI5q60KzWs4pNG4HNkevJx/NgF8RA1M7PWVXhuJg7vkwVCNGoDMOeVYcec9HY1wczhk1dsWTt/Jy1dH3YHYy40Kwhz6rRo2lPOWjDzolnQmTt3JyVeZtyHrRX2Z6VTKaH2HnbGn8S147WG56zNqtSRHle2xYfb5O183PWvaGnQzt87jRb2Yxfbe793HAcAlePfBees1qzpkX4IV77TRqHFzvyDO18z7o39HTIAAWeaNYQaPdjOat9Yu26+Ig4AAwZ2vmndSU9q+vw19Ty+qCZFfOsn0OvmnVxkVjsyNJOOAPtzFotdc6IRX7XmHXPvaii4w73nRZpZ2nXO+FRzFlOrKACfVJ+nYliVty9DFEBVw5U4ultpnbtxow8IhrUL4e4L16E0O0E4vl1JopZMc8qqhuVJ0T+GgW0G79G0kn5eBhN2iD96DhgMN2HNzxufpuy6jrpZg15pRaMaUundUuHY8IkLqSdLnNL2IgFmDcmTjt+dUutcjR3dUgnh6O+sJli1ofT57rpanC5HB1DfBGiqHatyYl+CXd7JWUftKPMfxC/Zdb/iET9E5efxB9ck3FnIEglagAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-2px;" /> standing for <em>forward</em> and <em>backward</em>. For any prism defined in terms of <img width="47" alt="match" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAYCAQAAADZ2oKUAAACk0lEQVR4nM1XAbHDIAzFAhZqoRawgIVaqIVawAIWsFALtVAL+yFQCCTbyr/bben9+2tGyEvyCJlSvytWBXWoBzzrt6GMy6QMwI7gp29DUWqBTI7CMAD9+AiaQYkUMIM2G9i4j6AZkgkJMCoBbJYPoBmUBWCEYasfYbz7R9f4KcbPgza3Ga9hqSe5WeA9wF8tms2aZ4duAUe+Y6iG1fGxSID0mYcwgV+P3luKXIyf0bN7zn4P22rIj8PFARZqlWK3qPFEwzcxYJkCXeH/kq0irA2fgARIn/vwHHyT9jawjob2wGr5vLN5VgcDC65Y482myQYHBkM1Z2e9NHx2QlP0oNkEvzPstZe9NYZZMUVPNBwvU89l5YFgNfnmgV2Cak7Q0HfT9RErNMVT7PEt9JS6vbxtmWqq0QiHPjnXbHkCb5mmikZglKtLAyGBlHq8ZhXaG0oGVq3AsOSYoljmljerudNszMYxp6vY47mlapLAe/z5qmNtzC1vVmunOVkpD5YfifFasKQip60/bUR25pZfz21pbe4IVdIYoBsbifH2ze35Pm2NaMFt76CHtrFs3GU8t2xFTpvA+CR3GB+j9+TdMzbfZXx4M+tIaXsR7B3G1+gt8pWzuXaQy7Jdc4XOg6TC00axeG7wnvE0eod56QOmg++VV9oQ5wJgFcHrbMXTVmcjy4/5HcbXC1rn6E0HYS/Um4ueMt4XD5PYKK/7lDO+ps13KNX9Hp8gudJhQlmjUXvmXXwJOxTwrqns2vUg+jNR6vEhrxLaK2e8VFgH0Gwz38VCe5w4U0AW3MSJtLqIAcVxzLNeseKwFn9mt/NofxEm0Cd6Ec+JZp2Ya9LGhpVtbgZdzcbeNBjLksbkfkcj3ABTr/0DBgZwa8tknIwAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /> and <img width="37" alt="build" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAAAYCAQAAAAYXcg4AAACTUlEQVR4nLVXC7XkIAzFAhZqAQtYwEIt1AIWsICFWqiFWhgLbxOgkARKu7Nvw5nTIeRHcgmtUhdptcP4gbGr3yQD9o5k10+kJr6tcup8UH8mrSIMOke76NJOtCyMie/zQf2ZfAphYbwl8Z4Ic+pGC+/U5+SgEKvgrS+gkX3r0dIb9W8ovIAG+j6+V/+G3kBj4vvfkTWid9A4/yeyRvRLyLKQzKg2IrQkjtyLgcFNj6Rm5VlhLaYD8oisCD8NI4CYLu4DuDQiybi/kwU5kkIaQwP7lE+NZIPnA7LOmgENs6By99dlTkuB+2tt807qDhqovZGE3KI6q9Od7qkt+sJzwmFghn3pVVJqjCwreO4e1b36nnZwVZyHkXPbsHUnNUKWVh9xD0wORa+e7yhfTPErBXP7IbJjqcsKL4/v4P0XPUuzosr9cGTdc0fI+nQZfUAWJZs4V5ki/Kc3XV8spENIjcrjmN270G/VPSmT7prdKUxf5j+C15fHd1ITZPkbZGVyAg2jALKNIHh9eWIXxARZXhTFJMcLWaWKDUOG8FsG11JKWp5Yn6ME2BKgoFX0LL4DGVZb3WouLOn6sRS8laeFL23R0LtSLkzYihO1sdUlnSUrDDV3S9114/m6aSvCOipAzKiUoaLHgNvAAI6BXAHodGvmsCwxtFZ3sRbfFJ5myNxrVvHmRW+H0COUPw0cmDkGR9+lUPO7xZLc4KvxzoLHrxcH6/SEeghhFTy8P7OnkPhoe4VZ77VmxU5eA3HNsNlIQr4zmQEvc5stzWZAfwBFplkc4+jnEQAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" /> maps, we can recast it to the coend form by setting <img width="79" alt="f = match" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ4AAAAfCAQAAAC8YLyNAAADe0lEQVR4nO1ZjZmzIAx2BVZwBVZgBVZwBVdwBVdgBVZwBVfoCr0kUgUSFbn7rr1+fX36xyOSP94ktGnOYJuh0ad3fcCgmwlMZ+A1PluUJ8A2vpmbO1z99ckKpnr4NM0NHvD/RV8LmvdkvPb65D7YfIDPG5jyr6ODULhqBgO6zzWLTTDRNLh534P15qDPFWDgVFCWooB9H7RV+niY011fDAN2uj7tZdGBPv7yrErGqwzYl8VYkTWrGc/VpeiXxVxRMVQEkKFrJuPht99JFgpEdZG7Ovjt4bVtGhtG9ki/A0VdxlAqaGNpA5odfVpY19Hq6RZ9MJ6mlccS9hvowsWWbxWEWQEHamFliZ7WIGpHxRHKYWnERSNcInT2YuieJF5moVkWHTxtQEkfBSvO4dkG7otNe6dodeHJpjQOq3d7JbCLQXhS20dVJcqhs5FbNrtLKGYUihJHocCh4VnT+mxFZt5kwpVic7qyrY8Fsju/jZa/F1/7HDoGoWYyVlyQ3ylLxiPY78S/TZZHrVCU3MQaLzXd4rqtwhjCVm+SkYI8MO54SoIpvva7lEV5xcRdjGfZyAZFhom5qmNFlhZrPMUidEoowTMbeCaLiEn01L/DIqRlanP60NnIwOZwx/dijcdnNokTeI1X2ONXFoffxMDU5sVCn43c2FaaWXxIjKeEmTFkt+VsK6Dwth/HxNTm7VG6tWzIiBuWNiwlCInx7EmAnLttB3WtzHehBLVzBXPTDMzNpYzHZ6aQ3VbAeHz77KOFZUqv46VLGC+vAhxzcynj+ZMAkdxWtBsLs8oq3FB4HbNoCeNt3rfEV5zNtgz6mJne8zD9cT3B3RbLcljEPSddnDNe7P2RJMwNHh88PeIqLkj0aoBeNJ4Ks7jbtt7YHtV6xQH6oyhhvK1BUsH7JjPBtG59vY7HjOfWFVqxUHn0E5zxNpu4o1N1+5R0UVrjLSYZ1wzr13sUjd7CU9xqdr8ab0wiu89ycHxML9V4Ptx12GNcSRc/B76qtLFGMI1Nzjdwozk6cVkMakFNPJHZVESD4nGAYzze02EB/s2TnsfkhTiig6dYYu5D+F/uLhYotiYfQWihzdPJQZNix07LwZQMuXE0Aue34miG5xTIfxw6vL/X8fsvQFGeQp7oy5rfDzaY9ejHf+LuKlrKJZhTpqMq5gMZWHvj3ysf0xXjC8RT9cPf2zCHAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-4px;" /> and setting <img width="9" alt="b" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAYCAQAAACyng6EAAAAt0lEQVR4nMWSURXDIAxFYwELWMBCLNTCLGABC1jAQi3UQi3UwvZCuw1KgP0tOf1IzoX3mkD0DkMr8olcaRhMC+3AwhiTEIxnkM2i03jMnUnE/zljCCfymOTAWcJnkJE2HRRnO7mrMqhiz9lSdGR1tuesxpr/bmem7vc+M9OYIG1mnDuuxlpnAZ3jLhl+cyaYL2qX71LHUdrtvBVbtcV+aqHz/PYRPFB1Fm9wPkE4APc68pVm/Vm+AKEtU75reLJeAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> to the composite <img width="222" alt="A&39; + B&39; \xrightarrow{A&39; + build} A&39; + A&39; \xrightarrow{\nabla_A} A" height="20" src="data:image/png;base64,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" class="display-math" style="margin:0; vertical-align:-2px;" />. In the image below we can see how the prism is an upside-down, mirror image of a lens.</p>
<center>
<img src="../images/prism.png" alt="Prism as an optic" width="600" />
</center>
<p>We can also imagine a particle flowing through a prism. A prism takes in an input <img width="14" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAYCAQAAACsVz43AAAAyklEQVR4nJ2UYRHDIAyFYwELWKgFLNTCLGAhFrCABSzUQi3UwpZkYwdsLUlfrn+afEd5PAqg0wNQOTnIwxPKPbQQut0BVwK5zHK0XrqHIkR6GF1soJc9RkGDDc0CBEFXCxgIhS9qOtmNPpjlrCg2w4wmLei7EByWPOXO0aJHq0EtqgxFNagKtSjS3kpXu6B+BrJBYaiky1P+MxI06GhQi05CMRpUNUXxtD3J03JxABd5cnQrj9MLHaS309SPyuf/wzXalJseV3y/fgExVmXOX3Xf9wAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" />, checks for some condition, and allows the environment to execute some computation only if that condition is true. This computation is of type <img width="57" alt="B \to B&39;" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHMAAAAcCAQAAAD46EjiAAABw0lEQVR4nN2YARGDMAxFa6EWsICFWsACFmqhFrCAhVrAAhawwNKw3bYbKQmk9G6/d7sxuPBaQn46Y/5ZvWlqI5RXb1az1IYorwGmOdeGKK8Fpunp06OJxAjG3Ud5kc1hylo6VAuXeLhohcfuPkZvJvgtwvl64rMFOA5H4RyG+p1QxHzPrNEN4rHNcHRYZz1RpVq8RSbjbxCHrYFv43GokbxsxeSoKQ5bWgpGHaGqlMVQjHUqKA7byLESKvs3y13hU0Pn4nDYLC92IPuH9GJPJ+D2FKFaysVha3ndTyQSc8BbaBmKz/saIUW2vWpqn6++nplYwDp0th+psblnqLf5drBWMxqyrgJMVLaHUGTbsj98jQGSxRdoCyYYkqiKbPvZn17rRanGvmVxovwnqshG9Tk9WcqvKE10YfdVamy0LxlGa9CgeZ8ZnCp5je1LtC9toY66CyceI7ZonBJyle1DlC+9Qmn3s4NgK6DIRu9AOjwnd7qcgsjS1dhy2R8xZTT/K3OivlaRjc5+r9i0vxRFex1FNir7Q4FJpqcjyQ01NreT4Q0EmLGKabd6g6icqbB1GUdLHWMnAOKK2xTUYFOUu++vswfu23An2CDS5wAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" />. That is, the environment takes in a <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAA5ElEQVR4nIVTURWEMAyrBSxgAQuzgAUszMIsYAELs3AWZgELXFa44/Fo2vSHtzbdkhaRNzapJIoko/6BCSVZDsSKrzsW+eCsIh8gKfldVnHaZPDJ/ebdfFVvmn3yhpLNzBz6dBc76T8o2W57gSkWmNYzi0cuRLHArAOeu6jkaas2DUZlOTpcJgZjShf5Xo8ZdzZdmRCn4vKIFVJydGuHrXhCw933uYPt0EIH+AefscQLwmd8kptHZjP+kd295n/NrLnCqZ7iqoJGTuaKc/xLMMUlpiZD1QhKU5fpcp5m2NG3erZIX9lZjeq4V/EkAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> that the prism produced and returns a <img width="18" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAbCAQAAABR545VAAABJElEQVR4nK2VDRGEIBCFt4IVrEAFKljBClSgghWsQAUrWMEK3LLInY68Yx19zNz4w3wsbx8e0VON1D9m7KBI2zuoiVHrO6iNUQ6/nimA4cmeZlrZXodRhqc4nhS5fHsYIy38LPD7Is/3vlW4FZS5PA/iTalj5btm/xzojJElsjs9X80tUPILTYuyybKcrc45CXWmE9S8L6eIAXIqRzLyb4aObZSHGU5GL3JldCkPwKlJlqhVCxUrTnV7K/4E8iq7o37hHLieVQJ7U9kpfxoTb9rdqyip7lSyedP07KiaU0kjjAgQzhQd4qkSzlRG3fjQoUwVVNCjkFPEkYia71PRP6eCbF39/4Kdct+DrBRyyt8F2YobPQNW6Zzy2GRL6yOdvqGN+ACxYKOQNBTaGgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" /> which the prism receives. The prism then has to translate that <img width="18" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAbCAQAAABR545VAAABJElEQVR4nK2VDRGEIBCFt4IVrEAFKljBClSgghWsQAUrWMEK3LLInY68Yx19zNz4w3wsbx8e0VON1D9m7KBI2zuoiVHrO6iNUQ6/nimA4cmeZlrZXodRhqc4nhS5fHsYIy38LPD7Is/3vlW4FZS5PA/iTalj5btm/xzojJElsjs9X80tUPILTYuyybKcrc45CXWmE9S8L6eIAXIqRzLyb4aObZSHGU5GL3JldCkPwKlJlqhVCxUrTnV7K/4E8iq7o37hHLieVQJ7U9kpfxoTb9rdqyip7lSyedP07KiaU0kjjAgQzhQd4qkSzlRG3fjQoUwVVNCjkFPEkYia71PRP6eCbF39/4Kdct+DrBRyyt8F2YobPQNW6Zzy2GRL6yOdvqGN+ACxYKOQNBTaGgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" /> into an <img width="17" alt="A&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAbCAQAAABc+f4SAAABBElEQVR4nKWVYRmEIAyGqUAFK1iBCla4ClZYBSpQgQpWoAIVvLHjThicMv345XCvsH3PVOqJXmp6lJ8hu4rPMRYxQfplaGIRMasEMmGCZzFDV9ISjMeUjcUAY+0JT7RgQlq1AkYEfdJ4Dttg0jWd5CyAZQTCzEV0xWczDpmoJithyjQna7WjZEOY5RfV+PQah5h8/w/m6Mssc++We6EZRiQoEhPG3oFMleFix8dDclVn/D2MYebyHR8PaGNGhzsYwFr4agXCiGZdKq5hyzY+vpTrvG6kGF7cEiMwIC/uVyIM/H1V4OP5pKmDPtY4VSIbTocM7YWrEe7zvN07w9EVe3v/p/IGTAR7dHkFbeoAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />, i.e. it has to know how to translate the answer from the environment into the type that it would’ve ended up with if the condition had been false.</p>
<p>This shows that that unlike a lens, a prism routes data to one of two ways: <em>either</em> through the residual into <img width="17" alt="A&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAbCAQAAABc+f4SAAABBElEQVR4nKWVYRmEIAyGqUAFK1iBCla4ClZYBSpQgQpWoAIVvLHjThicMv345XCvsH3PVOqJXmp6lJ8hu4rPMRYxQfplaGIRMasEMmGCZzFDV9ISjMeUjcUAY+0JT7RgQlq1AkYEfdJ4Dttg0jWd5CyAZQTCzEV0xWczDpmoJithyjQna7WjZEOY5RfV+PQah5h8/w/m6Mssc++We6EZRiQoEhPG3oFMleFix8dDclVn/D2MYebyHR8PaGNGhzsYwFr4agXCiGZdKq5hyzY+vpTrvG6kGF7cEiMwIC/uVyIM/H1V4OP5pKmDPtY4VSIbTocM7YWrEe7zvN07w9EVe3v/p/IGTAR7dHkFbeoAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" />, <em>or</em> through the environment. These two branches of computation are shown as two animations above. For each input of type <img width="14" alt="A" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAYCAQAAACsVz43AAAAyklEQVR4nJ2UYRHDIAyFYwELWKgFLNTCLGAhFrCABSzUQi3UwpZkYwdsLUlfrn+afEd5PAqg0wNQOTnIwxPKPbQQut0BVwK5zHK0XrqHIkR6GF1soJc9RkGDDc0CBEFXCxgIhS9qOtmNPpjlrCg2w4wmLei7EByWPOXO0aJHq0EtqgxFNagKtSjS3kpXu6B+BrJBYaiky1P+MxI06GhQi05CMRpUNUXxtD3J03JxABd5cnQrj9MLHaS309SPyuf/wzXalJseV3y/fgExVmXOX3Xf9wAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" />, only one of them will get executed. Prisms are quite often used in parsing. In game theory, we would use prisms if we want to allow agents to stop playing a game.</p>
<p>I find this operational perspective of lenses and prisms enlightening. If we think of lenses and prisms as little machines, then lenses are machines that always query the environment as they operate. Prisms, on the other hand, only sometimes query the environment, depending on the values of certain variables in their internals.</p>
<h2 id="here-i-am-stuck-in-an-affine-traversal-with-you">Here I am, stuck in an Affine Traversal with you</h2>
<p>Can we combine lenses and prisms? Can we model a process that has both disjunctive and conjunctive data flows? The answer is yes, and we get something that’s called an <em>affine traversal</em>. To understand it, let’s go back to the formal definition.</p>
<p>Both lenses and prisms are optics, and optics have a neat coend representation. Given a symmetric monoidal category <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAA0klEQVR4nL2TURXDIAxFY6EWsICFWsACFmoBC7VQC1ioBSzUAnvN2LqmCd1+9nLaD3JJAglEPXkKlGC+S0EOUKH6tmSjA5yVFvwjvpXxbBewwuk+8uz4bMGbcD3xaMEybQRc9JoL8EGsrlbsWbmB0Yq9O66xFwSRa6zcv92zPJ//tnsvJatGXcVuxVXubi7OCoyP3+LpD3j4DbeOGmTeyLh27wN3W7TPtSc2qXmVecyMbyJO7D2M2p7Z2CrOKM+comNDbZmSPrrHsSbMd4YlvQSiB9UGZ4gkQsCwAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />, the hom-object of optics is defined as follows:</p>
<center>
<img width="455" alt="\mathbf{Optic}(\mathcal{C})((A, A&39;), (B, B&39;)) = \int^M \mathcal{C}(A, M \otimes B) \times \mathcal{C}(M \otimes B&39;, A&39;)" height="40" src="data:image/png;base64,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" class="display-math" style="margin:0; vertical-align:-15px;" />.
</center>
<p>Lenses fall out when <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAA0klEQVR4nL2TURXDIAxFY6EWsICFWsACFmoBC7VQC1ioBSzUAnvN2LqmCd1+9nLaD3JJAglEPXkKlGC+S0EOUKH6tmSjA5yVFvwjvpXxbBewwuk+8uz4bMGbcD3xaMEybQRc9JoL8EGsrlbsWbmB0Yq9O66xFwSRa6zcv92zPJ//tnsvJatGXcVuxVXubi7OCoyP3+LpD3j4DbeOGmTeyLh27wN3W7TPtSc2qXmVecyMbyJO7D2M2p7Z2CrOKM+comNDbZmSPrrHsSbMd4YlvQSiB9UGZ4gkQsCwAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> is a cartesian monoidal category, and prisms fall out when <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAA0klEQVR4nL2TURXDIAxFY6EWsICFWsACFmoBC7VQC1ioBSzUAnvN2LqmCd1+9nLaD3JJAglEPXkKlGC+S0EOUKH6tmSjA5yVFvwjvpXxbBewwuk+8uz4bMGbcD3xaMEybQRc9JoL8EGsrlbsWbmB0Yq9O66xFwSRa6zcv92zPJ//tnsvJatGXcVuxVXubi7OCoyP3+LpD3j4DbeOGmTeyLh27wN3W7TPtSc2qXmVecyMbyJO7D2M2p7Z2CrOKM+comNDbZmSPrrHsSbMd4YlvQSiB9UGZ4gkQsCwAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> is a cocartesian monoidal category. So how do we compose lenses and prisms?</p>
<center>
<img src="../images/affine_traversal_transparent.png" alt="Lens + Prism = Affine Traversal" width="450" />
</center>
<p>Since both are given by some monoidal categories, we’d expect that affine traversals are given by a monoidal category too. But it’s not clear how to compose two monoidal categories. What would we even expect the result to be? As always, understanding what it is that we want to do will lead us to the answer. It’s not the case that we want to treat these as <em>just</em> monoidal categories.</p>
<p>In the above definition, looking at the operator <img width="14" alt="\otimes" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAXCAQAAABdAYziAAAA+klEQVR4nI2UWwHDIAxFYwELWMACFmZhFrCAhVrAQi1goRamYQm0A/Jod/ki4SSBAACWPER444jgzDVCDhIcsEM+xw4VQ/yhF2KZZXJoqRDuwQzFKNDf587wuXEn2xtxV86M/Yateb3mPJpZhwm8wptODR4+QFQcV5lMKzyDNMscrctswCtIHlayMJwwB0nHOtW279qdkmK2oCyijNpp1ydDL1VrlYLOF9BuVZC7T2Y7VjjjA2Fyv0LkqQ7YyXJ7PGr2prRjwEXm7Kp4zhp4wXpYVpheldblCS4YWT4s3z6cR9EXs2H2/hzocysIxmewK7SvZm97T/rz/gK8bFe6QCthQgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-2px;" /> (which appears twice), its left operand <img width="19" alt="M" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAXCAQAAAAi0J4TAAABIUlEQVR4nJ2UYQHGEBCGr4IKKqigggqroIIKKqiwCiqswirsu2MzbHzj9Wvu3R2PA+ApC2saPTFwyWfbNgESFtjgwCE76Qzs6PCg0CW6hTFsQzrVdEhM13dk0ri+Fc2mEWdYToV0n+SAd9MZXD+trk83yYdfWnYRyvhOucpOJ6XRvr3GHW6W/T2qJCJHsN/Z6JBkkBytkX7gVYyfGxwkR3rbjsVtRs8QORK18lLE1Nlnw+RIdavQtYpaRsmR6Ga4LGKKyCC5GrfMVrqNk4vNsKeve57PkCs7z2SvxhS5/Px4sbUpcqQr3dVtUVPkSLFVdPGqTZK705UlBsj5qqoJZ8uKuY/kOB7DUVGiR0pXrj24uootcQ2Xzd/rEIXneNxn1A/pyZxTNnhXzwAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" /> has different semantics than its right operand. The object <img width="19" alt="M" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAXCAQAAAAi0J4TAAABIUlEQVR4nJ2UYQHGEBCGr4IKKqigggqroIIKKqiwCiqswirsu2MzbHzj9Wvu3R2PA+ApC2saPTFwyWfbNgESFtjgwCE76Qzs6PCg0CW6hTFsQzrVdEhM13dk0ri+Fc2mEWdYToV0n+SAd9MZXD+trk83yYdfWnYRyvhOucpOJ6XRvr3GHW6W/T2qJCJHsN/Z6JBkkBytkX7gVYyfGxwkR3rbjsVtRs8QORK18lLE1Nlnw+RIdavQtYpaRsmR6Ga4LGKKyCC5GrfMVrqNk4vNsKeve57PkCs7z2SvxhS5/Px4sbUpcqQr3dVtUVPkSLFVdPGqTZK705UlBsj5qqoJZ8uKuY/kOB7DUVGiR0pXrj24uootcQ2Xzd/rEIXneNxn1A/pyZxTNnhXzwAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" /> is <em>private</em> data of an optic hidden from the outside world, while objects <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAA5ElEQVR4nIVTURWEMAyrBSxgAQuzgAUszMIsYAELs3AWZgELXFa44/Fo2vSHtzbdkhaRNzapJIoko/6BCSVZDsSKrzsW+eCsIh8gKfldVnHaZPDJ/ebdfFVvmn3yhpLNzBz6dBc76T8o2W57gSkWmNYzi0cuRLHArAOeu6jkaas2DUZlOTpcJgZjShf5Xo8ZdzZdmRCn4vKIFVJydGuHrXhCw933uYPt0EIH+AefscQLwmd8kptHZjP+kd295n/NrLnCqZ7iqoJGTuaKc/xLMMUlpiZD1QhKU5fpcp5m2NG3erZIX9lZjeq4V/EkAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> and <img width="18" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAbCAQAAABR545VAAABJElEQVR4nK2VDRGEIBCFt4IVrEAFKljBClSgghWsQAUrWMEK3LLInY68Yx19zNz4w3wsbx8e0VON1D9m7KBI2zuoiVHrO6iNUQ6/nimA4cmeZlrZXodRhqc4nhS5fHsYIy38LPD7Is/3vlW4FZS5PA/iTalj5btm/xzojJElsjs9X80tUPILTYuyybKcrc45CXWmE9S8L6eIAXIqRzLyb4aObZSHGU5GL3JldCkPwKlJlqhVCxUrTnV7K/4E8iq7o37hHLieVQJ7U9kpfxoTb9rdqyip7lSyedP07KiaU0kjjAgQzhQd4qkSzlRG3fjQoUwVVNCjkFPEkYia71PRP6eCbF39/4Kdct+DrBRyyt8F2YobPQNW6Zzy2GRL6yOdvqGN+ACxYKOQNBTaGgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" /> are “ports” available to the outside world. Even more, if we think about the underlying functor of the monoidal category <img width="104" alt="\otimes : \mathcal{C} \times \mathcal{C} \to \mathcal{C}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANAAAAAbCAQAAACngsmIAAADJUlEQVR4nO1ai3WDMAxkBa/ACqzACqzgFVjBK7ACK3gFVmCFrJDKgpDgr2yLNk17vOa9lsIdPlmSTZrmPdA1Q6Pg6P4IbwjvpgfQgpy1uR+H+nDe36IHIUDGvZnhU8LPgsL0B/P+Fj07OpCiIXIeaFHY9LG8zHrapgc/JXyKi2TdLBGbMHkJ28/zMuoRzQjZUGOxMocGh7nlG1n2JJYga2XmeRfeEAr0DHBSWbNGYGbk6ywEcNycmblcHsc/xcuoR0Gp8qe0lnEeTZ4upSfFcR85J5IhVM5LRZ7V2XoU+BkmGKNn6TAS3LiZQW662tn5+gkBAXS7jJcKndFsZOvp4fYiOE8kXri8dBt+iGRboSu6fLekPliNPfEZVMNLxegZ8hCy9aw4+H6L5D4sfbI/XxMpo8Mepbye+Syi2FPLS4MAHbRBz9Yjj8d2LZIvQ6ITN93WwWGo6pxvW0Sxh4OXBlMmUllm+79MPfPLI54tkqfhkIkIGbELDGNlWBS+WkSzh4eXhgWOdJrL1rOcfntaJK3biKpNiJZpn+lhEdUeLl4KBFoUn0XZetxh3yyy7TGoSRQDCos1y1RsFtHs4eSlYAubkVOPr/gL3E9wUTODFONA9Rlltoa3hcG+Fx3h4MnW03mGXWKEuh3d4vyFDj6DtigNr4s4efvsY8b96DBfgR572OWR422L6g0aKu6w4VF7Quuiq3hpMDsEsQRXpOfceYSb7q6qF1LR4jgQY+q1NaBZxMNLgyI2/Zl6xmBjfbZIVcWhRGG+NkPgyppSUezOjWIRBy8NPWk/rkCPOFKX27k9LRKEBBeLxnYvn24CUMSNRl9jnbaonpcKDfUnjSI9CqfcFNzrMpfNyfljNstjJmpvfyMr7DFIW1THS4WZP5R9hEI9S2Q31gyN37wztsgIr6S7o2md9rk2AOtKTDLhdU/KojpeKibyIqRIT3gv20CRyFVyhdxZ64qb84IwjCnyAKn2pYaXivjylEGPwPcR7iRt8RU4F8xL9RnuqPF7LN+H63nzvsFRqMe89J7ggm6nlHiT79om+QcJHb781liTRmLZ+8cF+AJpYBSzo1TSLQAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-2px;" />, there’s nothing in the definition of the optics that requires the first argument to be the same as the second. The private information <img width="19" alt="M" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAXCAQAAAAi0J4TAAABIUlEQVR4nJ2UYQHGEBCGr4IKKqigggqroIIKKqiwCiqswirsu2MzbHzj9Wvu3R2PA+ApC2saPTFwyWfbNgESFtjgwCE76Qzs6PCg0CW6hTFsQzrVdEhM13dk0ri+Fc2mEWdYToV0n+SAd9MZXD+trk83yYdfWnYRyvhOucpOJ6XRvr3GHW6W/T2qJCJHsN/Z6JBkkBytkX7gVYyfGxwkR3rbjsVtRs8QORK18lLE1Nlnw+RIdavQtYpaRsmR6Ga4LGKKyCC5GrfMVrqNk4vNsKeve57PkCs7z2SvxhS5/Px4sbUpcqQr3dVtUVPkSLFVdPGqTZK705UlBsj5qqoJZ8uKuY/kOB7DUVGiR0pXrj24uootcQ2Xzd/rEIXneNxn1A/pyZxTNnhXzwAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" /> can be of different type than <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAA5ElEQVR4nIVTURWEMAyrBSxgAQuzgAUszMIsYAELs3AWZgELXFa44/Fo2vSHtzbdkhaRNzapJIoko/6BCSVZDsSKrzsW+eCsIh8gKfldVnHaZPDJ/ebdfFVvmn3yhpLNzBz6dBc76T8o2W57gSkWmNYzi0cuRLHArAOeu6jkaas2DUZlOTpcJgZjShf5Xo8ZdzZdmRCn4vKIFVJydGuHrXhCw933uYPt0EIH+AefscQLwmd8kptHZjP+kd295n/NrLnCqZ7iqoJGTuaKc/xLMMUlpiZD1QhKU5fpcp5m2NG3erZIX9lZjeq4V/EkAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> and <img width="18" alt="B&39;" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAbCAQAAABR545VAAABJElEQVR4nK2VDRGEIBCFt4IVrEAFKljBClSgghWsQAUrWMEK3LLInY68Yx19zNz4w3wsbx8e0VON1D9m7KBI2zuoiVHrO6iNUQ6/nimA4cmeZlrZXodRhqc4nhS5fHsYIy38LPD7Is/3vlW4FZS5PA/iTalj5btm/xzojJElsjs9X80tUPILTYuyybKcrc45CXWmE9S8L6eIAXIqRzLyb4aObZSHGU5GL3JldCkPwKlJlqhVCxUrTnV7K/4E8iq7o37hHLieVQJ7U9kpfxoTb9rdqyip7lSyedP07KiaU0kjjAgQzhQd4qkSzlRG3fjQoUwVVNCjkFPEkYia71PRP6eCbF39/4Kdct+DrBRyyt8F2YobPQNW6Zzy2GRL6yOdvqGN+ACxYKOQNBTaGgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" /> which are available to the outside world.</p>
<p>This brings us to the world of <a href="http://nlab-pages.s3.us-east-2.amazonaws.com/nlab/show/actegory">actegories</a>. They have a slick definition. Let <img width="21" alt="\mathcal{M}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAaCAQAAABrsAZ9AAABYElEQVR4nJVVUZXEIAzEAhZqAQtYOAtYqAUs1EItrIVYwAIWuBBor5RwyaZv+9EOQzIzS435v5z5ERAjWlHRFANqymA+GlhC0qKkdIiMGmChSzPUZjIigwz0nVSGWhRJuX2g3TVDnX17RUUyqojyV1TWWgrkp9RBoFkq6tSQFpQ/ClpV3Q/E6WTC0APdK3xfYByODWiTVxpKilZf14NZzHHCu8FNK8rLpKkPncgGjhLwuesNVFIrUbqb6Fioejx6k+2k2nFRq8Cqegwagi5QcHexMaruL681acZh07DBqFigGD2rTE+YikMfcQhMmEb1upRmHPrZ958AjihHn1Wk82HbztWNMpGm6ARN9GECtHDXXGYmXFGOvh9MamX7IchRXqTMt8zdOwGrTlxSXqTMqg9ZEfGX2b+bxTers+oite9uy31980luFfrK/M4q9BdihJnaKB3nbJVFh8/lufll/QLdr8C3qPakrQAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" /> be a monoidal category, and <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAA0klEQVR4nL2TURXDIAxFY6EWsICFWsACFmoBC7VQC1ioBSzUAnvN2LqmCd1+9nLaD3JJAglEPXkKlGC+S0EOUKH6tmSjA5yVFvwjvpXxbBewwuk+8uz4bMGbcD3xaMEybQRc9JoL8EGsrlbsWbmB0Yq9O66xFwSRa6zcv92zPJ//tnsvJatGXcVuxVXubi7OCoyP3+LpD3j4DbeOGmTeyLh27wN3W7TPtSc2qXmVecyMbyJO7D2M2p7Z2CrOKM+comNDbZmSPrrHsSbMd4YlvQSiB9UGZ4gkQsCwAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> just a category. A <img width="21" alt="\mathcal{M}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAaCAQAAABrsAZ9AAABYElEQVR4nJVVUZXEIAzEAhZqAQtYOAtYqAUs1EItrIVYwAIWuBBor5RwyaZv+9EOQzIzS435v5z5ERAjWlHRFANqymA+GlhC0qKkdIiMGmChSzPUZjIigwz0nVSGWhRJuX2g3TVDnX17RUUyqojyV1TWWgrkp9RBoFkq6tSQFpQ/ClpV3Q/E6WTC0APdK3xfYByODWiTVxpKilZf14NZzHHCu8FNK8rLpKkPncgGjhLwuesNVFIrUbqb6Fioejx6k+2k2nFRq8Cqegwagi5QcHexMaruL681acZh07DBqFigGD2rTE+YikMfcQhMmEb1upRmHPrZ958AjihHn1Wk82HbztWNMpGm6ARN9GECtHDXXGYmXFGOvh9MamX7IchRXqTMt8zdOwGrTlxSXqTMqg9ZEfGX2b+bxTers+oite9uy31980luFfrK/M4q9BdihJnaKB3nbJVFh8/lufll/QLdr8C3qPakrQAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" />-actegory <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAA0klEQVR4nL2TURXDIAxFY6EWsICFWsACFmoBC7VQC1ioBSzUAnvN2LqmCd1+9nLaD3JJAglEPXkKlGC+S0EOUKH6tmSjA5yVFvwjvpXxbBewwuk+8uz4bMGbcD3xaMEybQRc9JoL8EGsrlbsWbmB0Yq9O66xFwSRa6zcv92zPJ//tnsvJatGXcVuxVXubi7OCoyP3+LpD3j4DbeOGmTeyLh27wN3W7TPtSc2qXmVecyMbyJO7D2M2p7Z2CrOKM+comNDbZmSPrrHsSbMd4YlvQSiB9UGZ4gkQsCwAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> is a strong monoidal functor <img width="104" alt="\bullet : \mathcal{M} \to [\mathcal{C}, \mathcal{C}]" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANAAAAAiCAQAAACE95/tAAAD7UlEQVR4nO1bgZGsIAy1BVqwBVugBVuwBVugBVuwBVugBVvYFvwQdb9IIIly683/+5y7mZvzHpCXhAT2quoLHLpatkf/86MiaKpW9PbnocFI/lHJd/wqjHvuzC/kUNuYDwtk3AQs++2umn5wLil4I6VRuzXMb29f3E9y5DgeFmidFg/NxeXfRVogBQ42uu+d+7KwFqkLURwPC7R6DCcx1NXLvdn9+IxipARqnDknN68dNaxlEHHTHI8KtG+EtNnV5ltP7UExGucwoRg1cy0yjkcF6iAqOIlr3KR8AphA3rTnZNa592YBL4/jUYEM5F86b/u3XqJyoiRigZQz4iuq6awofrgcjwpkoS6jIqODGFtgKy0FiSljgQYk6rUwfrgcjwq0QIGZ31s0bJr15RIWxyTYzM8CaYjns++PjjHdJ2GcPI6kQN50k3tGlq+pbBuHo4WU1YLp+8Q7Pk9bYJduwHn0iHlSOAs0FXAVPkdCIHNom3zYUdXTLAzwdQw/RZVJXj5Pz2DIvvChh3ICcY0cCtQUqCYlHOiqh0CeBcIxT3elxtpln4E/hi+t93FXh5HGaA7Gcdf0a9VZIHPBFeOx+RyIQG0kz0IS9u73srBv3qIMCX8aDpOjSwk5LCRPGqFAs7gZjSHhQASyqEClu/j+PcUO3YWGYET7A0W2AonoKDoKVKJYkXEgAuHylCxyPex74Bph76vzkaH8lIvGmkRTBcqOo0Btgb1QxhG9qZMClTRQE6RMe9phuigFcE656u1cQv7kd9ijQKaAQDKO6M36IwKZID5MkEK7KJ1pZlLQ4meEdeWN9csEqoKbieNDpQIJwgqqOSS5BuQJN2+uQFIMrFXFAkmuGGPIOBCBTEIgXlHKQXzxNm8j+NpujmqrLoiwUjBk87AiFijlKi0rLmQciEAKreNK+q+NjL02on7LxoxWIrGcodmSHwVaXQVrORS0AhzBZRzoumOJOPmfC41MTm0bPO7TJRLLGRO7Ko3LbCwxGkRw3CYyjoRjqsMt+cgwPt2nNG8Wi8ptMtVUPilcgRak7LBRnVBH6hDTpm3C5yBPs7lnTquUub58qtab9zFxTKncb1Kj7QKpYlE0CGrS81ncXswPm+lax4WdVi7JuOdzFLtuMKSH/02XciN31d6v3D1k2UG3p39xPs1uTv3WC1wnxgARhFuFy/HB+yD79hk5aki3nFTLheRyBLtR7d1s/GWMIQoNnXRbLsfHBFonVLKX+hTyn4uj/vZuc/D4J0t/P+4IZG53j1+BSNwR6P4B81cgEtcFMgWM+xWIxFWBdJGa8ysQiesClcBXIBL/+f8H/X7s/6kj/2BZ0VH/AOa90wU2M59DAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-5px;" />. Uncurrying <img width="10" alt="\bullet" height="7" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAQAAABOkSfeAAAAcUlEQVR4nGNgQAVKDB0Mu4FwFUMaAx7QwfAfCd5lMMaubCaKMhB8h01pKIYyiKkY4AxWhf8x3Ypd2X+gt1CAC06Fu9GDhUiFDEBnY1dYjj8MEVAJXaEgVn93YAYPNqVYlUGUdsDdugoYEgQBjjgmCgAAQ1CCXDwLo0oAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-0px;" /> we can represent actegories in a more familiar form, as a functor of type <img width="87" alt="\mathcal{M} \times \mathcal{C} \to \mathcal{C}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAAAaCAQAAACEXq8GAAADBElEQVR4nO1Z29mkIAy1BVqwBVqgBVugBVugBVuwBVugBVuwhVkM4ozIJRFk92Hj98/DP1wOJ8lJcLoubbwbMiOuo9vajk6Zp/W+YSOiUd2n0+jFZbc8hEW33mBbDTr3qGY7V0NjJ+CMNzsiA6fP5lOaPw0Y27m1GhrrB0yY991mRspCoBjj5gCL2e+7845xarBzVTTiIDdPGTs89r72cePEK/QeifEfQyMhGjHJPh9ueNv2w/gpJ82+6+s7V0ejQE3yCrKP2kil75kxA3szn1fTfyluC9FoqP+5iJQQ2x8Q9ZyJxHcsKypTIItE1biluKkQzQdajLSWCpDvHikfvkJ9bVftLTlXQH74kTKbFf3/PbcFXRgL0QyQ5gPQNkbG7KqjzXICKeP3AmDNUpuO3KVBqzcGCHsFjYLJLJHwu+qsAGaEUamkdxaiF0Mtb9KNMIMDQ1kxmvWYvEIChIB8KbHigfO5Ty+GWrtDi55AGSw9YlQRGn4SOkW8NP3Ear7s+Ws7enHUWhe3uShoELpX0YznZBlU3emisZrYiDl6sdRiC2YNY0BvKnqL0egzKvuA6o7e4vTbvaUXR60rqxhNr2HW5bEiXoyGXxRFe4oqb0nx5HYvCEVBFRynP+6Z9Cfm+BI0nesUros5EZA3CRAP0sRGR7zv9fGUHEeQnxkyMbZfIbnXisl/hIEDtVfBp5PrtDbW9/pmj0N5bV9iU6KzL0Zzf+lt3+v2QMZ6q6USeYVw9lvGcPSqpPuGqmqssnWgCI2+EWUvCTaR7xvT0sTvEDD0WveFOksGbWC9y4VAhEkBGhGYxo6iEPYpJU1CzVee3v4oMfdkVaScyduCeP1ERsPPyNPBgFfZ6onR3Fhfm6d3CTpXVqZWgPjljYhm6ezvQHPk1QUz38TC3ZHLstEb72tz9PKzoZqOMBgM5rWiIOw2Ibt1Ippvd0evgvLsC3PaOSXI4JnZ3OtXN3BnXUtdHQrQ6NMTdOuhm5hfv0Exc/TZRMgCv7S+YYLgLgIaOxTrt/+Gsj+kYAY57e4xRwAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" /> plus some equations. This looks similar to a monoidal category, and the extra level of generality will be needed to represent affine traversals.</p>
<p>An actegory is like a <a href="http://nlab-pages.s3.us-east-2.amazonaws.com/nlab/show/para+construction">parameterised map</a>. A <img width="21" alt="\mathcal{M}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAaCAQAAABrsAZ9AAABYElEQVR4nJVVUZXEIAzEAhZqAQtYOAtYqAUs1EItrIVYwAIWuBBor5RwyaZv+9EOQzIzS435v5z5ERAjWlHRFANqymA+GlhC0qKkdIiMGmChSzPUZjIigwz0nVSGWhRJuX2g3TVDnX17RUUyqojyV1TWWgrkp9RBoFkq6tSQFpQ/ClpV3Q/E6WTC0APdK3xfYByODWiTVxpKilZf14NZzHHCu8FNK8rLpKkPncgGjhLwuesNVFIrUbqb6Fioejx6k+2k2nFRq8Cqegwagi5QcHexMaruL681acZh07DBqFigGD2rTE+YikMfcQhMmEb1upRmHPrZ958AjihHn1Wk82HbztWNMpGm6ARN9GECtHDXXGYmXFGOvh9MamX7IchRXqTMt8zdOwGrTlxSXqTMqg9ZEfGX2b+bxTers+oite9uy31980luFfrK/M4q9BdihJnaKB3nbJVFh8/lufll/QLdr8C3qPakrQAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" />-actegory <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAA0klEQVR4nL2TURXDIAxFY6EWsICFWsACFmoBC7VQC1ioBSzUAnvN2LqmCd1+9nLaD3JJAglEPXkKlGC+S0EOUKH6tmSjA5yVFvwjvpXxbBewwuk+8uz4bMGbcD3xaMEybQRc9JoL8EGsrlbsWbmB0Yq9O66xFwSRa6zcv92zPJ//tnsvJatGXcVuxVXubi7OCoyP3+LpD3j4DbeOGmTeyLh27wN3W7TPtSc2qXmVecyMbyJO7D2M2p7Z2CrOKM+comNDbZmSPrrHsSbMd4YlvQSiB9UGZ4gkQsCwAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> is a map <img width="47" alt="\mathcal{C} \to \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAZCAQAAAAShlExAAABbElEQVR4nMWXa7WFIBCFqUAFKlDBClSwwq1ABStYgQpWsIIVPBvOY63jUWTjyN0s/SGz8GNkHiqVk1VOeQybtWqlYhoDo1mtn+Fb0EnQaEyuasS9xzUl89CO9AqNhUHAXt8yyXxoAnqRxqplM/U07+8kPBRFE423n6SH8XwXXVYUjcbjBfdvTf/kd5Jm2InjTtDvnBMomjjxu9MRi2yf1SoQYU/ShNuz+d8OzpEoGpui+N5KqgFfBkTS+CY5xQPfnJuxNHOjQjRhnB8disY06190ws97n6Rxyby7jFaiiL8geMVofDW8AchaNZbDgCRp6uFjRmbHmPrC47dVwbsqeFaxcuYODU3jsyHiBKPBZ45LJU2fzPcyq061Tqp4dUX9DUljXkH0+zm9aE8ZcN7PRdOE3QzQi6JHv5fUV5rGflLe8DpTDkvMot3OUPwnTNPYTcaOTZRUM/xUvjRdpNFYfMQOQ/pTl1dHOaOA5gFxhw29HdoI9AAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" /> parameterised by <img width="21" alt="\mathcal{M}" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAaCAQAAABrsAZ9AAABYElEQVR4nJVVUZXEIAzEAhZqAQtYOAtYqAUs1EItrIVYwAIWuBBor5RwyaZv+9EOQzIzS435v5z5ERAjWlHRFANqymA+GlhC0qKkdIiMGmChSzPUZjIigwz0nVSGWhRJuX2g3TVDnX17RUUyqojyV1TWWgrkp9RBoFkq6tSQFpQ/ClpV3Q/E6WTC0APdK3xfYByODWiTVxpKilZf14NZzHHCu8FNK8rLpKkPncgGjhLwuesNVFIrUbqb6Fioejx6k+2k2nFRq8Cqegwagi5QcHexMaruL681acZh07DBqFigGD2rTE+YikMfcQhMmEb1upRmHPrZ958AjihHn1Wk82HbztWNMpGm6ARN9GECtHDXXGYmXFGOvh9MamX7IchRXqTMt8zdOwGrTlxSXqTMqg9ZEfGX2b+bxTers+oite9uy31980luFfrK/M4q9BdihJnaKB3nbJVFh8/lufll/QLdr8C3qPakrQAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" />. And parameterised maps have a well-defined composition rule. A <img width="15" alt="P" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAAtUlEQVR4nGNgwASrGHZjhTMZyhmUsKhHAS5A2MHwHwhXgdkw2MHwDijWQUg7yACQZhc0UUGGM0DRmYQ0Q2zGBGlYDUUDu4FKduN0EQGn41IC0YzX4dh9DAIQ75Tj04zLxwzgAPuPP8Jo4GOiIgq7j12AWt/h9y0IdEBtRoYgjR2EEyfEx3dRtIYyGBPWBgFEBAouAPFxKHmaIT4WJE8zyMdnyNM68nwMcTTJmiHFCzIkmIoZGAAX0HButgDWEgAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-0px;" /> parameterised map <img width="53" alt="A \to B" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAAAZCAQAAABznnNzAAAB90lEQVR4nNVXW7XEIAzEAhZqoRawUAtroRawgAUsYKEWaqEW2BB6z7YsoaE3ex/Dz54+0klgklmleHgoy3zy32BQUYXfJqE8cKgvq0x/uABJLfIsOzEC9RmYROXg12s9gFsq+tgTbMJA8VNcu2CQyTv9VPZVaW4YDXVwfyaptFNb5fqIDGduGAuPWqI+Pw8PPHz1TuTrfkAt5ZN8Q4zi2Ij90Miwnu4bPKaST/IkRi2CuO+AUlQaOZEb1ey552BykyqASu/AEopS0CTY/XmB45eghZOagRq7Ux0QiCPmMFmW5u0hjTwdpKCBwp0S1Tqc3psHq0jDaTs3YU9hIeLQ+Y7Zk3qN3QkKveIoZsKfHg3iRmmB1XcEs6LsaTlgNXPjmOLsBvHxqzGtnt2qK2qERDde3ys/Zz/gKVJaG98FkJ7hwbMG6cSfffCKL7bqOqDu7ixe36JnlOIM3tQiTLEcw1OU71wvj0rlyZyeUTmptf26r3zGfMAouR4LSs6ohEvfV7aIr6uy4zcf8R6LTLvw6Zob1ZFkkzKd/q+lqIAHs6F3SxKX9RSB66h30Iqar6zs2Gjbkp7CXHTSd1CKsu2UNNpMaosN3uv4w9yE6yxPTdEDpLIiJ7J9hcPcKCvii7nC71gU+CN3UuVUe63k+uT+430bRmjHCTwBX3syZTHgqrwAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" /> and a <img width="15" alt="Q" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAfCAQAAABaZbWMAAABPklEQVR4nI1VCxXDIAzEAhZqAQtYqIVawAIWsICFWpgFLNQCu6TfjTRw761vI7mR3AVqjI7JeBNNwNN2Mn9gQSomM3ExyWz4TGPUgOT8k2zNB2tLf89VTLOopKIOBQ4pG54SZpDLe/cTiFUpTolSXxVCvSMjvsqhqJd1ZFQp4Dmg67mTBctWLG8q9SQ3iu/7av0SMmc1jSVeli268ZF73gaKtkxt1Hby8h9mubWxjpOsdRiwyXJrQnVBtmAsx3fJ+5nKcojIQSGro0sOpuvXjO/pIaBnI1+nYOawvagEd9AdIgqVkC+zbkXTQS292dtPM9l1l7tyr3Hs7ox88RUeBN9cg93b02LviB1pzwV/87RPNOodz6nzDzcGyad4JJs+gQKZpirykeiduQaF6ZVnYPBlc2M5qF2fZThWXfT5C3PqmJvLtmamAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-4px;" />-parameterised map <img width="54" alt="B \to C" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAAAZCAQAAAB+gAM0AAACFklEQVR4nNVYi5GEIAylBVqgBVugBVqwBVqgBVqwBVrYFmyBFrwQ9FxnCcEVd+8e44yjgnnk86JC/F9IocUonDBwtkPTEyYRiOFq0z6KUTzEAocHm7yY4ZDr9YmeNID5FqYt8Lh+GnmxAPe/CwNEIhBST9cs2CbBsgXOqtBI7JVCgKvzwfWfhQSPLHColzsj2BaLNh+QPBYL1wckzOzKbZAYM464+yBsPiDvSwkLhuM3INEjFK3sjEqGZUTCLxKJsdNvgFwznIZ+P8NSJKc74xULf3FuHYeB9ppbOxSfYY6M1hmLbB8EqLqtyFtNh2GC4jMsEOHmkXCvcm9hrdb6GvDN9ac1nyKlyrcV2n6lXqIatUCvqnoReiW2S7NZ1b133+GYrNng0SJz/XUL7uXz8BAM9gZhfmDHwCEiscsoZ9gAy8dO9XCHRGp1r6le2kn1FiMpAleQqMWq/rRUxAbQGiYaxFmtYXN+0NW2jRibq7SGZWIzM1+fHhMGGl2Y2oixoUppWMIdfaJnG6GhgZjmxYDu3k2fWD/ANQl+vflNCFwo1jIssN3aWejGftEzjdzIbzedYbZj+7shNH4n5IJPZeHQsgqVYe4GWslfrf636LOSlBuwmZX4Uv1RQGfGati7ofKnCpFDasckUfgzpwpTUZjUJV7u0wqoy3LJxhnjKXexFv+m/ZW/ZgfoN3rPATw04ZecrYfxDzY2La5AKzBSAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> can be plugged together to obtain a <img width="48" alt="P \otimes Q" height="15" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAfCAQAAACy5QCnAAACw0lEQVR4nM1YC7GrMBCNhVjAAhZiAQuxgIVYwAIWsIAFLGChdz/QAtlkd3htX0+mTAeS7NlvPs79PhoXXHI9PL1twOgmsQ0wSfNZrhd4IL4AHyQfQf4KPwODQBo/oI30f28JJnjA81voQd54IuzdDO+iZXAgBcLlLU7wACt8Hh48LlH14JGclwD2QI4oKiajIcdHe+w+0QLNFZ4SOpC/6DNO0G0S3rNntDDy4P4FxqetTeA5k+MJDYVquX/964YSTVagHkQdkE8XG2E6zgWbnsFhWjPRWDBuRlMKFA6tvjI2gQDZwY3JD0kNkVJ4m7rM9KVcylK1SvRqDWHT1fskhYO7nwEBRvminbGS49eaaJS81qi5XYFqIZFp6kV0IXKyCnEbGSrxaysRI/WqBJmcAYEWkVr0x6dyuQrxoPhUTOaBJGupPms5kDY7HBuST8oyPh5En1WIJ7/Foo1XQwB5YletQhPVgSP9zlQA54ugXYV4CTtfEN/q1BwvZEqYWeIwR06LVbjSRyziDLYMGLQaxNN0yjTSuNx2ntbjHLKVe0MJ9RRmVS8lLccLaIVp0fpSRZqzN4jesM8y9MEMkAVouI7i4JGKqjx/ef3fwXvRsU7jXgYwraPfykW1Lawl3rBNUXeidzMA0RcL51mFVJz/vFB28H84GDNQkVXq4d0M2Gky8srzUsFXArQjin77z3O0mwotfFHp/0sGIBIJG8QQ2VUYq/4dnwH8Kgk4G9JfdPocQPcVwCCYirslVEFW7tyHS+krdCaKi+sJ4wI+Kh5bLZnqBMqVPKnrLPfCwzxvDEN2tP/4vYgHcdLlR0OWtM4RSVkcEUGVY2lViuh7gIfKAURzzOLRHu+abFcBOY6rc/jKnQihpcPlOy7EXlsHTOW7ZviP4Cu2RNs4Sw79HJZnYVm/fLX5JuwV0rAO/CpaqkbiOvAH3Qtg0Jw/ygkAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-4px;" />-parameterised map <img width="53" alt="A \to C" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAAAZCAQAAABznnNzAAAB90lEQVR4nM1YDZXDIAzGAhawUAuxUAuzgAUsYAELWKiFWcBCL2S929oNEnbp7T7e3ttb25CP/H2rMTJcTBDe+TewBsinGb/dASMmnFlNVnbrfVzMgv4sJiKpaK74sdvvacRMJiP/ATOSKEjGPfzm0TdrJvTRjxhaaX0aFiOx4sc9XbngsRe8NslN1UB/npSlpGtVdr1W5MYCBjUQKfE5nABLkWg3K08xFMJRLXkiNdRbVHGLUq9VwUhFJaICRGr+vXc/WLEO5AiUXM+1dIeTZxJsIb2R0pxUGetUCsnuTl5Ry3Y6Vp2URycsfxshU5z6d4O0osIDjUpKfrY8LE0bCUBzb7cbt0VdUwSmSr4RNes57bpdPkEoLaQEOBS9GXnM0XzC+LVEqx8tR/sqHedxs3CKpqi0Sne+KPbdmu95t65knDvVsqnE0VWaM0ZGSlCbtUXAYUWRpjg+xa9EydW2KyMlSM/0YhM4RShFVtxMAlLAN/zXY0xfU9ySnJc2fSFbkfn0a/UjbVIg1H+R+YMqeNEQmrdoa4osFDaum/gTb2XqtG1dTQFsL73DU6xejekZPeqOb0sisyXgga5dxSKUQxw6oEC09p45evHSRX6YGseApsNUGXi90UR/5D5jpkmZ8Kk6CDx+6w2CDwHeiPmEkUn0T8z3U/cLvn8FkiBYYHEAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />, as animated below.</p>
<center>
<img src="../images/para_comp.gif" alt="Composition of parameterized maps" width="600" />
</center>
<p>Every symmetric monoidal category <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAA0klEQVR4nL2TURXDIAxFY6EWsICFWsACFmoBC7VQC1ioBSzUAnvN2LqmCd1+9nLaD3JJAglEPXkKlGC+S0EOUKH6tmSjA5yVFvwjvpXxbBewwuk+8uz4bMGbcD3xaMEybQRc9JoL8EGsrlbsWbmB0Yq9O66xFwSRa6zcv92zPJ//tnsvJatGXcVuxVXubi7OCoyP3+LpD3j4DbeOGmTeyLh27wN3W7TPtSc2qXmVecyMbyJO7D2M2p7Z2CrOKM+comNDbZmSPrrHsSbMd4YlvQSiB9UGZ4gkQsCwAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" /> is a <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAA0klEQVR4nL2TURXDIAxFY6EWsICFWsACFmoBC7VQC1ioBSzUAnvN2LqmCd1+9nLaD3JJAglEPXkKlGC+S0EOUKH6tmSjA5yVFvwjvpXxbBewwuk+8uz4bMGbcD3xaMEybQRc9JoL8EGsrlbsWbmB0Yq9O66xFwSRa6zcv92zPJ//tnsvJatGXcVuxVXubi7OCoyP3+LpD3j4DbeOGmTeyLh27wN3W7TPtSc2qXmVecyMbyJO7D2M2p7Z2CrOKM+comNDbZmSPrrHsSbMd4YlvQSiB9UGZ4gkQsCwAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />-actegory <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAA0klEQVR4nL2TURXDIAxFY6EWsICFWsACFmoBC7VQC1ioBSzUAnvN2LqmCd1+9nLaD3JJAglEPXkKlGC+S0EOUKH6tmSjA5yVFvwjvpXxbBewwuk+8uz4bMGbcD3xaMEybQRc9JoL8EGsrlbsWbmB0Yq9O66xFwSRa6zcv92zPJ//tnsvJatGXcVuxVXubi7OCoyP3+LpD3j4DbeOGmTeyLh27wN3W7TPtSc2qXmVecyMbyJO7D2M2p7Z2CrOKM+comNDbZmSPrrHsSbMd4YlvQSiB9UGZ4gkQsCwAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />, which means we have a clear way of composing lenses and prisms – as actegories! Let me spell it out.</p>
<p>A cartesian monoidal category is a <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAA0klEQVR4nL2TURXDIAxFY6EWsICFWsACFmoBC7VQC1ioBSzUAnvN2LqmCd1+9nLaD3JJAglEPXkKlGC+S0EOUKH6tmSjA5yVFvwjvpXxbBewwuk+8uz4bMGbcD3xaMEybQRc9JoL8EGsrlbsWbmB0Yq9O66xFwSRa6zcv92zPJ//tnsvJatGXcVuxVXubi7OCoyP3+LpD3j4DbeOGmTeyLh27wN3W7TPtSc2qXmVecyMbyJO7D2M2p7Z2CrOKM+comNDbZmSPrrHsSbMd4YlvQSiB9UGZ4gkQsCwAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />-parameterised map <img width="47" alt="\mathcal{C} \to \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAZCAQAAAAShlExAAABbElEQVR4nMWXa7WFIBCFqUAFKlDBClSwwq1ABStYgQpWsIIVPBvOY63jUWTjyN0s/SGz8GNkHiqVk1VOeQybtWqlYhoDo1mtn+Fb0EnQaEyuasS9xzUl89CO9AqNhUHAXt8yyXxoAnqRxqplM/U07+8kPBRFE423n6SH8XwXXVYUjcbjBfdvTf/kd5Jm2InjTtDvnBMomjjxu9MRi2yf1SoQYU/ShNuz+d8OzpEoGpui+N5KqgFfBkTS+CY5xQPfnJuxNHOjQjRhnB8disY06190ws97n6Rxyby7jFaiiL8geMVofDW8AchaNZbDgCRp6uFjRmbHmPrC47dVwbsqeFaxcuYODU3jsyHiBKPBZ45LJU2fzPcyq061Tqp4dUX9DUljXkH0+zm9aE8ZcN7PRdOE3QzQi6JHv5fUV5rGflLe8DpTDkvMot3OUPwnTNPYTcaOTZRUM/xUvjRdpNFYfMQOQ/pTl1dHOaOA5gFxhw29HdoI9AAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" />. A cocartesian monoidal category is a <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAA0klEQVR4nL2TURXDIAxFY6EWsICFWsACFmoBC7VQC1ioBSzUAnvN2LqmCd1+9nLaD3JJAglEPXkKlGC+S0EOUKH6tmSjA5yVFvwjvpXxbBewwuk+8uz4bMGbcD3xaMEybQRc9JoL8EGsrlbsWbmB0Yq9O66xFwSRa6zcv92zPJ//tnsvJatGXcVuxVXubi7OCoyP3+LpD3j4DbeOGmTeyLh27wN3W7TPtSc2qXmVecyMbyJO7D2M2p7Z2CrOKM+comNDbZmSPrrHsSbMd4YlvQSiB9UGZ4gkQsCwAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />-parameterised map <img width="47" alt="\mathcal{C} \to \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAZCAQAAAAShlExAAABbElEQVR4nMWXa7WFIBCFqUAFKlDBClSwwq1ABStYgQpWsIIVPBvOY63jUWTjyN0s/SGz8GNkHiqVk1VOeQybtWqlYhoDo1mtn+Fb0EnQaEyuasS9xzUl89CO9AqNhUHAXt8yyXxoAnqRxqplM/U07+8kPBRFE423n6SH8XwXXVYUjcbjBfdvTf/kd5Jm2InjTtDvnBMomjjxu9MRi2yf1SoQYU/ShNuz+d8OzpEoGpui+N5KqgFfBkTS+CY5xQPfnJuxNHOjQjRhnB8disY06190ws97n6Rxyby7jFaiiL8geMVofDW8AchaNZbDgCRp6uFjRmbHmPrC47dVwbsqeFaxcuYODU3jsyHiBKPBZ45LJU2fzPcyq061Tqp4dUX9DUljXkH0+zm9aE8ZcN7PRdOE3QzQi6JHv5fUV5rGflLe8DpTDkvMot3OUPwnTNPYTcaOTZRUM/xUvjRdpNFYfMQOQ/pTl1dHOaOA5gFxhw29HdoI9AAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" />. Composing them as parameterised maps, we obtain a <img width="41" alt="\mathcal{C} \times \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAAAZCAQAAADneNqBAAABbUlEQVR4nL2XYdmEIBCEqWAFK1DhKlDBCleBClawAhWsYIWr4K2g9/mh4oyg63P+kDnnXY5dOKVSoZVRVi6dVJUP2LcW0aDG32WfoON8KxkcVSf3Rj69l7sHEClfLQInWS1Re3l7OyTlq9UnGgry5k5C1ncSx9PciHi4i+6KbyWPP3L/H/3tc0n6tjuV9YLm8pWEOGsrlO80sM2pk5fEz7YRr6s1ZC+jqSB9XUZ33BbAGjI9m5Sv9nV1fbfZA0UgSV+bXc8xKAJJ+w4FWvgaFIMkfetC+/YCikKSvsbLU20FjQCKQdK+thhmaDBoUZC+5TDDz33cR7N8g9xchltiWZNHfTTT1yaXsgHzXRcOBkr6Nl6+178qv0sgKy2ubgSU9K3nI/17I7fg+WivBZ2D0r7Oy2OjJgMSAyV9pxeO87E+rAgjrxjAxnLcJ89Aad+/L4xzhhY4woVoE+nok/mkfStZI53k4vx/u+cC8P0CMyMG1TZ68U8AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />-parameterised map <img width="47" alt="\mathcal{C} \to \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAZCAQAAAAShlExAAABbElEQVR4nMWXa7WFIBCFqUAFKlDBClSwwq1ABStYgQpWsIIVPBvOY63jUWTjyN0s/SGz8GNkHiqVk1VOeQybtWqlYhoDo1mtn+Fb0EnQaEyuasS9xzUl89CO9AqNhUHAXt8yyXxoAnqRxqplM/U07+8kPBRFE423n6SH8XwXXVYUjcbjBfdvTf/kd5Jm2InjTtDvnBMomjjxu9MRi2yf1SoQYU/ShNuz+d8OzpEoGpui+N5KqgFfBkTS+CY5xQPfnJuxNHOjQjRhnB8disY06190ws97n6Rxyby7jFaiiL8geMVofDW8AchaNZbDgCRp6uFjRmbHmPrC47dVwbsqeFaxcuYODU3jsyHiBKPBZ45LJU2fzPcyq061Tqp4dUX9DUljXkH0+zm9aE8ZcN7PRdOE3QzQi6JHv5fUV5rGflLe8DpTDkvMot3OUPwnTNPYTcaOTZRUM/xUvjRdpNFYfMQOQ/pTl1dHOaOA5gFxhw29HdoI9AAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" />. This is a <img width="41" alt="\mathcal{C} \times \mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAAAZCAQAAADneNqBAAABbUlEQVR4nL2XYdmEIBCEqWAFK1DhKlDBCleBClawAhWsYIWr4K2g9/mh4oyg63P+kDnnXY5dOKVSoZVRVi6dVJUP2LcW0aDG32WfoON8KxkcVSf3Rj69l7sHEClfLQInWS1Re3l7OyTlq9UnGgry5k5C1ncSx9PciHi4i+6KbyWPP3L/H/3tc0n6tjuV9YLm8pWEOGsrlO80sM2pk5fEz7YRr6s1ZC+jqSB9XUZ33BbAGjI9m5Sv9nV1fbfZA0UgSV+bXc8xKAJJ+w4FWvgaFIMkfetC+/YCikKSvsbLU20FjQCKQdK+thhmaDBoUZC+5TDDz33cR7N8g9xchltiWZNHfTTT1yaXsgHzXRcOBkr6Nl6+178qv0sgKy2ubgSU9K3nI/17I7fg+WivBZ2D0r7Oy2OjJgMSAyV9pxeO87E+rAgjrxjAxnLcJ89Aad+/L4xzhhY4woVoE+nok/mkfStZI53k4vx/u+cC8P0CMyMG1TZ68U8AAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />-actegory <img width="11" alt="\mathcal{C}" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAQAAABwKX1bAAAA0klEQVR4nL2TURXDIAxFY6EWsICFWsACFmoBC7VQC1ioBSzUAnvN2LqmCd1+9nLaD3JJAglEPXkKlGC+S0EOUKH6tmSjA5yVFvwjvpXxbBewwuk+8uz4bMGbcD3xaMEybQRc9JoL8EGsrlbsWbmB0Yq9O66xFwSRa6zcv92zPJ//tnsvJatGXcVuxVXubi7OCoyP3+LpD3j4DbeOGmTeyLh27wN3W7TPtSc2qXmVecyMbyJO7D2M2p7Z2CrOKM+comNDbZmSPrrHsSbMd4YlvQSiB9UGZ4gkQsCwAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-1px;" />, i.e. a strong monoidal functor <img width="141" alt="AF : \mathcal{C} \times \mathcal{C} \to [\mathcal{C}, \mathcal{C}]" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARoAAAAiCAQAAAAq5N5FAAAEjElEQVR4nO2cfbWzMAzGsYAFLGABC7MwC7NQC1jAAhawMAuzsLct9A7apnlKsw/Oy8Mf95zBkhR+hDRlt6pOHUdd9Vy27gher5V6T0S71VYXHZPSf/8Pv0advXBmq8ljJOLb2qgXn5nQNPoLI7l30PvS26VgALFoVHX/o//5MZy/5fclc+FoScSXspEJzai/MJF7DYW9dTEtTLpNaaBkT2+tbT21VWVz32St0zjL6Vt+t6KhkYiPs5EFzWWhjj8mllGu+vMr7iypVg9l1HeDU2O99kLWf8+vLwoaifh4GxnQ1NpYz0Kj7BHxJ+1DqGxrtaXtiZgHJoXkr/kNFYdGIj7ERgY0qrotSKRKqynxAFvzu19mWH7CNVnsLmD7F/3GFINGIj7MBgxNY1G4MROuOlm5SDz7az2AR5DJprff79/yG1cIjUR8qA0YmsEe2JEVyyy6ojGSgKaPQNkB91NqmDUwLd3rF1UefCE0EvGhNkBoOg2NM5GaA4UVzXX1SCqfOxn/4b0w6OHS/YpZ/pP6JVOrPd7mF9WYVa760EjEh9sAoZmWS59+/MQqGjy71MlWlbO2d9oeFnjOq0GGyzT7/aK6RS4YLR8aifhwGxA0amUsNYULkWoyoLmzybRly/D0t0NsMGTK/GKqdRz4Zd9CIxFfjg0AmmaTOx6JZpFf0Zhv4ieC7wGpwhrCxwZDptwvJqVjQWeXW2gk4suxAUAzbA4ZE9CopXc4bw9mpuXrpoNOI3YvbqStsUGRkfCLadIb9ojaQiMRX44N9qq6EthpTOSDuaJ5LR4MTObIU8PUU5gcNjgyMn4R1RYbJNusoZGIL88GC40/CEVCE1Y0neiqzCUzc1GasUGRkfOLaEb5xh63hkYivjwbzJHKdgjX27zyGbsbwh5NJ3p/KrGL12UVjvv9NssjOn/jgF5DI3Fe8mwkj2yC1Wq3ih37UtijkX3XRAqa+W6m+zaSfv2zx2+DrQo5bz8MzRDZ2ZHmU6tOElJBJtsjV8tQfZt3+cVkbkn+4RSDpiy+PBsJaPwS2H0aL5m4tl+5VNLDBbpP1uUvio2EX0wKrrNCaMriy7ORgIaq4+Pm06tOErpaD7FeQm3ndPzp9mdMGDblfjEZEND1pzU0EvHl2SChUSR38Z5w6j0aVOl7olmKxDB9K+h0xybZCDalflGN0cweVzjlRuOLn+M8GwQ0bUV3WOI94fKKhrcwRmcW2BuBVF8GwabELyqDAf620ba5h8dHn+OcMUagqe3iGZXWOrvv7uWUudIpg+bJ5qr2bwrbL2FfbBMAScB0X4bHpsQvqj6rp+WvPaHxPckiImeMATRj9eoW+OlyWO1zyezmfbZ/6UwBhXTrdT7MIh/2SOwTUbVsrtnvFxXS0nvJX+VG4+vtrR0/y/gYP/trKwGZPDj/VEZ99J25d/vlXwvZHh2+uYfGR7dcURuHg+aUUfp3T9x3S6E/oTmkSqBRxa/3n9AcUiXQ4BN7Sic0h9R+aJTABT+hOaT2QtOJvEx2QnNI7YdGQic0h9TB/j/NqV+Q+08xed0dca//ABjRZfhTYYfRAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-5px;" />.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> Fixing some parameters <img width="101" alt="(C, D) : \mathcal{C} \times \mathcal{C}" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMoAAAAiCAQAAAC0e47MAAAEE0lEQVR4nOVai7WjIBC1BVqgBVqgBVugBVugBVuwBVuwBVtICy4f3SQ6MwwI72Wz1/POeScmXJjLfPh0HQzdjcib34DoJvf3n8N0S8IIwslmOtv1b9/TzXqkurm5LMqNxrpHNeYp4lXdShrAS7a5v9E1NLrvjvu3jZvPfEzOzNAzId3zrK0gHefqxnQ8thlTIa9wX+vRZnr39uF+LF8+G4JfKdfokNEh7R4bujKF/4/HBsnnN4aIqYmxROiFb9vs3J69PbJ4LfrKR3bfzNVcxv3m4d7lOr4OXbkGvcF9+ri0JsHv3oNy5nidADL0qH0+zeLFBy6CmthcXYIZcxE9BXtzDVdj5RCmXJ/fDRGNY6qy3ObFhi2CJ+DhYwg+lIuZcNkV6KSqajBvmjO7cQxrNYYqvBLJC2KP8zh0ZkaJoJLbCPrKUi3ei5AdzwXN0txPsnn9fL9mjBhMHuCbA7JiRnlyXkObRXqYjxGYEJrlJ1ReE0krZPPO4CvNKBNl1YziYUDJyjzyCh2m2Xm+Tn/LewrnfPCEjyi0HbJ5BZL/Z7ChM1ndjHJIdp2VnNzll7Z0f+cbq5Frmj5YF6BmvMmrwR/oZkUi7X+YKAsjwKyJMKRC2+Urd0gWjiQFvANohDE0hC8nS0FnlDinNmC+z0TIO7CRgTEKfq/GOsvCkaSI14JGeiQGWAo6o0ReKD7DvXzH4IZOBYm1gu+/ysKTpIh3AlxLNtt2oDMKvsLliEJDVtrfOmThSlLECwUGTuVVBrrdAQ2a90XpE4GTjygLT5JC3nJR8lcOqYyCp2p7e3mHlRAl0Bmpu4i3XJT88EZnFE3sBNnbZUc9UWLgwtctFXhnoNpRDFFKTinpjEK9vR++bKV68sgl2LqlCi9efdGiQGcfKVBSD+SmTi1RMPae2fpreufJUsQLDxfeGHzCFJQBVEZRISDgUXq6vfsVN3CgjCWCj3IyxLni4shSxNuD+0qSjIQK3PRIzTU8o6Qk4S0e6R7IfXF5HSu3iICK4LQsRbwSca4h+Aq0l9SD1xmWhG/hOSMebdEz9XoWcUWqB3G34GxWc0MSj7QsRbwrMmDIWDJcnICwJRIaVNHpcIXgwSi+Oaum2AN8S1Lt+xR+eRp9qg875LzSFl+XpGQp4h3RofRh5TA5r/GXG4ZwFwULETELQaYz3YY8q2uRM0sNK+bbpHRP82z77LXsK0wj0QOV8JUC3p6c4co14MUYnSipVKsbXdMZqx3Win1qzeE+yc+hgHettEmvmwxUgGny62HIWMyHrXRo+w6TPGz7UsDZIBf555Ac0BvyXwyduCLBgW1yq3hoeHH144HfkeShzY19yS5ZvxTYCoSHFl7iF2z1j6T/MYw/Wiam8Wn9+SV8UqgQTWq5j8UfalRxmvumPCoAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-5px;" />, what does the resulting functor <img width="131" alt="AF(C, D) : \mathcal{C} \to \mathcal{C}" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQcAAAAiCAQAAAD4tNQdAAAFNElEQVR4nO1bYdXrIAydBSxgoRawUAu1UAtYqAUs1EItzMIs7EHo3lpIAhTY973zdnv2Z23hLoRwE9jt9nNQt+UHe48hbsZ+vsjAdNPNW9ySxhfWZVzP4+lJ1ZjJG8Nt7ewQg/0t2l5D115ycZGNvD2toWgYe5e/xojIPWF45y5P+1ks3cU+vezPT7a3fFDMDGEE12sfSNvj3f6i19V6en2QzQoDQ0NB4H/CU+p0aWv4uDthqYQOcsRo7z/sO/Lw3QzRZLBtzQXMPQfHwAS8NnBxGb1hOgyUAA6u5WnvmZ9efVHJZtw9KOcpbJAn+/10+kYz3QtwIIMM1GTfeth7pYFWAbN4iZntt4+oNYk+W4PBmvzoeBL4/JRuqmQjIGCn3cHPQXwBeJwMzBlcgLdS83ODASyFJtlrNOotTReMwTI+G9sPwEQ83xfVbLSdRd6g/KzcmAXlHJRpcwuY/XSwniFulGJlguEdMcXQcLCc+cO+XbS8N2r/w2wkDN1MhNs3BCtIjhQkufqLfT2noQqVgwfHbEGdeGu0sgvQQGHE3H4oNjRgY8AJFKkLXqCVg8PRuM61Yl3goGEpwO95yIbK4d1nvJBokmMZFsQRVdPYUOJY1WzUHppVMhmJlcN0MOjxzZXoPt2Hc4eWysFhQp3lWhQKocC9w9lo/qbMLbBmi8AGbLZ9SPmlwD8ZBl083ApSxa4o3TNUY+XwcpY4dqQ1iiuR8WzXD1QX5qTNmrHRh9f5ZCR2F0kMgSJIqW7JF+/IlDtsyRB6T4TZIUN+10NAfSaNajbyNNsf7BwLlYN7Fyc5E+v4klQn18ArBz9nsPR4TSbWqVqM/lD+oBN6qxEbczJiTsh9FYAfzBBo4s4jo7JxBbxy8P1ieoTi+cZszcvNy/vHSk1bxu5PJZtwlV5Zs3rl8C4BG/JZg4YseetVtuXdmK7Ipd2Bh8wQxq0gwCFSGVkVm7B5bpbFykGRQ4AH4Zys4hr4dmdyiap1hzFZqWkJ5xAPJheqZKOhenW8/O4X7oFxzUExBanr7lBeCUgpB1oO6qKMHn//6gDIfeksv+IdmHo2IARVcC0JPXCWY/QOeo07lC8mvHLwveKDriuFbdUARNZPXwYWRb7YdpGNQV7k5hm3WxFiRXX8kOEOV85O8cqBu1u7WOhOmRION1m5slkFG7zUQ8/fdIkqJEZlFnwb2NmEFDhmfnubarONO1B9j01VhSYXiQZsKI1KNcjvVmDEqLoDF2GuHM7jIprb2+OMaEillAdf/MZ0iYCo1K48pTJUzmU2mjQ7l5JR5xxijERYk+zqNhARiwetHFLOkFOG4vuXu7iLf2utSA2xZhTuL7IZGCNQdckS5eCJ0fVKvJwyogda0/1S2sAfeuHnZ3wuoLT/FdX68cmwOqjMKFbMRsB2CBU4FNyLj7v6gFxyeujOyrdwmCQcncXwTCxSmNpRcGA0XeWnnTbsn46Kw990cdnjyAgJe9tdjCUz3ypksx6y1zD4mFNu+wo5c/Bt7hbJwhhxhEqAsW275GmGc9BUSPZqAxu0CWH23FdPkzU3p4zfopMuMwT1A+eGrY/tc8Wnz7O5gDEhPAc4fe328edkGKTLXXVYGm0+id2lVzi13AOpTfbPsrmEe7OtHdXlZwlC7n7RBVNBJsJDNznCFmLKPlLyRRNQpyFKUX42Kgf8xvUXzaGyjmykoLvsGM7d/pb3BQnuf1h56PP/b9k8FfwiC1Q9IRc9IoM7N/CpbacvAiy/Kd0B/D5G/xV+V1gWXfKUfwp/AGvuR8Hbt3FLAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-5px;" /> do? It takes some object <img width="15" alt="B" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAQAAAC2NjfhAAAA5ElEQVR4nIVTURWEMAyrBSxgAQuzgAUszMIsYAELs3AWZgELXFa44/Fo2vSHtzbdkhaRNzapJIoko/6BCSVZDsSKrzsW+eCsIh8gKfldVnHaZPDJ/ebdfFVvmn3yhpLNzBz6dBc76T8o2W57gSkWmNYzi0cuRLHArAOeu6jkaas2DUZlOTpcJgZjShf5Xo8ZdzZdmRCn4vKIFVJydGuHrXhCw933uYPt0EIH+AefscQLwmd8kptHZjP+kd295n/NrLnCqZ7iqoJGTuaKc/xLMMUlpiZD1QhKU5fpcp5m2NG3erZIX9lZjeq4V/EkAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> to <img width="82" alt="C + D \times B" height="13" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKQAAAAbCAQAAABYIOxqAAADAElEQVR4nO1Z0a2DMAzMCqzACqyQFViBFViBFViBFVihK7ACK/CcBFR4zTm2ee3HUy+qVJUmcS722STO8aicd50bXEvfnvCFXl9c0LmH2+gzEpGjW+hT7b9Pb597cnO2TWRL8/bZy3bMZIfInVoibqU/16ffeiK1omVs9O3d8NQGmmmjpfhTG+Lmzhe73omG5uyjHePFjm63g93UiowPC3g1tqOuKz37jE/4uIDXfQ8LWz/ol8mO1/lm+nW5SN4FVeR6AE8fcRFy3PGc5JHoyePGyDr0YM1NtA9EZxU9DtGYBtUo5HojMc0xePJY6FlnHlmHCa55QxZWe+RjeKVC5kJT3hdv6fhBn1zBmqtdwzMYohNz4VgrFdJOJFLIBBz2z/4YlWINSCFDxtjyceFZH0ioVQp5h0ieqo6lOWAlr80jxJ18FQPMCguKijl2gVkowitrSDuRnEIeNHNjN4DKRKPcI2cQviOqHfxeLf0t7ETy0VEmMk+llkaXzcxHgZh1ujF2aRVTyMywEckrZPKTrRA9r1TqafQ7kc9SvN3f8qBta1G+LbASWUomq7CePVOpp/FQyOHSRtrGHm1ijWuiW7ASyStkrZChg0oLjUghw5hrvo6VZGwLrETy1vQqGUpUWmjMK2RAh4oiGZF8hZnEQdJK7yQlhVziW64cuBa09wPFuIxIPvR9pl2F+milJMErpBdtxhMpqHFdyduBlHjLb2YjINIbTLGFNq+Q/NPfOLQR1ZUlO1DdDHMKf1iRhtWf5diI5Da1L77GnnFOMXoq8elOi20sHQN0plRkIZJTyJQvpWr3O1PrqOQUcsbbWbMC3xivFyxEYoW8R+MxgpRKrJA9r9J99MlcImhpB0oJIg8LkUgD03HuHRoD5FQihRzKyS5nah0vv6zQE5mrH8JdTbpDkgPXjTIqc3bURF8qvYqrauMfp71o6eMt2p3LVw2RHaw7F7JDex4+Mr7bsES2TAUc3rLF5xEN7UMgcCQi797W3Tkh/+KEL5F/BHhK8t/wA4M04pL7CHvvAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-2px;" />. If we unpack the definition of optics for this actegory, we recover the affine traversal defined <a href="https://arxiv.org/abs/2001.07488">Profunctor Optics: A Categorical Update</a>(Sec. 3.2.1).</p>
<p>This seems pretty neat, but what does an affine traversal <em>actually do</em>? Lenses compute an internal state <em>and</em> interact with the environment. Prisms compute an internal state <em>or</em> interact with the environment. Can we interpret an affine traversal in a similar way? The answer is yes. The first thing we have to note is that unlike lenses and prisms, the affine traversal is parameterised by a <em>pair</em> of private objects <img width="101" alt="(C, D) : \mathcal{C} \times \mathcal{C}" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMoAAAAiCAQAAAC0e47MAAAEE0lEQVR4nOVai7WjIBC1BVqgBVqgBVugBVugBVuwBVuwBVtICy4f3SQ6MwwI72Wz1/POeScmXJjLfPh0HQzdjcib34DoJvf3n8N0S8IIwslmOtv1b9/TzXqkurm5LMqNxrpHNeYp4lXdShrAS7a5v9E1NLrvjvu3jZvPfEzOzNAzId3zrK0gHefqxnQ8thlTIa9wX+vRZnr39uF+LF8+G4JfKdfokNEh7R4bujKF/4/HBsnnN4aIqYmxROiFb9vs3J69PbJ4LfrKR3bfzNVcxv3m4d7lOr4OXbkGvcF9+ri0JsHv3oNy5nidADL0qH0+zeLFBy6CmthcXYIZcxE9BXtzDVdj5RCmXJ/fDRGNY6qy3ObFhi2CJ+DhYwg+lIuZcNkV6KSqajBvmjO7cQxrNYYqvBLJC2KP8zh0ZkaJoJLbCPrKUi3ei5AdzwXN0txPsnn9fL9mjBhMHuCbA7JiRnlyXkObRXqYjxGYEJrlJ1ReE0krZPPO4CvNKBNl1YziYUDJyjzyCh2m2Xm+Tn/LewrnfPCEjyi0HbJ5BZL/Z7ChM1ndjHJIdp2VnNzll7Z0f+cbq5Frmj5YF6BmvMmrwR/oZkUi7X+YKAsjwKyJMKRC2+Urd0gWjiQFvANohDE0hC8nS0FnlDinNmC+z0TIO7CRgTEKfq/GOsvCkaSI14JGeiQGWAo6o0ReKD7DvXzH4IZOBYm1gu+/ysKTpIh3AlxLNtt2oDMKvsLliEJDVtrfOmThSlLECwUGTuVVBrrdAQ2a90XpE4GTjygLT5JC3nJR8lcOqYyCp2p7e3mHlRAl0Bmpu4i3XJT88EZnFE3sBNnbZUc9UWLgwtctFXhnoNpRDFFKTinpjEK9vR++bKV68sgl2LqlCi9efdGiQGcfKVBSD+SmTi1RMPae2fpreufJUsQLDxfeGHzCFJQBVEZRISDgUXq6vfsVN3CgjCWCj3IyxLni4shSxNuD+0qSjIQK3PRIzTU8o6Qk4S0e6R7IfXF5HSu3iICK4LQsRbwSca4h+Aq0l9SD1xmWhG/hOSMebdEz9XoWcUWqB3G34GxWc0MSj7QsRbwrMmDIWDJcnICwJRIaVNHpcIXgwSi+Oaum2AN8S1Lt+xR+eRp9qg875LzSFl+XpGQp4h3RofRh5TA5r/GXG4ZwFwULETELQaYz3YY8q2uRM0sNK+bbpHRP82z77LXsK0wj0QOV8JUC3p6c4co14MUYnSipVKsbXdMZqx3Win1qzeE+yc+hgHettEmvmwxUgGny62HIWMyHrXRo+w6TPGz7UsDZIBf555Ac0BvyXwyduCLBgW1yq3hoeHH144HfkeShzY19yS5ZvxTYCoSHFl7iF2z1j6T/MYw/Wiam8Wn9+SV8UqgQTWq5j8UfalRxmvumPCoAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-5px;" />. This means that we’ll have a prism-like internal state <img width="15" alt="C" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAZCAQAAACMPFaRAAAA+klEQVR4nKWUCxHDIAyGYwELWMACFrBQC1ioBSxgoRZqYRaw0P0J27pHk3Ldf0evB3x5QAiRLUeRJpop4W9XPKGgiVbaMArgQjcM95ivNpiwuQHyb3MZhhwFGMxWqBUb6gf4jGWByQ0GVJSDnZVVXms62gyUQ9+0jLvXRUX5nNWMZwnqN9ddXsuYrVohd1jJeBG/7njx5eAw4+63mKiqInC6BjeBL8kLal2SoZGT/hNWKmAMVtIKA3DUL9J+EN2vWrhFuoauyTLdL0vrTuGs9WTxfVTbCSHbNU/9Sa5fT85LAxwSNz7uFRkJRHwrfA402l0BnhgqgK3GQHeow2EXydT79gAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" /> and a lens-like internal state <img width="16" alt="D" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAXCAQAAADADIVqAAAAz0lEQVR4nI1UURWAMAikghWsYIVVsIIVrLAKVliFVbDCKlhBGTy/Ng6OHx+Mg50MohGF6tQKZdom5wcktkwvW5Hv3zLd7Ku0xkg6QRr8J3ufSB/agRW5fYIqzc7ROHZ4BL1+NmKX34OlgMK+XvDIAekFSIGfHhIgBQIEWAHt76XFJvBEemSYALACq9BfiAArcEp8t9M9BfocNlQfK6D0cJCxAjgqQAroY4b7ACmwcbK7C2wFQun2HXWNuOlpokDfhY1r25Mh0Cc6s8arFfy2D/09h0a0r/LWAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" />. Looking at the coend below</p>
<center>
<img width="318" alt="\int^{C, D} \mathcal{C}(A, C + D \times B) \times \mathcal{C}(C + D \times B&39;, A&39;)" height="40" src="data:image/png;base64,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" class="display-math" style="margin:0; vertical-align:-15px;" />
</center>
<p>we can see that an affine traversal can do either one, but not both of these things:</p>
<ol type="1">
<li>Compute an internal state <img width="15" alt="C" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAZCAQAAACMPFaRAAAA+klEQVR4nKWUCxHDIAyGYwELWMACFrBQC1ioBSxgoRZqYRaw0P0J27pHk3Ldf0evB3x5QAiRLUeRJpop4W9XPKGgiVbaMArgQjcM95ivNpiwuQHyb3MZhhwFGMxWqBUb6gf4jGWByQ0GVJSDnZVVXms62gyUQ9+0jLvXRUX5nNWMZwnqN9ddXsuYrVohd1jJeBG/7njx5eAw4+63mKiqInC6BjeBL8kLal2SoZGT/hNWKmAMVtIKA3DUL9J+EN2vWrhFuoauyTLdL0vrTuGs9WTxfVTbCSHbNU/9Sa5fT85LAxwSNz7uFRkJRHwrfA402l0BnhgqgK3GQHeow2EXydT79gAAAABJRU5ErkJggg==" class="display-math" style="margin:0; vertical-align:-1px;" /></li>
<li>Compute an internal state <img width="16" alt="D" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAXCAQAAADADIVqAAAAz0lEQVR4nI1UURWAMAikghWsYIVVsIIVrLAKVliFVbDCKlhBGTy/Ng6OHx+Mg50MohGF6tQKZdom5wcktkwvW5Hv3zLd7Ku0xkg6QRr8J3ufSB/agRW5fYIqzc7ROHZ4BL1+NmKX34OlgMK+XvDIAekFSIGfHhIgBQIEWAHt76XFJvBEemSYALACq9BfiAArcEp8t9M9BfocNlQfK6D0cJCxAjgqQAroY4b7ACmwcbK7C2wFQun2HXWNuOlpokDfhY1r25Mh0Cc6s8arFfy2D/09h0a0r/LWAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" /> <em>and</em> interact with the environment</li>
</ol>
<p>While technical derivations are available in the aforementioned paper, the high-level intuitions I presented here don’t seem to be. I find them useful, since they give an operational view of the affine traversal. We can also easily see how to recover prisms (by setting <img width="46" alt="D = I" height="11" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFwAAAAXCAQAAAAseeB8AAABOElEQVR4nL2XYRHDIAyFY6EWaqEWsICFWsACFmqhFmoBC1iYhS3AetuuBLK7V17+9ICyR/rtQoiu2umoxk6elsr6OzVXfIgyHJ6eHHt+PsNT4LGDNxupj5tAlp87qTN5qbmMOx59DM+7zW6sZmk5ozQToLa0bibN0iNDUVfkuRVoq6+gT1Y6oRfmtsE5n5pufiQRXiRjdI8ghCetzWPhBSL83GiccRDho43DCC/fQ/npAIIRTlyAUhGStOS3deHUbgCEz3mjrfG+UYfGDoxwp/90AAEJT3Uzwoz1BCO8HGtcwYcR3p7FC0R4udS27+O1q78UPQRAhC9sWnMXd/xTuui1JFZf6mTCtbaR+uM6JzFc2ofRnU/Q/qNMhanU8UXOtYo0qMy702xqFcty5JZ5bL9zIvIdl7S9AExEBl6nF11MAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-0px;" />) and lenses (by setting <img width="45" alt="C = I" height="12" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAAAZCAQAAAAbbfFLAAABf0lEQVR4nM2YgXGEIBBFtwVaoAVaoAVasAVasAVbSAu2kBbSgi2Yz3IXk1F29yaE+BhnHFnPz/pd4IhkHEWaaKaEs4Oo3PWPTPROO44Fohf6wOEe19+GPN/TemoiCSI3iPXfrmUMwFHAQPKfij2IaDOeV1KXcB7aoQ6Z3HH4U8+EsW7oE27uTmLRSQ5ybIq50Vv6tu7CJGqmnRTiOJMtycUi+yBHP6nflUDNsmT3ONDRBcd5bieR6qvYLrx84O/m6KiPCqJv5uiV8yxaHgO7laNrnpdxegyojl4s9XAwqqM3DvgdgX/D1iw1SHG0525lbjcQzU3+diomR8uVYzSqo22ipQreny41mjrY5xXUGh0MouPggqiuOkhZKBVW1R5Xy/ZW04qrYdVR67Q0rsn0mWZE2ZqWgOpoZWPnxaAwePp+Ololc66vjJ/wOi11tSfaIvmLmWX/XHp63tiOJj52hibKhrbsTTLPWhln6+A/DObThG9KWUBYEbtA9NjpxMgnOmLgIJZPNxoAAAAASUVORK5CYII=" class="display-math" style="margin:0; vertical-align:-1px;" />).</p>
<h2 id="conclusions">Conclusions</h2>
<p>It’s been known for a while that affine traversals arise as compositions of lenses and prisms. What I couldn’t find in the literature was the definition of this composition operator, as well as a more detailed operational view. Thinking about lenses and prisms as models of processes that either <em>make us</em> query the environment, or <em>allow us to query the environment</em> was enlightening to me, and my key to understanding affine traversals.</p>
<p>This unlocks more questions. All optics in <a href="https://arxiv.org/abs/2001.07488">Profunctor Optics: A Categorical Update</a> are defined using actegories, and actegories can be composed. Can we use this method to come up with new types of optics? In this blog post we talked about the affine traversal, but can we recover <em>the traversal</em> as a limit of some infinite sequence of composition? Are there some even more exotic types of optics, other than kaleidoscopes, glasses and grates?</p>
<p>And lastly, it’s well known that lenses can be used to help us model all sorts of interaction protocols (<a href="https://arxiv.org/abs/2103.01931">1</a>, <a href="https://arxiv.org/abs/1903.03671">2</a>, <a href="https://arxiv.org/abs/1910.03656">3</a>). But prisms, affine traversals, and the rest of the optical gadgets are not as well studied in categorical machine learning nor categorical game theory. There’s a large class of important systems that can’t be described with just lenses: systems with power to choose whether to execute some code or not.</p>
<p><br> <br></p>
<p>Thanks to <a href="https://ievacepaite.com/">Ieva Čepaitė</a> and <a href="https://twitter.com/dailectic">David Orion Girardo</a> for a read-through of this post.</p>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>While we can easily obtain the functor <img width="141" alt="AF : \mathcal{C} \times \mathcal{C} \to [\mathcal{C}, \mathcal{C}]" height="17" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARoAAAAiCAQAAAAq5N5FAAAEjElEQVR4nO2cfbWzMAzGsYAFLGABC7MwC7NQC1jAAhawMAuzsLct9A7apnlKsw/Oy8Mf95zBkhR+hDRlt6pOHUdd9Vy27gher5V6T0S71VYXHZPSf/8Pv0advXBmq8ljJOLb2qgXn5nQNPoLI7l30PvS26VgALFoVHX/o//5MZy/5fclc+FoScSXspEJzai/MJF7DYW9dTEtTLpNaaBkT2+tbT21VWVz32St0zjL6Vt+t6KhkYiPs5EFzWWhjj8mllGu+vMr7iypVg9l1HeDU2O99kLWf8+vLwoaifh4GxnQ1NpYz0Kj7BHxJ+1DqGxrtaXtiZgHJoXkr/kNFYdGIj7ERgY0qrotSKRKqynxAFvzu19mWH7CNVnsLmD7F/3GFINGIj7MBgxNY1G4MROuOlm5SDz7az2AR5DJprff79/yG1cIjUR8qA0YmsEe2JEVyyy6ojGSgKaPQNkB91NqmDUwLd3rF1UefCE0EvGhNkBoOg2NM5GaA4UVzXX1SCqfOxn/4b0w6OHS/YpZ/pP6JVOrPd7mF9WYVa760EjEh9sAoZmWS59+/MQqGjy71MlWlbO2d9oeFnjOq0GGyzT7/aK6RS4YLR8aifhwGxA0amUsNYULkWoyoLmzybRly/D0t0NsMGTK/GKqdRz4Zd9CIxFfjg0AmmaTOx6JZpFf0Zhv4ieC7wGpwhrCxwZDptwvJqVjQWeXW2gk4suxAUAzbA4ZE9CopXc4bw9mpuXrpoNOI3YvbqStsUGRkfCLadIb9ojaQiMRX44N9qq6EthpTOSDuaJ5LR4MTObIU8PUU5gcNjgyMn4R1RYbJNusoZGIL88GC40/CEVCE1Y0neiqzCUzc1GasUGRkfOLaEb5xh63hkYivjwbzJHKdgjX27zyGbsbwh5NJ3p/KrGL12UVjvv9NssjOn/jgF5DI3Fe8mwkj2yC1Wq3ih37UtijkX3XRAqa+W6m+zaSfv2zx2+DrQo5bz8MzRDZ2ZHmU6tOElJBJtsjV8tQfZt3+cVkbkn+4RSDpiy+PBsJaPwS2H0aL5m4tl+5VNLDBbpP1uUvio2EX0wKrrNCaMriy7ORgIaq4+Pm06tOErpaD7FeQm3ndPzp9mdMGDblfjEZEND1pzU0EvHl2SChUSR38Z5w6j0aVOl7olmKxDB9K+h0xybZCDalflGN0cweVzjlRuOLn+M8GwQ0bUV3WOI94fKKhrcwRmcW2BuBVF8GwabELyqDAf620ba5h8dHn+OcMUagqe3iGZXWOrvv7uWUudIpg+bJ5qr2bwrbL2FfbBMAScB0X4bHpsQvqj6rp+WvPaHxPckiImeMATRj9eoW+OlyWO1zyezmfbZ/6UwBhXTrdT7MIh/2SOwTUbVsrtnvFxXS0nvJX+VG4+vtrR0/y/gYP/trKwGZPDj/VEZ99J25d/vlXwvZHh2+uYfGR7dcURuHg+aUUfp3T9x3S6E/oTmkSqBRxa/3n9AcUiXQ4BN7Sic0h9R+aJTABT+hOaT2QtOJvEx2QnNI7YdGQic0h9TB/j/NqV+Q+08xed0dca//ABjRZfhTYYfRAAAAAElFTkSuQmCC" class="display-math" style="margin:0; vertical-align:-5px;" />, showing it is strong monoidal will require a distributive law between the two underlying actegories.<a href="#fnref1" class="footnote-back">↩</a></p></li>
</ol>
</section>


<form style="border:1px solid #ccc;padding:3px;text-align:center;" action="https://tinyletter.com/bgavran" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/bgavran', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
    <p><label for="tlemail">Want to subscribe to my newsletter? Sign up with your email below.</label> Or subscribe via <a href="../rss.xml">RSS</a>. </p>
    <p><input type="text" style="width:140px" name="email" id="tlemail" /> <input type="hidden" value="1" name="embed" /><input type="submit" value="Sign up" /></p>

    <small> <a href="https://tinyletter.com" target="_blank">powered by TinyLetter</a> </small>
</form>

<div class="commentbox"></div>


<script>
commentBox('5769281040023552-proj');
</script>

        <div id="footer">
          <div class="inside">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>.
            This theme was designed by <a href="http://twitter.com/katychuang">Dr. Kat</a> and showcased in the <a href="http://katychuang.com/hakyll-cssgarden/gallery/">Hakyll-CSSGarden</a>


          </div>
        </div>

          </div>
        </div>
    </body>
</html>
