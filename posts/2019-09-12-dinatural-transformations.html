<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-PWZE1HYS87"></script>
        <script>
         window.dataLayer = window.dataLayer || [];
         function gtag(){dataLayer.push(arguments);}
         gtag('js', new Date());

         gtag('config', 'G-PWZE1HYS87');
        </script>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="author" content="Bruno Gavranovic" />
        <meta name="viewport" content="width=device-width" />
        <meta http-equiv="Cache-Control" content="max-age=86400, must-revalidate" />
        <title>Dinatural transformations</title>
        <script src="../css/jquery.js"></script>
        <script src="../css/selectfile.js"></script>
        <link rel="stylesheet" type="text/css" title="hakyll_theme" href="../css/theprofessional.css" />
        <link href="https://fonts.googleapis.com/css?family=Titillium+Web" rel="stylesheet">

        <!-- MathJax font size adjustment -->
        <style>
            mjx-container {
                font-size: 80% !important;
            }

            /* Scale TikZ diagrams uniformly */
            .page svg {
                transform: scale(1.2) !important;
                transform-origin: center !important;
            }

            /* Improve code blocks */
            pre, code {
                background-color: #f8f9fa;
                border: 1px solid #e1e4e8;
                border-radius: 3px;
                font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
                font-size: 0.9em;
            }

            pre {
                padding: 1em;
                overflow-x: auto;
            }

            code {
                padding: 0.2em 0.4em;
            }

            pre code {
                background: none;
                border: none;
                padding: 0;
            }
        </style>

        <!-- MathJax for regular math -->
        <script>
            MathJax = {
                tex: {
                    macros: {
                        coloneqq: '\\mathrel{\\vcenter{:}}=',
                        enskip: '\\hspace{0.5em}'
                    }
                }
            };
        </script>
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

        <!-- TikZJax for TikZ diagrams -->
        <link rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css">
        <script src="https://tikzjax.com/v1/tikzjax.js"></script>
    </head>
    <body>
        <div class="highbar">&nbsp;</div>
        <div class="container-gallery">
        <div id="content" class="inside">

        <div id="header">
          <div class="box">
            <div id="logo" class="name">
                <h2><pageTitle><a href="../">Bruno Gavranović</a></pageTitle></h2>
            </div>
            <div id="navigation" class="pageslinks">
              <nav class="menuNav">
                <div class="menuItems">
                <a href="../" class="posts/2019-09-12-dinatural-transformations.md">Home</a>
                <a href="../archive.html" class="posts/2019-09-12-dinatural-transformations.md">Posts</a>
                <a href="../papers.html" class="posts/2019-09-12-dinatural-transformations.md">Papers</a>
                <a href="../research_programme.html" class="posts/2019-09-12-dinatural-transformations.md">Research Programme</a>
                <a href="../about.html" class="posts/2019-09-12-dinatural-transformations.md">About</a>
		<!-- <a href="/contact.html" class="posts/2019-09-12-dinatural-transformations.md">Contact</a> -->
                </div>
              </nav>
            </div>
        </div>
        </div>
            <script src="https://unpkg.com/commentbox.io/dist/commentBox.min.js"></script>

<div class="info">
    Posted on September 12, 2019
    
</div>

<h1 id="dinatural-transformations">Dinatural transformations</h1>
<p>To kick off my first blog post I decided to write a short technical exposition.
Its topic will be a concept from category theory I recently came across: <em>dinatural transformations</em>.
As this is a pretty abstract concept, and as expository materials are few and far in between, I decided to share some insights I had while learning about it.
I’ll walk you through the main idea, and show how you could have arrived at the <a href="https://en.wikipedia.org/wiki/Dinatural_transformation">definition</a> of a dinatural transformation yourself!</p>
<p>I’ll assume you understand categories, functors, natural transformations, and the notion of covariance/contravariance. I’ll also assume you have <em>looked at</em> (but not necessarily understood) the definition of a dinatural transformation.
I won’t highlight any uses of dinatural transformations or convince you to start thinking about them. The goal of this blog post is merely to give you intuition of why their intimidating definition is the way is. So let’s start! I’ll begin with the high-level idea.</p>
<p>From the high-level, while a natural transformation can be defined between functors on <em>any</em> two categories (called <span class="math inline">\(\alpha\)</span> below left), a dinatural transformation requires that the domain category is a product of a category and its opposite (called <span class="math inline">\(\beta\)</span> below right).</p>
<center>
<script type="text/tikz">
\begin{tikzcd}[column sep=huge, row sep=large]
  \mathcal{C}
  \ar[r, bend left=30, "F"]
  \ar[r, bend right=30, "G"']
  \ar[r, phantom, "\Downarrow\alpha", description, inner sep=0pt]
  & \mathcal{D}
  & \phantom{X}
  & \phantom{X}
  \mathcal{C}^{op} \times \mathcal{C} \ar[r, bend left=35pt, "F"]\ar[r, bend right=35pt, "G"']\ar[r, phantom, "\scriptstyle\beta\!\Downarrow\;"]& \mathcal{D}
\end{tikzcd}
</script>
</center>
<p>These two aspects – that the domain is a product and that it is in opposing variance – will be central for defining dinaturality.
The product will allow us to define components of the dinatural transformation by taking advantage of the <em>diagonal</em> of this product.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> That is where its name comes from! And the opposing variance will allow us to state a generalised naturality condition, producing the hexagonal diagram seen in the definition of a dinatural transformation.
Essentially, we will see how by removing some pieces from natural transformations on functors of type <span class="math inline">\(\mathcal{C}^{op} \times \mathcal{C} \to \mathcal{D}\)</span> we will end up with dinatural ones.
And thus will be able to see that every such natural transformation is also dinatural, but not vice-versa.</p>
<p>So let’s dive in. We start with the category <span class="math inline">\(\mathcal{C}^{op} \times \mathcal{C}\)</span>.
This is a category that has a simple property: given any morphism <span class="math inline">\(f: A \rightarrow B\)</span> in the <em>original</em> category <span class="math inline">\(\mathcal{C}\)</span>, the following square in <span class="math inline">\(\mathcal{C}^{op} \times \mathcal{C}\)</span> commutes:<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<center>
<!-- % https://q.uiver.app/#q=WzAsNCxbMSwwLCIoQixBKSJdLFszLDAsIihCLEIpIl0sWzAsMSwiKEEsIEEpIl0sWzIsMSwiKEEsQikiXSxbMCwxLCIoMV9CLCBmKSJdLFsxLDMsIihmLCAxX0IpIl0sWzIsMywiKDFfQSwgZikiLDJdLFswLDIsIihmLCAxX0EpIiwyXV0= -->
<script type="text/tikz">
\begin{tikzcd}
	& {(B\text{,}A)} && {(B\text{,}B)} \\
	{(A\text{,} A)} && {(A\text{,}B)}
	\arrow["{(1_B\text{,} f)}", from=1-2, to=1-4]
	\arrow["{(f\text{,} 1_A)}"', from=1-2, to=2-1]
	\arrow["{(f\text{,} 1_B)}", from=1-4, to=2-3]
	\arrow["{(1_A\text{,} f)}"', from=2-1, to=2-3]
\end{tikzcd}
</script>
</center>
<p>What commutativity means is that, starting at the top-left corner <span class="math inline">\((B, A)\)</span>, using just <span class="math inline">\(f\)</span> (and identity maps) it does not matter which of the three ways we use to arrive at the bottom-right corner <span class="math inline">\((A, B)\)</span>. We can first move right, and then down, or down and then right, or right and down at the same time (this diagonal arrow isn’t drawn). It does not matter which of these we choose - they’re all equivalent.</p>
<p>Now we can move on to a functor <span class="math inline">\(F: \mathcal{C}^{op} \times \mathcal{C} \rightarrow \mathcal{D}\)</span>. Since every functor has to preserve commutative diagrams, the previously mentioned simple property can be extended. This means that, given any morphism <span class="math inline">\(f : A \rightarrow B\)</span> in <span class="math inline">\(\mathcal{C}\)</span> and a functor <span class="math inline">\(F: \mathcal{C}^{op} \times \mathcal{C} \rightarrow \mathcal{D}\)</span>, the following square in <span class="math inline">\(\mathcal{D}\)</span> commutes:</p>
<center>
<script type="text/tikz">
\begin{tikzcd}
&       F(B\text{,} A) \ar[dl, "{F(f\text{,} 1_A)}"'] \ar[rr, "{F(1_B\text{,} f)}"] &           &  F(B\text{,} B) \ar[dl, "{F(f\text{,} 1_B)}"] \\
F(A\text{,} A) \ar[rr, "{F(1_A\text{,} f)}"'] && F(A\text{,} B)  &
\end{tikzcd}
</script>
</center>
<p>Simple enough! Now, recall that a <em>natural</em> transformation</p>
<center>
<script type="text/tikz">
\begin{tikzcd}[column sep=huge, row sep=large]
  \mathcal{C}
  \ar[r, bend left=30, "F"]
  \ar[r, bend right=30, "G"']
  \ar[r, phantom, "\Downarrow\alpha", description, inner sep=0pt]
  & \mathcal{D}
\end{tikzcd}
</script>
</center>
<p>assigns to every object <span class="math inline">\(A\)</span> in <span class="math inline">\(\mathcal{C}\)</span> a morphism <span class="math inline">\(\alpha_A: F(A) \rightarrow G(A)\)</span> such that the square below commutes.</p>
<center>
<script type="text/tikz">
\begin{tikzcd}
F(A) \ar[r, "F(f)"] \ar[d, "\alpha_A", red]  & F(B) \ar[d, "\alpha_B", red]\\
G(A)    \ar[r, "G(f)"]                     & G(B)
\end{tikzcd}
</script>
</center>
<p>One consequence of this definition is that we can replace the top and bottom arrows of this commutative square with commutative squares themselves, and obtain a commutative <em>cube</em>.
In our case – where functors <span class="math inline">\(F, G\)</span> are of type <span class="math inline">\(\mathcal{C}^{op} \times \mathcal{C} \to \mathcal{D}\)</span> – the objects <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span> are pairs of objects, and <span class="math inline">\(F(f)\)</span> and <span class="math inline">\(G(f)\)</span> represent pairs of morphisms.
And the particular commutative square we will be interested in is the one formed out of a single morphism <span class="math inline">\(f\)</span>, that we mentioned above in the context of the product category <span class="math inline">\(\mathcal{C}^{op} \times \mathcal{C}\)</span>.
Let’s draw it out, and state the naturality condition for it again.
Given a morphism <span class="math inline">\(f : A \rightarrow B\)</span> in <span class="math inline">\(\mathcal{C}\)</span>, the fact that <span class="math inline">\(\alpha\)</span> is a natural transformation implies that the following cube commutes:
<br>
<br></p>
<center>
<script type="text/tikz">
\begin{tikzcd}
&       F(B\text{,} A) \ar[dddd, red, "\alpha_{B\text{,} A}"] \ar[rr, "{F(1_B\text{,} f)}"] \ar[ld, "{F(f\text{,} 1_A)}"'] &           &  \ar[dl, "{F(f\text{,} 1_B)}"] F(B\text{,} B) \ar[dddd, red, "\alpha_{B\text{,} B}"]\\
F(A\text{,} A) \ar[dddd, red, "\alpha_{A\text{,} A}"]  \ar[rr, "{F(1_A\text{,} f)}"', crossing over] && F(A\text{,} B)  & \\
& & & & &\\
& & & & &\\
&       G(B\text{,} A) \ar[dl, "{G(f\text{,} 1_A)}"'] \ar[rr, "{G(1_B\text{,} f)}"] &           &  G(B\text{,} B) \ar[dl, "{G(f\text{,} 1_B)}"]\\
G(A\text{,} A)   \ar[rr, "{G(1_A\text{,} f)}"'] && G(A\text{,} B)   \ar[from=uuuu, red, "\alpha_{A\text{,} B}", crossing over] &
\end{tikzcd}
</script>
</center>
<p><br>
We are now ready to understand dinatural transformations, which are a mere step away.
They crucially rely on the fact that our domain category is a product, and that we need not index our naturality morphisms <span class="math inline">\(\alpha_{A, B} : F(A, B) \to G(A, B)\)</span> by pairs of objects in <span class="math inline">\(\mathcal{C}\)</span>, but only a single object.
I’ll show you the new diagram, and then explain what’s going on.</p>
<br>
<center>
<script type="text/tikz">
\begin{tikzcd}
&       F(B\text{,} A) \ar[rr, "{F(1_B\text{,} f)}"] \ar[ld, "{F(f\text{,} 1_A)}"'] &           &  \ar[dl, "{F(f\text{,} 1_B)}"] F(B\text{,} B) \ar[dddd, red, "\beta_{B}"]\\
F(A\text{,} A) \ar[dddd, red, "\beta_{A}"]  \ar[rr, "{F(1_A\text{,} f)}"'] && F(A\text{,} B)   & \\
& & & & &\\
& & & & &\\
&       G(B\text{,} A) \ar[dl, "{G(f\text{,} 1_A)}"'] \ar[rr, "{G(1_B\text{,} f)}"] &           &  G(B\text{,} B) \ar[dl, "{G(f\text{,} 1_B)}"]\\
G(A\text{,} A)   \ar[rr, "{G(1_A\text{,} f)}"'] && G(A\text{,} B)   &
\end{tikzcd}
</script>
</center>
<p><br>
What happened here is two things. First, since our base <span class="math inline">\(\mathcal{C}^{op} \times \mathcal{C}\)</span> is a square – we’ve taken the opportunity to index <em>by the diagonal</em> of that square, instead of by its outer edges. This is where the name <em>di</em>natural transformation comes in. This means we have removed all the non-diagonal naturality morphisms, leaving only those of the form <span class="math inline">\(\alpha_{X, X} : F(X, X) \rightarrow G(X, X)\)</span>.
Since we are indexing only by one object, this means that we can leave out the second index <span class="math inline">\(\alpha_{X, X}\)</span> – we refer to the dinaturality component with just a single subscript.</p>
<p>The story is almost complete.
A <em>dinatural</em> transformation <span class="math inline">\(\beta: F \ddot\rightarrow G\)</span> between two functors <span class="math inline">\(F, G: \mathcal{C}^{op} \times \mathcal{C} \rightarrow \mathcal{D}\)</span> is a map which to every object <span class="math inline">\(X\)</span> in <span class="math inline">\(\mathcal{C}\)</span> associates a map <span class="math inline">\(\beta_X : F(X, X) \rightarrow G(X, X)\)</span> such that… what commutes?
This new naturality condition now has some loose ends. Let’s see what is going on.
Naturality condition is supposed to equate different path choices in a graph that <em>contain the naturality morphisms</em>. Observe that some morphisms (colored blue) are not part of any new paths that contain the new naturality morphisms (that is, you can’t find a path that contains both a red and a blue morphism).</p>
<br>
<center>
<script type="text/tikz">
\begin{tikzcd}
&       F(B\text{,} A) \ar[rr, "{F(1_B\text{,}f)}"] \ar[ld, "{F(f\text{,} 1_A)}"'] &           &  \ar[dl, "{F(f\text{,} 1_B)}", blue] F(B\text{,} B) \ar[dddd, red, "\beta_{B}"]\\
F(A\text{,} A) \ar[dddd, red, "\beta_{A}"]  \ar[rr, "{F(1_A\text{,} f)}"', blue] && \color{blue}{F(A\text{,} B)}   & \\
& & & & &\\
& & & & &\\
&       \color{blue}{G(B\text{,} A)} \ar[dl, "{G(f\text{,} 1_A)}"', blue] \ar[rr, "{G(1_B\text{,} f)}", blue] &           &  G(B\text{,} B) \ar[dl, "{G(f\text{,} 1_B)}"]\\
G(A\text{,} A)   \ar[rr, "{G(1_A\text{,} f)}"'] && G(A\text{,} B)   &
\end{tikzcd}
</script>
</center>
<p><br>
This means that we can safely remove the blue morphisms, since they do not play any role in our dinatural transformation.</p>
<br>
<center>
<script type="text/tikz">
\begin{tikzcd}
&       F(B\text{,} A) \ar[rr, "{F(1_B\text{,} f)}"] \ar[ld, "{F(f\text{,} 1_A)}"'] &           &   F(B\text{,} B) \ar[dddd, red, "\beta_{B}"]\\
F(A\text{,} A) \ar[dddd, red, "\beta_{A}"]  &&   & \\
& & & & &\\
& & & & &\\
&   &           &  G(B\text{,} B) \ar[dl, "{G(f\text{,} 1_B)}"]\\
G(A\text{,} A)   \ar[rr, "{G(1_A\text{,} f)}"'] && G(A\text{,} B)   &
\end{tikzcd}
</script>
</center>
<p><br></p>
<p>After doing so, we end up with a new, hexagonal diagram. And we can notice that this is exactly the hexagonal diagram used in the definition of a dinatural transformation as found on <a href="https://en.wikipedia.org/wiki/Dinatural_transformation">Wikipedia</a> or <a href="https://ncatlab.org/nlab/show/dinatural+transformation">nLab</a>! If you look closely you will see it is just a rotated version of the one I’ve drawn here.
This really means that if you were confused by the rationale for having such a hexagonal diagram in the definition of a dinatural transformation – <strong>it’s because the rest of the cube isn’t drawn</strong>. But it’s good to draw it when learning, and to understand where the diagram comes from.</p>
<p>And this is it, we have defined a dinatural transformation! A <em>dinatural</em> transformation <span class="math inline">\(\beta: F \ddot\rightarrow G\)</span> between two functors <span class="math inline">\(F, G: \mathcal{C}^{op} \times \mathcal{C} \rightarrow \mathcal{D}\)</span> is a map which to every object <span class="math inline">\(X\)</span> in <span class="math inline">\(\mathcal{C}\)</span> associates a map <span class="math inline">\(\beta_X : F(X, X) \rightarrow G(X, X)\)</span> such that the diagram above commutes.
This allows us to see that the hexagonal diagram is just a diagram of the commutative cube with some morphisms removed.
This also allows us to see how every natural transformation between these functors is also a dinatural transformation: one that has non-diagonal naturality morphisms, and one which assumes that the entire cube commutes, instead of just the hexagon.</p>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p>If you think of a product like a square, then the diagonal of the product is precisely the diagonal of the square: points where the index for the <span class="math inline">\(X\)</span> coordinate is the same as the index for the <span class="math inline">\(Y\)</span> coordinate.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>In this diagram each morphism is a pair of morphisms in <span class="math inline">\(\mathcal{C}\)</span>. Also, every drawn morphism always has one component of the pair set to identity.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

<div class="commentbox"></div>


<script>
commentBox('5769281040023552-proj');
</script>

        <div id="footer">
          <div class="inside">
            Licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/"> CC BY-SA 4.0</a>
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>.
            The theme originates in the <a href="http://katychuang.com/hakyll-cssgarden/gallery/">Hakyll-CSSGarden</a>.
          </div>
        </div>

          </div>
        </div>
    </body>
</html>
